<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥ˆé¡˜æ“²ç­Š | ç·šä¸Šæ±‚ç¥å•åœ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è¼‰å…¥å°ç£å¸¸ç”¨ä¸”å…·å‚³çµ±éŸ»å‘³çš„å­—é«”æ€ç¶­ */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700;900&display=swap');
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #FDF9EC; /* å®£ç´™èˆ¬çš„æº«æ½¤åº•è‰² */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23dca854' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        /* éš±è—åŸç”Ÿæ²è»¸ï¼Œè®“ç•«é¢æ›´ä¹¾æ·¨ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #dca854;
            border-radius: 4px;
        }
        /* ç­Šæ¯æ‹‹æ“²å‹•ç•« */
        @keyframes toss-left {
            0% { transform: translateY(0) rotate(0deg) scale(1); }
            50% { transform: translateY(-120px) translateX(-30px) rotate(360deg) scale(1.2); }
            80% { transform: translateY(20px) translateX(-10px) rotate(700deg) scale(1); }
            100% { transform: translateY(0) rotate(720deg) scale(1); }
        }
        @keyframes toss-right {
            0% { transform: translateY(0) rotate(0deg) scale(1); }
            50% { transform: translateY(-120px) translateX(30px) rotate(-360deg) scale(1.2); }
            80% { transform: translateY(20px) translateX(10px) rotate(-700deg) scale(1); }
            100% { transform: translateY(0) rotate(-720deg) scale(1); }
        }
        .anim-toss-left { animation: toss-left 1.2s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
        .anim-toss-right { animation: toss-right 1.2s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
        /* å¡ç‰‡é¸å–ç‹€æ…‹ */
        .deity-card.selected {
            border-color: #ef4444;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.4);
            transform: translateY(-4px);
        }
        /* ç­Šæ¯ SVG æ¨£å¼ */
        .jiaobei-flat { fill: #dc2626; } /* é™½é¢ï¼ˆå¹³é¢ï¼‰ç´…è‰² */
        .jiaobei-curved { fill: #7f1d1d; } /* é™°é¢ï¼ˆå‡¸é¢ï¼‰æ·±ç´… */
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 sm:p-8 text-slate-800">
    <!-- å…¨åŸŸæç¤ºè¨Šæ¯ (Toast) -->
    <div id="toast" class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-6 py-3 rounded-full shadow-lg opacity-0 transition-opacity duration-300 pointer-events-none z-50 flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
        <span id="toast-message">æç¤ºè¨Šæ¯</span>
    </div>

    <!-- ç¬¬ä¸€éšæ®µï¼šè¨­å®šèˆ‡è«‹ç¥ç•«é¢ -->
    <main id="setup-screen" class="w-full max-w-2xl bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-6 sm:p-10 transition-all duration-500">
        <div class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-black text-red-700 mb-3 tracking-widest">ç¥ˆé¡˜æ“²ç­Š</h1>
            <p class="text-slate-600 font-medium">å¿ƒèª å‰‡éˆï¼Œè«‹é¸æ“‡æˆ–ä¸Šå‚³æ‚¨æ¬²æ±‚å•çš„ä¸»ç¥</p>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8">
            <!-- å…§å»º Q ç‰ˆç¥æ˜ï¼šåª½ç¥– -->
            <button class="deity-card border-2 border-transparent bg-amber-50 rounded-2xl p-4 flex flex-col items-center gap-3 transition-all hover:bg-amber-100" onclick="selectDeity('mazu', this)">
                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-yellow-300 to-amber-500 flex items-center justify-center shadow-inner">
                    <span class="text-3xl">ğŸ‘¸</span>
                </div>
                <span class="font-bold text-amber-900">å¤©ä¸Šè–æ¯</span>
            </button>
            <!-- å…§å»º Q ç‰ˆç¥æ˜ï¼šé—œå…¬ -->
            <button class="deity-card border-2 border-transparent bg-amber-50 rounded-2xl p-4 flex flex-col items-center gap-3 transition-all hover:bg-amber-100" onclick="selectDeity('guangong', this)">
                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-red-400 to-red-700 flex items-center justify-center shadow-inner">
                    <span class="text-3xl">ğŸ§”ğŸ¾â€â™‚ï¸</span>
                </div>
                <span class="font-bold text-amber-900">é—œè–å¸å›</span>
            </button>
            <!-- å…§å»º Q ç‰ˆç¥æ˜ï¼šåœŸåœ°å…¬ -->
            <button class="deity-card border-2 border-transparent bg-amber-50 rounded-2xl p-4 flex flex-col items-center gap-3 transition-all hover:bg-amber-100" onclick="selectDeity('tudigong', this)">
                <div class="w-16 h-16 rounded-full bg-gradient-to-br from-orange-200 to-yellow-500 flex items-center justify-center shadow-inner">
                    <span class="text-3xl">ğŸ‘´ğŸ¼</span>
                </div>
                <span class="font-bold text-amber-900">ç¦å¾·æ­£ç¥</span>
            </button>
            <!-- è‡ªè¡Œä¸Šå‚³ -->
            <div class="deity-card relative border-2 border-dashed border-slate-300 bg-slate-50 rounded-2xl p-4 flex flex-col items-center justify-center gap-2 transition-all hover:bg-slate-100 cursor-pointer overflow-hidden" id="upload-card">
                <input type="file" id="image-upload" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" onchange="handleFileUpload(event)">
                <div id="upload-icon" class="flex flex-col items-center gap-2">
                    <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    <span class="font-bold text-slate-500 text-sm">è‡ªè¨‚ä¸Šå‚³</span>
                </div>
                <img id="upload-preview" class="absolute inset-0 w-full h-full object-cover hidden" alt="ä¸Šå‚³é è¦½">
            </div>
        </div>
        <div class="mb-8">
            <label for="question" class="block text-sm font-bold text-slate-700 mb-2">æ‚¨æƒ³è«‹ç¤ºçš„äº‹æƒ…æ˜¯ï¼Ÿï¼ˆé¸å¡«ï¼‰</label>
            <textarea id="question" rows="3" class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none resize-none transition-shadow text-lg" placeholder="ä¾‹å¦‚ï¼šä¿¡å¥³ï¼¯ï¼¯ï¼¯ï¼Œå®¶ä½... æƒ³è«‹å•ä»Šå¹´çš„äº‹æ¥­é‹å‹¢..."></textarea>
        </div>
        <button onclick="startDivination()" class="w-full py-4 bg-gradient-to-r from-red-600 to-red-800 text-white font-black text-xl rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all active:translate-y-0">
            æ­è«‹ç¥æ˜å…¥åº§
        </button>
    </main>

    <!-- ç¬¬äºŒéšæ®µï¼šæ“²ç­Šç•«é¢ -->
    <main id="divination-screen" class="w-full max-w-2xl hidden flex-col items-center transition-all duration-500 opacity-0 mt-8">
        <!-- ç¥æ˜å±•ç¤ºå€ -->
        <div class="relative w-48 h-48 sm:w-64 sm:h-64 mb-6 rounded-full p-2 bg-gradient-to-b from-yellow-300 to-amber-600 shadow-2xl flex items-center justify-center">
            <div id="active-deity-display" class="w-full h-full rounded-full bg-white flex items-center justify-center overflow-hidden border-4 border-white shadow-inner">
                <!-- å…§å®¹ç”± JS å‹•æ…‹æ³¨å…¥ -->
            </div>
            <!-- é¦™çˆè£é£¾ -->
            <div class="absolute -bottom-6 flex flex-col items-center">
                <div class="flex gap-2 mb-[-8px] z-10">
                    <div class="w-1 h-8 bg-orange-500 rounded-t-full shadow-[0_0_8px_#f97316] animate-pulse"></div>
                    <div class="w-1 h-10 bg-orange-500 rounded-t-full shadow-[0_0_8px_#f97316] animate-pulse" style="animation-delay: 0.2s"></div>
                    <div class="w-1 h-8 bg-orange-500 rounded-t-full shadow-[0_0_8px_#f97316] animate-pulse" style="animation-delay: 0.4s"></div>
                </div>
                <div class="w-16 h-8 bg-gradient-to-b from-yellow-600 to-yellow-800 rounded-b-xl border-t-4 border-yellow-400"></div>
            </div>
        </div>

        <!-- å•é¡Œå±•ç¤ºå€ -->
        <div id="display-question" class="text-center text-lg sm:text-xl font-bold text-amber-900 bg-white/80 backdrop-blur px-8 py-4 rounded-2xl shadow-md mb-10 max-w-md w-full min-h-[4rem] break-words">
            ï¼ˆå¼Ÿå­èª å¿ƒç¥ˆå•ï¼‰
        </div>

        <!-- æ“²ç­Šå€ -->
        <div class="relative w-full h-64 bg-slate-900/5 rounded-3xl border-2 border-slate-900/10 mb-8 flex items-center justify-center overflow-hidden">
            <div class="flex gap-4 sm:gap-12 relative z-10">
                <!-- å·¦ç­Šæ¯ -->
                <div id="block-left" class="w-16 h-24 sm:w-20 sm:h-32 transition-transform duration-300 drop-shadow-2xl">
                    <svg viewBox="0 0 100 200" class="w-full h-full">
                        <!-- é è¨­ç‚ºå‡¸é¢ (é™°) -->
                        <path id="path-left" d="M30,20 C70,0 90,100 70,180 C40,190 10,100 30,20 Z" class="jiaobei-curved" />
                        <path d="M20,10 C30,100 30,190 20,190 C10,100 10,10 20,10 Z" fill="#991b1b" /> <!-- å´é‚Šç«‹é«”æ„Ÿ -->
                    </svg>
                </div>
                <!-- å³ç­Šæ¯ -->
                <div id="block-right" class="w-16 h-24 sm:w-20 sm:h-32 transition-transform duration-300 drop-shadow-2xl" style="transform: scaleX(-1);">
                    <svg viewBox="0 0 100 200" class="w-full h-full">
                        <!-- é è¨­ç‚ºå‡¸é¢ (é™°) -->
                        <path id="path-right" d="M30,20 C70,0 90,100 70,180 C40,190 10,100 30,20 Z" class="jiaobei-curved" />
                        <path d="M20,10 C30,100 30,190 20,190 C10,100 10,10 20,10 Z" fill="#991b1b" />
                    </svg>
                </div>
            </div>
            <!-- çµæœæ–‡å­—ç–ŠåŠ å±¤ -->
            <div id="result-text" class="absolute inset-0 flex items-center justify-center opacity-0 scale-50 transition-all duration-500 z-20 pointer-events-none">
                <span class="text-6xl sm:text-8xl font-black text-red-600 drop-shadow-[0_4px_4px_rgba(255,255,255,0.8)] stroke-white" style="-webkit-text-stroke: 2px white;"></span>
            </div>
        </div>
        <div class="flex gap-4 w-full max-w-md">
            <button onclick="resetSetup()" class="flex-1 py-4 bg-white text-slate-600 font-bold rounded-xl shadow hover:bg-slate-50 transition-colors">
                é‡æ–°è«‹ç¥
            </button>
            <button id="btn-cast" onclick="castBlocks()" class="flex-[2] py-4 bg-red-600 text-white font-black text-xl rounded-xl shadow-lg hover:bg-red-700 active:scale-95 transition-all">
                èª å¿ƒæ“²ç­Š
            </button>
        </div>
        <!-- æ­·å²ç´€éŒ„ -->
        <div class="mt-8 w-full max-w-md">
            <h3 class="text-sm font-bold text-slate-500 mb-2 border-b border-slate-300 pb-1">æœ¬æ¬¡æ“²ç­Šç´€éŒ„</h3>
            <div id="history-list" class="flex gap-2 flex-wrap text-lg">
                <!-- å‹•æ…‹åŠ å…¥çµæœæ¨™ç±¤ -->
            </div>
        </div>
    </main>

    <script>
        /**
         * ç³»çµ±ç‹€æ…‹ç®¡ç†
         */
        const state = {
            selectedId: null, // 'mazu', 'guangong', 'tudigong', æˆ– 'custom'
            customImageURL: null, // å„²å­˜ä¸Šå‚³åœ–ç‰‡çš„ Base64 URL
            question: '',
            isCasting: false // å‹•ç•«é–å®šç‹€æ…‹
        };

        // ç­Šæ¯ SVG è·¯å¾‘è³‡æ–™
        // å¹³é¢ (é™½) - çœ‹èµ·ä¾†åƒå¹³å¦çš„åˆ‡é¢
        const pathFlat = "M30,20 L30,180 C70,180 90,100 70,20 C50,0 30,20 30,20 Z";
        // å‡¸é¢ (é™°) - çœ‹èµ·ä¾†åœ“æ½¤é£½æ»¿
        const pathCurved = "M30,20 C70,0 90,100 70,180 C40,190 10,100 30,20 Z";


        /**
         * é¡¯ç¤º Toast æç¤º
         * @param {string} msg
         */
        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').innerText = msg;
            toast.classList.remove('opacity-0');
            setTimeout(() => toast.classList.add('opacity-0'), 3000);
        }

        /**
         * è™•ç†é»æ“Šå…§å»ºç¥æ˜å¡ç‰‡
         */
        function selectDeity(id, element) {
            // æ¸…é™¤æ‰€æœ‰é¸å–ç‹€æ…‹
            document.querySelectorAll('.deity-card').forEach(el => el.classList.remove('selected'));
            // è¨­å®šé¸å–ç‹€æ…‹
            element.classList.add('selected');
            state.selectedId = id;
            // è‹¥ä¹‹å‰æœ‰ä¸Šå‚³åœ–ç‰‡ï¼Œæ¸…é™¤å…¶è¦–è¦ºé¸å–
            document.getElementById('upload-card').classList.remove('selected');
        }

        /**
         * è™•ç†ä½¿ç”¨è€…åœ–ç‰‡ä¸Šå‚³
         */
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // åŸºç¤å®‰å…¨èˆ‡æ•ˆèƒ½æª¢æŸ¥ï¼šé™åˆ¶ 5MB ä»¥ä¸‹åœ–ç‰‡
            if (!file.type.startsWith('image/')) {
                showToast('è«‹ä¸Šå‚³åœ–ç‰‡æª”æ¡ˆæ ¼å¼ (jpg, png, ç­‰)');
                return;
            }
            if (file.size > 5 * 1024 * 1024) {
                showToast('åœ–ç‰‡æª”æ¡ˆéå¤§ï¼Œè«‹é¸æ“‡å°æ–¼ 5MB çš„åœ–ç‰‡');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                state.customImageURL = e.target.result;
                state.selectedId = 'custom';

                // æ›´æ–° UI
                const previewImg = document.getElementById('upload-preview');
                previewImg.src = state.customImageURL;
                previewImg.classList.remove('hidden');
                document.getElementById('upload-icon').classList.add('hidden');

                // è§¸ç™¼é¸å–ç‹€æ…‹
                document.querySelectorAll('.deity-card').forEach(el => el.classList.remove('selected'));
                document.getElementById('upload-card').classList.add('selected');
            };
            reader.readAsDataURL(file);
        }

        /**
         * æº–å‚™é€²å…¥æ“²ç­Šç•«é¢
         */
        function startDivination() {
            if (!state.selectedId) {
                showToast('è«‹å…ˆé¸æ“‡æˆ–ä¸Šå‚³ä¸€ä½ç¥æ˜');
                return;
            }

            // å–å¾—å•é¡Œä¸¦å„²å­˜
            const q = document.getElementById('question').value.trim();
            state.question = q || 'ï¼ˆä¿¡å¾’é»˜å¿µå¿ƒä¸­æ‰€æ±‚ï¼‰';
            document.getElementById('display-question').innerText = state.question;

            // æ§‹å»ºç¥æ˜å±•ç¤ºå€å…§å®¹
            const displayContainer = document.getElementById('active-deity-display');
            displayContainer.innerHTML = ''; // æ¸…ç©º
            if (state.selectedId === 'custom' && state.customImageURL) {
                displayContainer.innerHTML = `<img src="${state.customImageURL}" class="w-full h-full object-cover" alt="ä¾›å¥‰ç¥æ˜">`;
            } else {
                // æ ¹æ“š ID è³¦äºˆå°æ‡‰çš„ Emoji èˆ‡æ¼¸å±¤èƒŒæ™¯
                let emoji = '';
                let bgClass = '';
                if (state.selectedId === 'mazu') {
                    emoji = 'ğŸ‘¸';
                    bgClass = 'from-yellow-300 to-amber-500';
                } else if (state.selectedId === 'guangong') {
                    emoji = 'ğŸ§”ğŸ¾â€â™‚ï¸';
                    bgClass = 'from-red-400 to-red-700';
                }
                else if (state.selectedId === 'tudigong') {
                    emoji = 'ğŸ‘´ğŸ¼';
                    bgClass = 'from-orange-200 to-yellow-500';
                }
                displayContainer.className = `w-full h-full rounded-full flex items-center justify-center overflow-hidden border-4 border-white shadow-inner bg-gradient-to-br ${bgClass}`;
                displayContainer.innerHTML = `<span class="text-7xl sm:text-9xl">${emoji}</span>`;
            }

            // åˆ‡æ›ç•«é¢å‹•ç•«
            const setupScreen = document.getElementById('setup-screen');
            const divScreen = document.getElementById('divination-screen');
            setupScreen.style.opacity = '0';
            setTimeout(() => {
                setupScreen.classList.add('hidden');
                divScreen.classList.remove('hidden');
                // è§¸ç™¼é‡ç¹ªä»¥å•Ÿå‹•éæ¸¡æ•ˆæœ
                void divScreen.offsetWidth;
                divScreen.classList.remove('opacity-0');
            }, 500);
        }

        /**
         * å›åˆ°è¨­å®šç•«é¢
         */
        function resetSetup() {
            const setupScreen = document.getElementById('setup-screen');
            const divScreen = document.getElementById('divination-screen');
            divScreen.classList.add('opacity-0');
            setTimeout(() => {
                divScreen.classList.add('hidden');
                setupScreen.classList.remove('hidden');
                void setupScreen.offsetWidth;
                setupScreen.style.opacity = '1';
            }, 500);

            // æ¸…ç©ºæ­·å²ç´€éŒ„
            document.getElementById('history-list').innerHTML = '';
            // éš±è—çµæœæ–‡å­—
            const resultText = document.getElementById('result-text');
            resultText.classList.remove('opacity-100', 'scale-100');
            resultText.classList.add('opacity-0', 'scale-50');
        }

        /**
         * åŸ·è¡Œæ“²ç­Šé‚è¼¯èˆ‡å‹•ç•«
         */
        function castBlocks() {
            if (state.isCasting) return;
            state.isCasting = true;

            const btn = document.getElementById('btn-cast');
            btn.disabled = true;
            btn.classList.add('opacity-75', 'cursor-not-allowed');

            const blockLeft = document.getElementById('block-left');
            const blockRight = document.getElementById('block-right');
            const pathLeft = document.getElementById('path-left');
            const pathRight = document.getElementById('path-right');
            const resultText = document.getElementById('result-text');

            // éš±è—ä¸Šä¸€æ¬¡çš„æ–‡å­—
            resultText.classList.remove('opacity-100', 'scale-100');
            resultText.classList.add('opacity-0', 'scale-50');

            // åŠ å…¥æ‹‹æ“²å‹•ç•«
            blockLeft.classList.add('anim-toss-left');
            blockRight.classList.add('anim-toss-right');

            // æ±ºå®šçµæœ (0: å¹³/é™½, 1: å‡¸/é™°)
            // ç”±æ–¼ Math.random() < 0.5ï¼Œæ‰€ä»¥å¹³å‡¸æ©Ÿç‡å„ç‚º 50%
            const leftResult = Math.random() < 0.5 ? 0 : 1;
            const rightResult = Math.random() < 0.5 ? 0 : 1;

            // å‹•ç•«é€²è¡Œåˆ°ä¸€åŠæ™‚åˆ‡æ›åœ–å½¢ï¼ˆç´„ 600msï¼‰
            setTimeout(() => {
                setBlockAppearance(pathLeft, leftResult);
                setBlockAppearance(pathRight, rightResult);
            }, 600);

            // å‹•ç•«çµæŸå¾Œè™•ç†çµæœ (å‹•ç•«ç¸½é•· 1.2sï¼Œè¨­å®š 1.3s ç¢ºä¿éŠœæ¥)
            setTimeout(() => {
                blockLeft.classList.remove('anim-toss-left');
                blockRight.classList.remove('anim-toss-right');
                showResult(leftResult, rightResult);
                state.isCasting = false;
                btn.disabled = false;
                btn.classList.remove('opacity-75', 'cursor-not-allowed');
            }, 1300);
        }

        /**
         * è¨­å®šå–®å€‹ç­Šæ¯çš„å¤–è§€
         * @param {SVGElement} pathEl
         * @param {number} type 0 = å¹³é¢(é™½), 1 = å‡¸é¢(é™°)
         */
        function setBlockAppearance(pathEl, type) {
            if (type === 0) {
                pathEl.setAttribute('d', pathFlat);
                pathEl.setAttribute('class', 'jiaobei-flat');
            } else {
                pathEl.setAttribute('d', pathCurved);
                pathEl.setAttribute('class', 'jiaobei-curved');
            }
        }

        /**
         * åˆ¤å®šä¸¦é¡¯ç¤ºçµæœ
         * è–ç­Šï¼šä¸€å¹³ä¸€å‡¸ (0,1 æˆ– 1,0)
         * ç¬‘ç­Šï¼šå…©å¹³ (0,0)
         * é™°ç­Šï¼šå…©å‡¸ (1,1)
         */
        function showResult(left, right) {
            const resultTextEl = document.getElementById('result-text').querySelector('span');
            const resultContainer = document.getElementById('result-text');
            const historyList = document.getElementById('history-list');

            let resultName = '';
            let colorClass = '';

            if (left !== right) {
                resultName = 'è–ç­Š';
                colorClass = 'text-red-600';
            } else if (left === 0 && right === 0) {
                resultName = 'ç¬‘ç­Š';
                colorClass = 'text-yellow-500';
            } else {
                resultName = 'é™°ç­Š';
                colorClass = 'text-slate-800';
            }

            // é¡¯ç¤ºå¤§å­—çµæœ
            resultTextEl.innerText = resultName;
            resultTextEl.className = `text-6xl sm:text-8xl font-black drop-shadow-[0_4px_4px_rgba(255,255,255,0.9)] stroke-white ${colorClass}`;
            resultContainer.classList.remove('opacity-0', 'scale-50');
            resultContainer.classList.add('opacity-100', 'scale-100');

            // ç´€éŒ„åˆ°æ­·å²å€å¡Š
            const tag = document.createElement('span');
            tag.className = `px-3 py-1 rounded-md font-bold text-white shadow-sm ${
                resultName === 'è–ç­Š' ? 'bg-red-500' : resultName === 'ç¬‘ç­Š' ? 'bg-yellow-500' : 'bg-slate-700'
            }`;
            tag.innerText = resultName;
            historyList.appendChild(tag);
        }
    </script>
</body>
</html>