/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={82:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(){(0,o.registerResolver)(h,f),(0,o.registerResolver)(p,f)};const r=i(9278),s=i(5034),n=i(131),a=i(4097),o=i(9302),l=i(8996),c=i(3822),d=i(267);function u(e){d.trace(n.LogVerbosity.DEBUG,"ip_resolver",e)}const h="ipv4",p="ipv6";class f{constructor(e,t,i){var s;this.listener=t,this.endpoints=[],this.error=null,this.hasReturnedResult=!1,u("Resolver constructed for target "+(0,c.uriToString)(e));const o=[];if(e.scheme!==h&&e.scheme!==p)return void(this.error={code:n.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new a.Metadata});const d=e.path.split(",");for(const t of d){const i=(0,c.splitHostPort)(t);if(null===i)return void(this.error={code:n.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new a.Metadata});if(e.scheme===h&&!(0,r.isIPv4)(i.host)||e.scheme===p&&!(0,r.isIPv6)(i.host))return void(this.error={code:n.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new a.Metadata});o.push({host:i.host,port:null!==(s=i.port)&&void 0!==s?s:443})}this.endpoints=o.map(e=>({addresses:[e]})),u("Parsed "+e.scheme+" address list "+o.map(l.subchannelAddressToString))}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener((0,s.statusOrFromError)(this.error),{},null,""):this.listener((0,s.statusOrFromValue)(this.endpoints),{},null,"")}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}},131:(e,t)=>{"use strict";var i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(i||(t.Status=i={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(r||(t.LogVerbosity=r={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(s||(t.Propagate=s={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},178:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const r=i(4097),s=i(131);var n;!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(n||(t.PickResultType=n={})),t.UnavailablePicker=class{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new r.Metadata},e)}pick(e){return{pickResultType:n.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}},t.QueuePicker=class{constructor(e,t){this.loadBalancer=e,this.childPicker=t,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),this.childPicker?this.childPicker.pick(e):{pickResultType:n.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}},222:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PriorityQueue=void 0;const i=e=>Math.floor(e/2),r=e=>2*e+1,s=e=>2*e+2;t.PriorityQueue=class{constructor(e=(e,t)=>e>t){this.comparator=e,this.heap=[]}size(){return this.heap.length}isEmpty(){return 0==this.size()}peek(){return this.heap[0]}push(...e){return e.forEach(e=>{this.heap.push(e),this.siftUp()}),this.size()}pop(){const e=this.peek(),t=this.size()-1;return t>0&&this.swap(0,t),this.heap.pop(),this.siftDown(),e}replace(e){const t=this.peek();return this.heap[0]=e,this.siftDown(),t}greater(e,t){return this.comparator(this.heap[e],this.heap[t])}swap(e,t){[this.heap[e],this.heap[t]]=[this.heap[t],this.heap[e]]}siftUp(){let e=this.size()-1;for(;e>0&&this.greater(e,i(e));)this.swap(e,i(e)),e=i(e)}siftDown(){let e=0;for(;r(e)<this.size()&&this.greater(r(e),e)||s(e)<this.size()&&this.greater(s(e),e);){let t=s(e)<this.size()&&this.greater(s(e),r(e))?s(e):r(e);this.swap(e,t),e=t}}}},246:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSubchannelChannel=void 0;const r=i(5572),s=i(9503),n=i(4987),a=i(463),o=i(131),l=i(6067),c=i(6308),d=i(1703),u=i(4097),h=i(9302),p=i(3822);class f{constructor(e,t,i,r,s){var n,a;this.subchannel=e,this.method=t,this.options=r,this.callNumber=s,this.childCall=null,this.pendingMessage=null,this.readPending=!1,this.halfClosePending=!1,this.pendingStatus=null,this.readFilterPending=!1,this.writeFilterPending=!1;const l=this.method.split("/");let d="";l.length>=2&&(d=l[1]);const u=null!==(a=null===(n=(0,p.splitHostPort)(this.options.host))||void 0===n?void 0:n.host)&&void 0!==a?a:"localhost";this.serviceUrl=`https://${u}/${d}`;const h=(0,c.getRelativeTimeout)(r.deadline);h!==1/0&&(h<=0?this.cancelWithStatus(o.Status.DEADLINE_EXCEEDED,"Deadline exceeded"):setTimeout(()=>{this.cancelWithStatus(o.Status.DEADLINE_EXCEEDED,"Deadline exceeded")},h)),this.filterStack=i.createFilter()}cancelWithStatus(e,t){this.childCall?this.childCall.cancelWithStatus(e,t):this.pendingStatus={code:e,details:t,metadata:new u.Metadata}}getPeer(){var e,t;return null!==(t=null===(e=this.childCall)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.subchannel.getAddress()}async start(e,t){if(this.pendingStatus)return void t.onReceiveStatus(this.pendingStatus);if(this.subchannel.getConnectivityState()!==a.ConnectivityState.READY)return void t.onReceiveStatus({code:o.Status.UNAVAILABLE,details:"Subchannel not ready",metadata:new u.Metadata});const i=await this.filterStack.sendMetadata(Promise.resolve(e));let r;try{r=await this.subchannel.getCallCredentials().generateMetadata({method_name:this.method,service_url:this.serviceUrl})}catch(e){const i=e,{code:r,details:s}=(0,l.restrictControlPlaneStatusCode)("number"==typeof i.code?i.code:o.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${i.message}`);return void t.onReceiveStatus({code:r,details:s,metadata:new u.Metadata})}r.merge(i);const s={onReceiveMetadata:async e=>{t.onReceiveMetadata(await this.filterStack.receiveMetadata(e))},onReceiveMessage:async e=>{this.readFilterPending=!0;const i=await this.filterStack.receiveMessage(e);this.readFilterPending=!1,t.onReceiveMessage(i),this.pendingStatus&&t.onReceiveStatus(this.pendingStatus)},onReceiveStatus:async e=>{const i=await this.filterStack.receiveTrailers(e);this.readFilterPending?this.pendingStatus=i:t.onReceiveStatus(i)}};this.childCall=this.subchannel.createCall(r,this.options.host,this.method,s),this.readPending&&this.childCall.startRead(),this.pendingMessage&&this.childCall.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.halfClosePending&&!this.writeFilterPending&&this.childCall.halfClose()}async sendMessageWithContext(e,t){this.writeFilterPending=!0;const i=await this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags}));this.writeFilterPending=!1,this.childCall?(this.childCall.sendMessageWithContext(e,i.message),this.halfClosePending&&this.childCall.halfClose()):this.pendingMessage={context:e,message:i.message}}startRead(){this.childCall?this.childCall.startRead():this.readPending=!0}halfClose(){this.childCall&&!this.writeFilterPending?this.childCall.halfClose():this.halfClosePending=!0}getCallNumber(){return this.callNumber}setCredentials(e){throw new Error("Method not implemented.")}getAuthContext(){return this.childCall?this.childCall.getAuthContext():null}}t.SingleSubchannelChannel=class{constructor(e,t,i){this.subchannel=e,this.target=t,this.channelzEnabled=!1,this.channelzTrace=new s.ChannelzTrace,this.callTracker=new s.ChannelzCallTracker,this.childrenTracker=new s.ChannelzChildrenTracker,this.channelzEnabled=0!==i["grpc.enable_channelz"],this.channelzRef=(0,s.registerChannelzChannel)((0,p.uriToString)(t),()=>({target:`${(0,p.uriToString)(t)} (${e.getAddress()})`,state:this.subchannel.getConnectivityState(),trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}),this.channelzEnabled),this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),this.filterStackFactory=new d.FilterStackFactory([new n.CompressionFilterFactory(this,i)])}close(){this.channelzEnabled&&this.childrenTracker.unrefChild(this.subchannel.getChannelzRef()),(0,s.unregisterChannelzRef)(this.channelzRef)}getTarget(){return(0,p.uriToString)(this.target)}getConnectivityState(e){throw new Error("Method not implemented.")}watchConnectivityState(e,t,i){throw new Error("Method not implemented.")}getChannelzRef(){return this.channelzRef}createCall(e,t){const i={deadline:t,host:(0,h.getDefaultAuthority)(this.target),flags:o.Propagate.DEFAULTS,parentCall:null};return new f(this.subchannel,e,this.filterStackFactory,i,(0,r.getNextCallNumber)())}}},267:(e,t,i)=>{"use strict";var r,s,n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0,t.trace=function(e,i,r){g(i)&&(0,t.log)(e,(new Date).toISOString()+" | v"+c+" "+l.pid+" | "+i+" | "+r)},t.isTracerEnabled=g;const o=i(131),l=i(932),c=i(9943).rE;let d={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},u=o.LogVerbosity.ERROR;switch((null!==(s=null!==(r=process.env.GRPC_NODE_VERBOSITY)&&void 0!==r?r:process.env.GRPC_VERBOSITY)&&void 0!==s?s:"").toUpperCase()){case"DEBUG":u=o.LogVerbosity.DEBUG;break;case"INFO":u=o.LogVerbosity.INFO;break;case"ERROR":u=o.LogVerbosity.ERROR;break;case"NONE":u=o.LogVerbosity.NONE}t.getLogger=()=>d,t.setLogger=e=>{d=e},t.setLoggerVerbosity=e=>{u=e},t.log=(e,...t)=>{let i;if(e>=u){switch(e){case o.LogVerbosity.DEBUG:i=d.debug;break;case o.LogVerbosity.INFO:i=d.info;break;case o.LogVerbosity.ERROR:i=d.error}i||(i=d.error),i&&i.bind(d)(...t)}};const h=null!==(a=null!==(n=process.env.GRPC_NODE_TRACE)&&void 0!==n?n:process.env.GRPC_TRACE)&&void 0!==a?a:"",p=new Set,f=new Set;for(const e of h.split(","))e.startsWith("-")?f.add(e.substring(1)):p.add(e);const m=p.has("all");function g(e){return!f.has(e)&&(m||p.has(e))}},305:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(){(0,r.registerResolver)("unix",n)};const r=i(9302),s=i(5034);class n{constructor(e,t,i){let r;this.listener=t,this.hasReturnedResult=!1,this.endpoints=[],r=""===e.authority?"/"+e.path:e.path,this.endpoints=[{addresses:[{path:r}]}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener,(0,s.statusOrFromValue)(this.endpoints),{},null,""))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return"localhost"}}},342:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=t.createCertificateProviderChannelCredentials=t.FileWatcherCertificateProvider=t.createCertificateProviderServerCredentials=t.createServerCredentialsWithInterceptors=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.statusOrFromError=t.statusOrFromValue=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.EndpointMap=t.endpointHasAddress=t.endpointToString=t.subchannelAddressToString=t.LeafLoadBalancer=t.isLoadBalancerNameRegistered=t.parseLoadBalancingConfig=t.selectLbConfigFromList=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.parseDuration=t.durationToMs=t.splitHostPort=t.uriToString=t.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var r=i(267);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return r.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return r.log}});var s=i(9302);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return s.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return s.createResolver}}),Object.defineProperty(t,"CHANNEL_ARGS_CONFIG_SELECTOR_KEY",{enumerable:!0,get:function(){return s.CHANNEL_ARGS_CONFIG_SELECTOR_KEY}});var n=i(3822);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return n.uriToString}}),Object.defineProperty(t,"splitHostPort",{enumerable:!0,get:function(){return n.splitHostPort}});var a=i(4700);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return a.durationToMs}}),Object.defineProperty(t,"parseDuration",{enumerable:!0,get:function(){return a.parseDuration}});var o=i(3956);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return o.BackoffTimeout}});var l=i(8923);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"selectLbConfigFromList",{enumerable:!0,get:function(){return l.selectLbConfigFromList}}),Object.defineProperty(t,"parseLoadBalancingConfig",{enumerable:!0,get:function(){return l.parseLoadBalancingConfig}}),Object.defineProperty(t,"isLoadBalancerNameRegistered",{enumerable:!0,get:function(){return l.isLoadBalancerNameRegistered}});var c=i(6486);Object.defineProperty(t,"LeafLoadBalancer",{enumerable:!0,get:function(){return c.LeafLoadBalancer}});var d=i(8996);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return d.subchannelAddressToString}}),Object.defineProperty(t,"endpointToString",{enumerable:!0,get:function(){return d.endpointToString}}),Object.defineProperty(t,"endpointHasAddress",{enumerable:!0,get:function(){return d.endpointHasAddress}}),Object.defineProperty(t,"EndpointMap",{enumerable:!0,get:function(){return d.EndpointMap}});var u=i(533);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return u.ChildLoadBalancerHandler}});var h=i(178);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return h.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return h.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return h.PickResultType}});var p=i(5034);Object.defineProperty(t,"statusOrFromValue",{enumerable:!0,get:function(){return p.statusOrFromValue}}),Object.defineProperty(t,"statusOrFromError",{enumerable:!0,get:function(){return p.statusOrFromError}});var f=i(2558);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return f.BaseFilter}});var m=i(1703);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return m.FilterStackFactory}});var g=i(2661);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return g.registerAdminService}});var v=i(2379);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return v.BaseSubchannelWrapper}});var y=i(8692);Object.defineProperty(t,"createServerCredentialsWithInterceptors",{enumerable:!0,get:function(){return y.createServerCredentialsWithInterceptors}}),Object.defineProperty(t,"createCertificateProviderServerCredentials",{enumerable:!0,get:function(){return y.createCertificateProviderServerCredentials}});var b=i(5819);Object.defineProperty(t,"FileWatcherCertificateProvider",{enumerable:!0,get:function(){return b.FileWatcherCertificateProvider}});var S=i(7434);Object.defineProperty(t,"createCertificateProviderChannelCredentials",{enumerable:!0,get:function(){return S.createCertificateProviderChannelCredentials}});var C=i(8899);Object.defineProperty(t,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:!0,get:function(){return C.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}})},361:(e,t,i)=>{"use strict";var r=t,s=i(3262),n=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var i=0,r={};for(t|=0;i<e.length;)r[n[i+t]]=e[i++];return r}r.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),r.long=a([0,0,0,1,1],7),r.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},420:(e,t,i)=>{"use strict";e.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var l=e._fieldsArray[r].resolve(),c="m"+s.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,l.name),l.map)t("if(!util.isObject(%s))",c)("return%j",n(l,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),o(t,l,"k[i]"),a(t,l,r,c+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",c)("return%j",n(l,"array"))("for(var i=0;i<%s.length;++i){",c),a(t,l,r,c+"[i]")("}");else{if(l.partOf){var d=s.safeProp(l.partOf.name);1===i[l.partOf.name]&&t("if(p%s===1)",d)("return%j",l.partOf.name+": multiple values"),i[l.partOf.name]=1,t("p%s=1",d)}a(t,l,r,c)}l.optional&&t("}")}return t("return null")};var r=i(5643),s=i(3262);function n(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,i,s){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",s)("default:")("return%j",n(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",n(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",n(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",n(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",n(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",n(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",n(t,"buffer"))}return e}function o(e,t,i){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",i)("return%j",n(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",i)("return%j",n(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",i)("return%j",n(t,"boolean key"))}return e}},463:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(i||(t.ConnectivityState=i={}))},527:e=>{"use strict";e.exports=u;var t=/[\s{}=;:[\],'"()<>]/g,i=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,r=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,s=/^ *[*/]+ */,n=/^\s*\*?\/*/,a=/\n/g,o=/\s/,l=/\\(.?)/g,c={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}})}function u(e,l){e=e.toString();var c=0,u=e.length,h=1,p=0,f={},m=[],g=null;function v(e){return Error("illegal "+e+" (line "+h+")")}function y(t){return e.charAt(t)}function b(t,i,r){var o,c={type:e.charAt(t++),lineEmpty:!1,leading:r},d=t-(l?2:3);do{if(--d<0||"\n"===(o=e.charAt(d))){c.lineEmpty=!0;break}}while(" "===o||"\t"===o);for(var u=e.substring(t,i).split(a),m=0;m<u.length;++m)u[m]=u[m].replace(l?n:s,"").trim();c.text=u.join("\n").trim(),f[h]=c,p=h}function S(t){var i=C(t),r=e.substring(t,i);return/^\s*\/\//.test(r)}function C(e){for(var t=e;t<u&&"\n"!==y(t);)t++;return t}function _(){if(m.length>0)return m.shift();if(g)return function(){var t="'"===g?r:i;t.lastIndex=c-1;var s=t.exec(e);if(!s)throw v("string");return c=t.lastIndex,T(g),g=null,d(s[1])}();var s,n,a,p,f,_=0===c;do{if(c===u)return null;for(s=!1;o.test(a=y(c));)if("\n"===a&&(_=!0,++h),++c===u)return null;if("/"===y(c)){if(++c===u)throw v("comment");if("/"===y(c))if(l){if(p=c,f=!1,S(c-1)){f=!0;do{if((c=C(c))===u)break;if(c++,!_)break}while(S(c))}else c=Math.min(u,C(c)+1);f&&(b(p,c,_),_=!0),h++,s=!0}else{for(f="/"===y(p=c+1);"\n"!==y(++c);)if(c===u)return null;++c,f&&(b(p,c-1,_),_=!0),++h,s=!0}else{if("*"!==(a=y(c)))return"/";p=c+1,f=l||"*"===y(p);do{if("\n"===a&&++h,++c===u)throw v("comment");n=a,a=y(c)}while("*"!==n||"/"!==a);++c,f&&(b(p,c-2,_),_=!0),s=!0}}}while(s);var E=c;if(t.lastIndex=0,!t.test(y(E++)))for(;E<u&&!t.test(y(E));)++E;var w=e.substring(c,c=E);return'"'!==w&&"'"!==w||(g=w),w}function T(e){m.push(e)}function E(){if(!m.length){var e=_();if(null===e)return null;T(e)}return m[0]}return Object.defineProperty({next:_,peek:E,push:T,skip:function(e,t){var i=E();if(i===e)return _(),!0;if(!t)throw v("token '"+i+"', '"+e+"' expected");return!1},cmnt:function(e){var t,i=null;return void 0===e?(t=f[h-1],delete f[h-1],t&&(l||"*"===t.type||t.lineEmpty)&&(i=t.leading?t.text:null)):(p<e&&E(),t=f[e],delete f[e],!t||t.lineEmpty||!l&&"/"!==t.type||(i=t.leading?null:t.text)),i}},"line",{get:function(){return h}})}u.unescape=d},533:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;const r=i(8923),s=i(463);t.ChildLoadBalancerHandler=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t,i){var r;if(this.calledByPendingChild()){if(e===s.ConnectivityState.CONNECTING)return;null===(r=this.parent.currentChild)||void 0===r||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t,i)}requestReresolution(){var e;const t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,i,s){let n;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){const e=new this.ChildPolicyHelper(this),i=(0,r.createLoadBalancer)(t,e);e.setChild(i),null===this.currentChild?(this.currentChild=i,n=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=i,n=this.pendingChild)}else n=null===this.pendingChild?this.currentChild:this.pendingChild;return this.latestConfig=t,n.updateAddressList(e,t,i,s)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return"child_load_balancer_helper"}}},627:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMap=t.setErrorMap=t.defaultErrorMap=void 0;const s=r(i(8227));t.defaultErrorMap=s.default;let n=s.default;t.setErrorMap=function(e){n=e},t.getErrorMap=function(){return n}},674:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.experimental=t.ServerMetricRecorder=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=t.addAdminServicesToServer=t.getChannelzHandlers=t.getChannelzServiceDefinition=t.InterceptorConfigurationError=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const r=i(2267);Object.defineProperty(t,"CallCredentials",{enumerable:!0,get:function(){return r.CallCredentials}});const s=i(3653);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return s.ChannelImplementation}});const n=i(5179);Object.defineProperty(t,"compressionAlgorithms",{enumerable:!0,get:function(){return n.CompressionAlgorithms}});const a=i(463);Object.defineProperty(t,"connectivityState",{enumerable:!0,get:function(){return a.ConnectivityState}});const o=i(7434);Object.defineProperty(t,"ChannelCredentials",{enumerable:!0,get:function(){return o.ChannelCredentials}});const l=i(5563);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return l.Client}});const c=i(131);Object.defineProperty(t,"logVerbosity",{enumerable:!0,get:function(){return c.LogVerbosity}}),Object.defineProperty(t,"status",{enumerable:!0,get:function(){return c.Status}}),Object.defineProperty(t,"propagate",{enumerable:!0,get:function(){return c.Propagate}});const d=i(267),u=i(4056);Object.defineProperty(t,"loadPackageDefinition",{enumerable:!0,get:function(){return u.loadPackageDefinition}}),Object.defineProperty(t,"makeClientConstructor",{enumerable:!0,get:function(){return u.makeClientConstructor}}),Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:!0,get:function(){return u.makeClientConstructor}});const h=i(4097);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return h.Metadata}});const p=i(5943);Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return p.Server}});const f=i(8692);Object.defineProperty(t,"ServerCredentials",{enumerable:!0,get:function(){return f.ServerCredentials}});const m=i(2284);Object.defineProperty(t,"StatusBuilder",{enumerable:!0,get:function(){return m.StatusBuilder}}),t.credentials={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:o.ChannelCredentials.createInsecure,createSsl:o.ChannelCredentials.createSsl,createFromSecureContext:o.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:r.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:r.CallCredentials.createFromGoogleCredential,createEmpty:r.CallCredentials.createEmpty},t.closeClient=e=>e.close(),t.waitForClientReady=(e,t,i)=>e.waitForReady(t,i),t.loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.load=(e,t,i)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.setLogger=e=>{d.setLogger(e)},t.setLogVerbosity=e=>{d.setLoggerVerbosity(e)},t.getClientChannel=e=>l.Client.prototype.getChannel.call(e);var g=i(3952);Object.defineProperty(t,"ListenerBuilder",{enumerable:!0,get:function(){return g.ListenerBuilder}}),Object.defineProperty(t,"RequesterBuilder",{enumerable:!0,get:function(){return g.RequesterBuilder}}),Object.defineProperty(t,"InterceptingCall",{enumerable:!0,get:function(){return g.InterceptingCall}}),Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:!0,get:function(){return g.InterceptorConfigurationError}});var v=i(9503);Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return v.getChannelzServiceDefinition}}),Object.defineProperty(t,"getChannelzHandlers",{enumerable:!0,get:function(){return v.getChannelzHandlers}});var y=i(2661);Object.defineProperty(t,"addAdminServicesToServer",{enumerable:!0,get:function(){return y.addAdminServicesToServer}});var b=i(4892);Object.defineProperty(t,"ServerListenerBuilder",{enumerable:!0,get:function(){return b.ServerListenerBuilder}}),Object.defineProperty(t,"ResponderBuilder",{enumerable:!0,get:function(){return b.ResponderBuilder}}),Object.defineProperty(t,"ServerInterceptingCall",{enumerable:!0,get:function(){return b.ServerInterceptingCall}});var S=i(2921);Object.defineProperty(t,"ServerMetricRecorder",{enumerable:!0,get:function(){return S.ServerMetricRecorder}});const C=i(342);t.experimental=C;const _=i(6700),T=i(305),E=i(82),w=i(6486),k=i(1563),O=i(9012),R=i(4117),P=i(9503);_.setup(),T.setup(),E.setup(),w.setup(),k.setup(),O.setup(),R.setup(),P.setup()},744:(e,t,i)=>{"use strict";var r=t,s=i(5643),n=i(3262);function a(e,t,i,r){var n=!1;if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",r);for(var a=t.resolvedType.values,o=Object.keys(a),l=0;l<o.length;++l)a[o[l]]!==t.typeDefault||n||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),t.repeated||e("break"),n=!0),e("case%j:",o[l])("case %i:",a[o[l]])("m%s=%j",r,a[o[l]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,i,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function o(e,t,i,r){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,i,r,r,i,r,r):e("d%s=types[%i].toObject(m%s,o)",r,i,r);else{var n=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":n=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,n?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,i=n.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return i("return new this.ctor");i("var m=new this.ctor");for(var r=0;r<t.length;++r){var o=t[r].resolve(),l=n.safeProp(o.name);o.map?(i("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(i,o,r,l+"[ks[i]]")("}")("}")):o.repeated?(i("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(i,o,r,l+"[i]")("}")("}")):(o.resolvedType instanceof s||i("if(d%s!=null){",l),a(i,o,r,l),o.resolvedType instanceof s||i("}"))}return i("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(n.compareFieldsById);if(!t.length)return n.codegen()("return {}");for(var i=n.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],a=[],l=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?r:t[c].map?a:l).push(t[c]);if(r.length){for(i("if(o.arrays||o.defaults){"),c=0;c<r.length;++c)i("d%s=[]",n.safeProp(r[c].name));i("}")}if(a.length){for(i("if(o.objects||o.defaults){"),c=0;c<a.length;++c)i("d%s={}",n.safeProp(a[c].name));i("}")}if(l.length){for(i("if(o.defaults){"),c=0;c<l.length;++c){var d=l[c],u=n.safeProp(d.name);if(d.resolvedType instanceof s)i("d%s=o.enums===String?%j:%j",u,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",u,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else i("d%s=%j",u,d.typeDefault)}i("}")}var p=!1;for(c=0;c<t.length;++c){d=t[c];var f=e._fieldsArray.indexOf(d);u=n.safeProp(d.name),d.map?(p||(p=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),o(i,d,f,u+"[ks2[j]]")("}")):d.repeated?(i("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),o(i,d,f,u+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",u,d.name),o(i,d,f,u),d.partOf&&i("if(o.oneofs)")("d%s=%j",n.safeProp(d.partOf.name),d.name)),i("}")}return i("return d")}},818:(e,t,i)=>{"use strict";e.exports=n;var r=i(3449);(n.prototype=Object.create(r.prototype)).constructor=n;var s=i(3610);function n(){r.call(this)}function a(e,t,i){e.length<40?s.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}n._configure=function(){n.alloc=s._Buffer_allocUnsafe,n.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]}},n.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},n._configure()},857:e=>{"use strict";e.exports=require("os")},883:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=void 0,t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER="true"===(null!==(i=process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER)&&void 0!==i?i:"false")},932:e=>{"use strict";e.exports=require("process")},1080:(e,t,i)=>{"use strict";e.exports=function(e){for(var t,i=n.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),o=e.fieldsArray.slice().sort(n.compareFieldsById),l=0;l<o.length;++l){var c=o[l].resolve(),d=e._fieldsArray.indexOf(c),u=c.resolvedType instanceof r?"int32":c.type,h=s.basic[u];t="m"+n.safeProp(c.name),c.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|s.mapKey[c.keyType],c.keyType),void 0===h?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,t):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,u,t),i("}")("}")):c.repeated?(i("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==s.packed[u]?i("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",u,t)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",t),void 0===h?a(i,c,d,t+"[i]"):i("w.uint32(%i).%s(%s[i])",(c.id<<3|h)>>>0,u,t)),i("}")):(c.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),void 0===h?a(i,c,d,t):i("w.uint32(%i).%s(%s)",(c.id<<3|h)>>>0,u,t))}return i("return w")};var r=i(5643),s=i(361),n=i(3262);function a(e,t,i,r){return t.delimited?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,r,(t.id<<3|2)>>>0)}},1184:function(e,t,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=r(e),a=0;a<i.length;a++)"default"!==i[a]&&s(t,e,i[a]);return n(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){if("darwin"!==process.platform)return void console.log("iOS Simulator MCP provider is only available on macOS");const t=o.window.createOutputChannel("Cursor iOS Simulator Connect");T=new d.ExtensionLogger(t);const i=o.window.registerWebviewPanelSerializer(h.SimulatorWebviewPanel.viewType,{async deserializeWebviewPanel(t,i){if(!w){w=new c.IosSimulatorController(T,e);try{await w.initialize()}catch(e){T?.warn("idb_companion initialization failed during restore",e)}}O=h.SimulatorWebviewPanel.restore(t,e.extensionUri,w,T),O.onDispose?.(()=>{O=null})}});e.subscriptions.push(i);const r=o.commands.registerCommand("cursor-ios-simulator-connect.showLog",()=>{T?.show()}),s=o.commands.registerCommand("cursor-ios-simulator-connect.openDockedView",async()=>{if(!T)return;if(O)return void O.reveal();if(!w){w=new c.IosSimulatorController(T,e);try{await w.initialize()}catch(e){T.warn("idb_companion initialization failed, some features may be limited",e)}}let t=await w.getBootedDevices();if(0===t.length){const e=await o.window.withProgress({location:o.ProgressLocation.Notification,title:"iOS Simulator: Starting simulator...",cancellable:!1},async()=>w.bootFirstAvailableSimulator());if(!e.success)return void o.window.showWarningMessage(e.error||"Failed to start iOS Simulator. Please launch one from Xcode.");if(await new Promise(e=>setTimeout(e,3e3)),t=await w.getBootedDevices(),0===t.length)return void o.window.showWarningMessage("Simulator is starting. Please try again in a few seconds.");o.window.showInformationMessage(`Started iOS Simulator: ${e.name}`)}O=h.SimulatorWebviewPanel.create(e.extensionUri,w,T),O.onDispose?.(()=>{O=null})});e.subscriptions.push(t,r,s);const n=async()=>{k&&await k,k=(async()=>{const t=S();if(t&&!_){w=new c.IosSimulatorController(T,e);try{await w.initialize()}catch(e){T?.warn("idb_companion initialization failed, some features may be limited",e)}if(!S())return await w.dispose(),void(w=null);_=new C(w,T),E=o.cursor.registerMcpProvider(_)}else!t&&_&&(E&&(E.dispose(),E=null),w&&(await w.dispose(),w=null),_=null)})();try{await k}finally{k=null}};n();const a=o.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration(p)&&n()});e.subscriptions.push(a)},t.deactivate=async function(){k&&await k,E&&(E.dispose(),E=null),w&&(await w.dispose(),w=null),_&&(await _.dispose(),_=null),T=null};const o=a(i(1398)),l=i(1614),c=i(9004),d=i(8377),u=i(9970),h=i(8392),p="cursor.iosSimulator.enabled",f=l.z.object({format:l.z.enum(["png","jpeg"]).optional().describe("Image format for the screenshot. Default is png.")}).default({}),m=l.z.object({x:l.z.number().describe("X coordinate in simulator screen points (NOT window pixels). Use accessibility snapshot to get element bounds."),y:l.z.number().describe("Y coordinate in simulator screen points (NOT window pixels). Use accessibility snapshot to get element bounds."),holdMs:l.z.number().min(0).max(5e3).optional().describe("Duration to hold the tap in milliseconds (0-5000). Default is 0 (instant tap).")}),g=l.z.object({startX:l.z.number().describe("Starting X coordinate in simulator screen points"),startY:l.z.number().describe("Starting Y coordinate in simulator screen points"),endX:l.z.number().describe("Ending X coordinate in simulator screen points"),endY:l.z.number().describe("Ending Y coordinate in simulator screen points"),durationMs:l.z.number().min(50).max(2e3).optional().describe("Duration of the swipe in milliseconds (50-2000). Default is 300.")}),v=l.z.object({text:l.z.string().describe("Text to type into the simulator. The simulator must have a text field focused.")}),y=l.z.object({key:l.z.string().describe("Key to press. Supported: return, enter, tab, space, delete, backspace, escape, left, right, up, down, home, end, pageup, pagedown, or any single character")}),b=l.z.object({maxDepth:l.z.number().min(1).max(10).optional().describe("Maximum depth to traverse the accessibility tree (1-10). Default is 4."),maxChildrenPerNode:l.z.number().min(1).max(50).optional().describe("Maximum number of children to include per node (1-50). Default is 24.")}).default({});function S(){return o.workspace.getConfiguration().get(p,!1)}class C{constructor(e,t){this.controller=e,this.logger=t,this.id="cursor-ios-simulator-connect",this.featureGateName="ios_simulator_mcp_provider",this.tools=(0,u.createMcpTools)({ios_simulator_screenshot:{description:"Capture a visual screenshot from the iOS Simulator.\n\nIMPORTANT: In most cases, prefer using ios_simulator_snapshot instead of this tool. The accessibility snapshot provides structured data about UI elements (labels, roles, bounds) which is more useful for understanding the UI and determining tap coordinates. Only use screenshots when you need to see visual details like colors, images, or layout that aren't captured in the accessibility tree.\n\nReturns the image as base64-encoded data.",params:f,impl:async e=>{const t=e.format??"png",i=await this.controller.captureScreenshot(t);return{content:[{type:"image",data:i.base64Data,mimeType:i.mimeType}]}}},ios_simulator_tap:{description:"Perform a tap at the specified coordinates in the iOS Simulator.\n\nIMPORTANT:\n- Coordinates are in SIMULATOR SCREEN POINTS, not window pixels. Use ios_simulator_snapshot to get element bounds.\n- NEVER run tap/swipe/type/key actions in parallel. Always wait for one action to complete before starting the next.\n- Does NOT move the user's mouse cursor.\n\nTypical screen sizes: iPhone 16 Plus is 430x932 points. Use the accessibility snapshot's \"frame\" data to find exact element positions.",params:m,impl:async e=>{const t=e,i=await this.controller.tap(t);return i.success?{content:[{type:"text",text:`Tapped at (${i.x}, ${i.y}) using ${i.method??"unknown"} method.`}]}:{content:[{type:"text",text:`Tap failed: ${i.error}`}],isError:!0}}},ios_simulator_swipe:{description:"Perform a swipe gesture from start to end coordinates on the iOS Simulator.\n\nIMPORTANT:\n- Coordinates are in SIMULATOR SCREEN POINTS, not window pixels.\n- NEVER run tap/swipe/type/key actions in parallel. Always wait for one action to complete before starting the next.\n- Does NOT move the user's mouse cursor.\n\nUseful for scrolling (swipe up/down) or navigating (swipe left/right).",params:g,impl:async e=>{const t=e,i=await this.controller.swipe(t);return i.success?{content:[{type:"text",text:`Swiped from (${i.startX}, ${i.startY}) to (${i.endX}, ${i.endY}) using ${i.method??"unknown"} method.`}]}:{content:[{type:"text",text:`Swipe failed: ${i.error}`}],isError:!0}}},ios_simulator_type:{description:"Type text into the iOS Simulator.\n\nIMPORTANT:\n- A text field must be focused before typing. Use tap to focus a text field first.\n- NEVER run tap/swipe/type/key actions in parallel. Always wait for one action to complete before starting the next.",params:v,impl:async e=>{const t=e,i=await this.controller.typeText(t);return i.success?{content:[{type:"text",text:`Typed "${i.text}" into simulator`}]}:{content:[{type:"text",text:`Type failed: ${i.error}`}],isError:!0}}},ios_simulator_press_key:{description:"Press a specific key in the iOS Simulator.\n\nIMPORTANT:\n- NEVER run tap/swipe/type/key actions in parallel. Always wait for one action to complete before starting the next.\n\nSupported keys: return, enter, tab, space, delete, backspace, escape, left, right, up, down, home, end, pageup, pagedown, or any single character.",params:y,impl:async e=>{const t=e,i=await this.controller.pressKey(t.key);return i.success?{content:[{type:"text",text:`Pressed key: ${i.key}`}]}:{content:[{type:"text",text:`Key press failed: ${i.error}`}],isError:!0}}},ios_simulator_snapshot:{description:"Capture an accessibility tree snapshot of the iOS Simulator. THIS IS THE PREFERRED WAY to understand the simulator's current UI state.\n\nReturns structured JSON data about all UI elements including:\n- role: The element type (button, text field, static text, etc.)\n- AXLabel: The accessibility label (what the element represents)\n- AXValue: Current value (for text fields, switches, etc.)\n- frame: The element's position and size in screen points {x, y, width, height}\n\nUse the frame data to determine coordinates for tap/swipe actions. The frame coordinates are in simulator screen points.\n\nPrefer this over screenshots for most use cases - it's faster, provides actionable coordinate data, and gives semantic information about UI elements.",params:b,impl:async e=>{const t=e,i={maxDepth:t.maxDepth,maxChildrenPerNode:t.maxChildrenPerNode},r=await this.controller.accessibilitySnapshot(i);return r.error?{content:[{type:"text",text:`Accessibility snapshot failed: ${r.error}`}],isError:!0}:{content:[{type:"text",text:JSON.stringify(r,null,2)}]}}},ios_simulator_list_devices:{description:"List all currently booted iOS Simulator devices. Use this to verify a simulator is running before attempting other actions.",params:l.z.object({}).default({}),impl:async()=>{const e=await this.controller.getBootedDevices();return 0===e.length?{content:[{type:"text",text:"No booted iOS Simulator devices found. Launch a simulator from Xcode first."}]}:{content:[{type:"text",text:`Booted devices:\n${e.map(e=>`- ${e.name} (${e.udid})`).join("\n")}`}]}}}})}async listOfferings(){return{tools:this.tools.offerings().map(e=>({name:e.name,description:e.description,parameters:e.parameters})),prompts:[],resources:[]}}async callTool(e,t){return this.tools.call(e,t)}async dispose(){}}let _=null,T=null,E=null,w=null,k=null,O=null},1238:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const r=i(9896),s=i(6928),n=i(2549);function a(e,t){const i=e.resolvePath;e.resolvePath=(e,n)=>{if(s.isAbsolute(n))return n;for(const e of t){const t=s.join(e,n);try{return r.accessSync(t,r.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${n} not found in any of the include paths ${t}`),i(e,n)}}t.loadProtosWithOptions=async function(e,t){const i=new n.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));a(i,t.includeDirs)}const r=await i.load(e,t);return r.resolveAll(),r},t.loadProtosWithOptionsSync=function(e,t){const i=new n.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");a(i,t.includeDirs)}const r=i.loadSync(e,t);return r.resolveAll(),r},t.addCommonProtos=function(){const e=i(5434),t=i(3951),r=i(2939),s=i(6710);n.common("api",e.nested.google.nested.protobuf.nested),n.common("descriptor",t.nested.google.nested.protobuf.nested),n.common("source_context",r.nested.google.nested.protobuf.nested),n.common("type",s.nested.google.nested.protobuf.nested)}},1304:(e,t,i)=>{"use strict";e.exports=u;var r=i(7209);((u.prototype=Object.create(r.prototype)).constructor=u).className="Namespace";var s,n,a,o=i(1344),l=i(3262),c=i(1457);function d(e,t){if(e&&e.length){for(var i={},r=0;r<e.length;++r)i[e[r].name]=e[r].toJSON(t);return i}}function u(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function h(e){e._nestedArray=null,e._lookupCache={};for(var t=e;t=t.parent;)t._lookupCache={};return e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=d,u.isReservedId=function(e,t){if(e)for(var i=0;i<e.length;++i)if("string"!=typeof e[i]&&e[i][0]<=t&&e[i][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),u.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",d(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,i=Object.keys(e),r=0;r<i.length;++r)t=e[i[r]],this.add((void 0!==t.fields?s.fromJSON:void 0!==t.values?a.fromJSON:void 0!==t.methods?n.fromJSON:void 0!==t.id?o.fromJSON:u.fromJSON)(i[r],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof a)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof s||e instanceof c||e instanceof a||e instanceof n||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof s||t instanceof n)throw Error("duplicate name '"+e.name+"' in "+this);for(var i=t.nestedArray,r=0;r<i.length;++r)e.add(i[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};this.nested[e.name]=e,this instanceof s||this instanceof n||this instanceof a||this instanceof o||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var l=this;l=l.parent;)l._needsRecursiveFeatureResolution=!0,l._needsRecursiveResolve=!0;return e.onAdd(this),h(this)},u.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},u.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var i=this;e.length>0;){var r=e.shift();if(i.nested&&i.nested[r]){if(!((i=i.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else i.add(i=new u(r))}return t&&i.addJSON(t),i},u.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,t=0;for(this.resolve();t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this._needsRecursiveResolve=!1,this},u.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,r.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this},u.prototype.lookup=function(e,t,i){if("boolean"==typeof t?(i=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;var r=e.join(".");if(""===e[0])return this.root.lookup(e.slice(1),t);var s=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+r];if(s&&(!t||t.indexOf(s.constructor)>-1))return s;if((s=this._lookupImpl(e,r))&&(!t||t.indexOf(s.constructor)>-1))return s;if(i)return null;for(var n=this;n.parent;){if((s=n.parent._lookupImpl(e,r))&&(!t||t.indexOf(s.constructor)>-1))return s;n=n.parent}return null},u.prototype._lookupImpl=function(e,t){if(Object.prototype.hasOwnProperty.call(this._lookupCache,t))return this._lookupCache[t];var i=this.get(e[0]),r=null;if(i)1===e.length?r=i:i instanceof u&&(e=e.slice(1),r=i._lookupImpl(e,e.join(".")));else for(var s=0;s<this.nestedArray.length;++s)this._nestedArray[s]instanceof u&&(i=this._nestedArray[s]._lookupImpl(e,t))&&(r=i);return this._lookupCache[t]=r,r},u.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,a]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,i){s=e,n=t,a=i}},1344:(e,t,i)=>{"use strict";e.exports=c;var r=i(7209);((c.prototype=Object.create(r.prototype)).constructor=c).className="Field";var s,n=i(5643),a=i(361),o=i(3262),l=/^required|optional|repeated$/;function c(e,t,i,s,n,c,d){if(o.isObject(s)?(d=n,c=s,s=n=void 0):o.isObject(n)&&(d=c,c=n,n=void 0),r.call(this,e,c),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(i))throw TypeError("type must be a string");if(void 0!==s&&!l.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==n&&!o.isString(n))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:void 0,this.type=i,this.id=t,this.extend=n||void 0,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=d}c.fromJSON=function(e,t){var i=new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment);return t.edition&&(i._edition=t.edition),i._defaultEdition="proto3",i},Object.defineProperty(c.prototype,"required",{get:function(){return"LEGACY_REQUIRED"===this._features.field_presence}}),Object.defineProperty(c.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(c.prototype,"delimited",{get:function(){return this.resolvedType instanceof s&&"DELIMITED"===this._features.message_encoding}}),Object.defineProperty(c.prototype,"packed",{get:function(){return"PACKED"===this._features.repeated_field_encoding}}),Object.defineProperty(c.prototype,"hasPresence",{get:function(){return!this.repeated&&!this.map&&(this.partOf||this.declaringField||this.extensionField||"IMPLICIT"!==this._features.field_presence)}}),c.prototype.setOption=function(e,t,i){return r.prototype.setOption.call(this,e,t,i)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["edition",this._editionToJSON(),"rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof n||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},c.prototype._inferLegacyProtoFeatures=function(e){if("proto2"!==e&&"proto3"!==e)return{};var t={};if("required"===this.rule&&(t.field_presence="LEGACY_REQUIRED"),this.parent&&void 0===a.defaults[this.type]){var i=this.parent.get(this.type.split(".").pop());i&&i instanceof s&&i.group&&(t.message_encoding="DELIMITED")}return!0===this.getOption("packed")?t.repeated_field_encoding="PACKED":!1===this.getOption("packed")&&(t.repeated_field_encoding="EXPANDED"),t},c.prototype._resolveFeatures=function(e){return r.prototype._resolveFeatures.call(this,this._edition||e)},c.d=function(e,t,i,r){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(s,n){o.decorateType(s.constructor).add(new c(n,e,t,i,{default:r}))}},c._configure=function(e){s=e}},1385:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;const r=i(463),s=i(3956),n=i(267),a=i(131),o=i(3822),l=i(8996),c=i(9503),d=i(246);t.Subchannel=class{constructor(e,t,i,n,a){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=i,this.connector=a,this.connectivityState=r.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.dataProducers=new Map,this.subchannelChannel=null;const d={initialDelay:i["grpc.initial_reconnect_backoff_ms"],maxDelay:i["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new s.BackoffTimeout(()=>{this.handleBackoffTimer()},d),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!==(o=i["grpc.keepalive_time_ms"])&&void 0!==o?o:-1,0===i["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.channelzTrace=new c.ChannelzTraceStub,this.callTracker=new c.ChannelzCallTrackerStub,this.childrenTracker=new c.ChannelzChildrenTrackerStub,this.streamTracker=new c.ChannelzCallTrackerStub):(this.channelzTrace=new c.ChannelzTrace,this.callTracker=new c.ChannelzCallTracker,this.childrenTracker=new c.ChannelzChildrenTracker,this.streamTracker=new c.ChannelzCallTracker),this.channelzRef=(0,c.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(i,void 0,2)),this.secureConnector=n._createSecureConnector(e,i)}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){n.trace(a.LogVerbosity.DEBUG,"subchannel","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){n.trace(a.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([r.ConnectivityState.TRANSIENT_FAILURE],r.ConnectivityState.CONNECTING):this.transitionToState([r.ConnectivityState.TRANSIENT_FAILURE],r.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){const t=Math.min(this.keepaliveTime,2147483647);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.secureConnector,e).then(e=>{this.transitionToState([r.ConnectivityState.CONNECTING],r.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([r.ConnectivityState.READY],r.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,n.log(a.LogVerbosity.ERROR,`Connection to ${(0,o.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([r.ConnectivityState.CONNECTING],r.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,i){var s,n;if(-1===e.indexOf(this.connectivityState))return!1;i?this.trace(r.ConnectivityState[this.connectivityState]+" -> "+r.ConnectivityState[t]+' with error "'+i+'"'):this.trace(r.ConnectivityState[this.connectivityState]+" -> "+r.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+r.ConnectivityState[t]);const a=this.connectivityState;switch(this.connectivityState=t,t){case r.ConnectivityState.READY:this.stopBackoff();break;case r.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case r.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(s=this.transport)||void 0===s||s.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case r.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(n=this.transport)||void 0===n||n.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of this.stateListeners)e(this,a,t,this.keepaliveTime,i);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzTrace.addTrace("CT_INFO","Shutting down"),(0,c.unregisterChannelzRef)(this.channelzRef),this.secureConnector.destroy(),process.nextTick(()=>{this.transitionToState([r.ConnectivityState.CONNECTING,r.ConnectivityState.READY],r.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,i,r){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,t,i,r,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([r.ConnectivityState.IDLE],r.ConnectivityState.CONNECTING)||this.connectivityState===r.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([r.ConnectivityState.TRANSIENT_FAILURE],r.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}isHealthy(){return!0}addHealthStateWatcher(e){}removeHealthStateWatcher(e){}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}getCallCredentials(){return this.secureConnector.getCallCredentials()}getChannel(){return this.subchannelChannel||(this.subchannelChannel=new d.SingleSubchannelChannel(this,this.channelTarget,this.options)),this.subchannelChannel}addDataWatcher(e){throw new Error("Not implemented")}getOrCreateDataProducer(e,t){const i=this.dataProducers.get(e);if(i)return i;const r=t(this);return this.dataProducers.set(e,r),r}removeDataProducer(e){this.dataProducers.delete(e)}}},1398:e=>{"use strict";e.exports=require("vscode")},1447:(e,t)=>{"use strict";var i=t;i.length=function(e){for(var t=0,i=0,r=0;r<e.length;++r)(i=e.charCodeAt(r))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},i.read=function(e,t,i){if(i-t<1)return"";for(var r,s=null,n=[],a=0;t<i;)(r=e[t++])<128?n[a++]=r:r>191&&r<224?n[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,n[a++]=55296+(r>>10),n[a++]=56320+(1023&r)):n[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,n)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,n.slice(0,a))),s.join("")):String.fromCharCode.apply(String,n.slice(0,a))},i.write=function(e,t,i){for(var r,s,n=i,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=63&r|128):55296==(64512&r)&&56320==(64512&(s=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&s),++a,t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=63&r|128);return i-n}},1457:(e,t,i)=>{"use strict";e.exports=a;var r=i(7209);((a.prototype=Object.create(r.prototype)).constructor=a).className="OneOf";var s=i(1344),n=i(3262);function a(e,t,i,s){if(Array.isArray(t)||(i=t,t=void 0),r.call(this,e,i),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var i=e.get(this.oneof[t]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}o(this)},a.prototype.onRemove=function(e){for(var t,i=0;i<this.fieldsArray.length;++i)(t=this.fieldsArray[i]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},Object.defineProperty(a.prototype,"isProto3Optional",{get:function(){if(null==this.fieldsArray||1!==this.fieldsArray.length)return!1;var e=this.fieldsArray[0];return null!=e.options&&!0===e.options.proto3_optional}}),a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,i){n.decorateType(t.constructor).add(new a(i,e)),Object.defineProperty(t,i,{get:n.oneOfGetter(e),set:n.oneOfSetter(e)})}}},1544:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=void 0,t.callErrorFromStatus=function(e,t){const i=`${e.code} ${n.Status[e.code]}: ${e.details}`,r=`${new Error(i).stack}\nfor call at\n${t}`;return Object.assign(new Error(i),e,{stack:r})};const r=i(4434),s=i(2203),n=i(131);class a extends r.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(n.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}}t.ClientUnaryCallImpl=a;class o extends s.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(n.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=o;class l extends s.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(n.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}_write(e,t,i){var r;const s={callback:i},n=Number(t);Number.isNaN(n)||(s.flags=n),null===(r=this.call)||void 0===r||r.sendMessageWithContext(s,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=l;class c extends s.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(n.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}getAuthContext(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getAuthContext())&&void 0!==t?t:null}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,i){var r;const s={callback:i},n=Number(t);Number.isNaN(n)||(s.flags=n),null===(r=this.call)||void 0===r||r.sendMessageWithContext(s,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=c},1563:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoundRobinLoadBalancer=void 0,t.setup=function(){(0,r.registerLoadBalancerType)(u,f,h)};const r=i(8923),s=i(463),n=i(178),a=i(267),o=i(131),l=i(8996),c=i(6486);function d(e){a.trace(o.LogVerbosity.DEBUG,"round_robin",e)}const u="round_robin";class h{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new h}}class p{constructor(e,t=0){this.children=e,this.nextIndex=t}pick(e){const t=this.children[this.nextIndex].picker;return this.nextIndex=(this.nextIndex+1)%this.children.length,t.pick(e)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}}class f{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=s.ConnectivityState.IDLE,this.currentReadyPicker=null,this.updatesPaused=!1,this.lastError=null,this.childChannelControlHelper=(0,r.createChildChannelControlHelper)(e,{updateState:(e,t,i)=>{this.currentState===s.ConnectivityState.READY&&e!==s.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),i&&(this.lastError=i),this.calculateAndUpdateState()}})}countChildrenWithState(e){return this.children.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(!this.updatesPaused){if(this.countChildrenWithState(s.ConnectivityState.READY)>0){const e=this.children.filter(e=>e.getConnectivityState()===s.ConnectivityState.READY);let t=0;if(null!==this.currentReadyPicker){const i=this.currentReadyPicker.peekNextEndpoint();t=e.findIndex(e=>(0,l.endpointEqual)(e.getEndpoint(),i)),t<0&&(t=0)}this.updateState(s.ConnectivityState.READY,new p(e.map(e=>({endpoint:e.getEndpoint(),picker:e.getPicker()})),t),null)}else if(this.countChildrenWithState(s.ConnectivityState.CONNECTING)>0)this.updateState(s.ConnectivityState.CONNECTING,new n.QueuePicker(this),null);else if(this.countChildrenWithState(s.ConnectivityState.TRANSIENT_FAILURE)>0){const e=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker({details:e}),e)}else this.updateState(s.ConnectivityState.IDLE,new n.QueuePicker(this),null);for(const e of this.children)e.getConnectivityState()===s.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,t,i){d(s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t,i)}resetSubchannelList(){for(const e of this.children)e.destroy();this.children=[]}updateAddressList(e,t,i,r){if(!(t instanceof h))return!1;if(!e.ok)return 0===this.children.length&&this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker(e.error),e.error.details),!0;const a=Math.random()*e.value.length|0,o=function(e,t){return[...e.slice(t),...e.slice(0,t)]}(e.value,a);if(this.resetSubchannelList(),0===o.length){const e=`No addresses resolved. Resolution note: ${r}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker({details:e}),e)}d("Connect to endpoint list "+o.map(l.endpointToString)),this.updatesPaused=!0,this.children=o.map(e=>new c.LeafLoadBalancer(e,this.childChannelControlHelper,i,r));for(const e of this.children)e.startConnecting();return this.updatesPaused=!1,this.calculateAndUpdateState(),!0}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return u}}t.RoundRobinLoadBalancer=f},1614:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t},a=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const o=n(i(6555));t.z=o,a(i(6555),t),t.default=o},1703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class i{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=i;class r{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new r([...this.factories])}createFilter(){return new i(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=r},1892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1943:e=>{"use strict";e.exports=require("fs/promises")},2028:e=>{var t,i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,r=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\ud800-\\udfff",n="\\u0300-\\u036f\\ufe20-\\ufe23",a="\\u20d0-\\u20f0",o="\\u2700-\\u27bf",l="a-z\\xdf-\\xf6\\xf8-\\xff",c="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h="["+s+"]",p="["+u+"]",f="["+n+a+"]",m="\\d+",g="["+o+"]",v="["+l+"]",y="[^"+s+u+m+o+l+c+"]",b="\\ud83c[\\udffb-\\udfff]",S="[^"+s+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",T="["+c+"]",E="\\u200d",w="(?:"+v+"|"+y+")",k="(?:"+T+"|"+y+")",O="(?:['](?:d|ll|m|re|s|t|ve))?",R="(?:['](?:D|LL|M|RE|S|T|VE))?",P="(?:"+f+"|"+b+")?",I="["+d+"]?",N=I+P+"(?:"+E+"(?:"+[S,C,_].join("|")+")"+I+P+")*",x="(?:"+[g,C,_].join("|")+")"+N,A="(?:"+[S+f+"?",f,C,_,h].join("|")+")",M=RegExp("[']","g"),D=RegExp(f,"g"),L=RegExp(b+"(?="+b+")|"+A+N,"g"),j=RegExp([T+"?"+v+"+"+O+"(?="+[p,T,"$"].join("|")+")",k+"+"+R+"(?="+[p,T+w,"$"].join("|")+")",T+"?"+w+"+"+O,T+"+"+R,m,x].join("|"),"g"),F=RegExp("["+E+s+n+a+d+"]"),U=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,B="object"==typeof global&&global&&global.Object===Object&&global,z="object"==typeof self&&self&&self.Object===Object&&self,Z=B||z||Function("return this")(),$=(t={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},function(e){return null==t?void 0:t[e]});function H(e){return F.test(e)}var W=Object.prototype.toString,V=Z.Symbol,q=V?V.prototype:void 0,G=q?q.toString:void 0;function K(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==W.call(e)}(e))return G?G.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}var Y,J=(Y=function(e,t,i){return t=t.toLowerCase(),e+(i?X(K(t).toLowerCase()):t)},function(e){return function(e,t,i){for(var r=-1,s=e?e.length:0;++r<s;)i=t(i,e[r],r,e);return i}(function(e,t){return e=K(e),void 0===t?function(e){return U.test(e)}(e)?function(e){return e.match(j)||[]}(e):function(e){return e.match(i)||[]}(e):e.match(t)||[]}(function(e){return(e=K(e))&&e.replace(r,$).replace(D,"")}(e).replace(M,"")),Y,"")}),X=function(e){var t,i,r,s,n=H(e=K(e))?function(e){return H(e)?function(e){return e.match(L)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,a=n?n[0]:e.charAt(0),o=n?(t=n,i=1,s=t.length,r=void 0===r?s:r,!i&&r>=s?t:function(e,t,i){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(i=i>s?s:i)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var n=Array(s);++r<s;)n[r]=e[r+t];return n}(t,i,r)).join(""):e.slice(1);return a.toUpperCase()+o};e.exports=J},2095:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;const r=i(5675),s=i(4756),n=i(9503),a=i(131),o=i(7803),l=i(267),c=i(9302),d=i(8996),u=i(3822),h=i(9278),p=i(5486),f=i(5572),m="transport",g=i(9943).rE,{HTTP2_HEADER_AUTHORITY:v,HTTP2_HEADER_CONTENT_TYPE:y,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:S,HTTP2_HEADER_TE:C,HTTP2_HEADER_USER_AGENT:_}=r.constants,T=Buffer.from("too_many_pings","ascii");class E{constructor(e,t,i,a){this.session=e,this.options=i,this.remoteName=a,this.keepaliveTimer=null,this.pendingSendKeepalivePing=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,d.subchannelAddressToString)(t),0===i["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.streamTracker=new n.ChannelzCallTrackerStub):this.streamTracker=new n.ChannelzCallTracker,this.channelzRef=(0,n.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[i["grpc.primary_user_agent"],`grpc-node-js/${g}`,i["grpc.secondary_user_agent"]].filter(e=>e).join(" "),this.keepaliveTimeMs="grpc.keepalive_time_ms"in i?i["grpc.keepalive_time_ms"]:-1,this.keepaliveTimeoutMs="grpc.keepalive_timeout_ms"in i?i["grpc.keepalive_timeout_ms"]:2e4,this.keepaliveWithoutCalls="grpc.keepalive_permit_without_calls"in i&&1===i["grpc.keepalive_permit_without_calls"],e.once("close",()=>{this.trace("session closed"),this.handleDisconnect()}),e.once("goaway",(e,t,i)=>{let s=!1;e===r.constants.NGHTTP2_ENHANCE_YOUR_CALM&&i&&i.equals(T)&&(s=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==i?void 0:i.toString())),this.reportDisconnectToOwner(s)}),e.once("error",e=>{this.trace("connection closed with error "+e.message),this.handleDisconnect()}),e.socket.once("close",e=>{this.trace("connection closed. hadError="+e),this.handleDisconnect()}),l.isTracerEnabled(m)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer(),e.socket instanceof s.TLSSocket?this.authContext={transportSecurityType:"ssl",sslPeerCertificate:e.socket.getPeerCertificate()}:this.authContext={}}getChannelzInfo(){var e,t,i;const r=this.session.socket,s=r.remoteAddress?(0,d.stringToSubchannelAddress)(r.remoteAddress,r.remotePort):null,n=r.localAddress?(0,d.stringToSubchannelAddress)(r.localAddress,r.localPort):null;let a;if(this.session.encrypted){const t=r,i=t.getCipher(),s=t.getCertificate(),n=t.getPeerCertificate();a={cipherSuiteStandardName:null!==(e=i.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:i.standardName?null:i.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:n&&"raw"in n?n.raw:null}}else a=null;return{remoteAddress:s,localAddress:n,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(i=this.session.state.remoteWindowSize)&&void 0!==i?i:null}}trace(e){l.trace(a.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_flowctrl","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.clearKeepaliveTimeout(),this.reportDisconnectToOwner(!1);for(const e of this.activeCalls)e.onDisconnect();setImmediate(()=>{this.session.destroy()})}addDisconnectListener(e){this.disconnectListeners.push(e)}canSendPing(){return!this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(!this.canSendPing())return void(this.pendingSendKeepalivePing=!0);if(this.keepaliveTimer)return void console.error("keepaliveTimeout is not null");this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimer).unref)||void 0===t||t.call(e);let i="";try{this.session.ping((e,t,i)=>{this.clearKeepaliveTimeout(),e?(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()):(this.keepaliveTrace("Received ping response"),this.maybeStartKeepalivePingTimer())})||(i="Ping returned false")}catch(e){i=(e instanceof Error?e.message:"")||"Unknown error"}i&&(this.keepaliveTrace("Ping send failed: "+i),this.handleDisconnect())}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimer||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimer=setTimeout(()=>{this.keepaliveTimer=null,this.maybeSendPing()},this.keepaliveTimeMs),null===(t=(e=this.keepaliveTimer).unref)||void 0===t||t.call(e)))}clearKeepaliveTimeout(){this.keepaliveTimer&&(clearTimeout(this.keepaliveTimer),this.keepaliveTimer=null)}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,i,r,s){const n=e.toHttp2Headers();let a,o,l;n[v]=t,n[_]=this.userAgent,n[y]="application/grpc",n[b]="POST",n[S]=i,n[C]="trailers";try{a=this.session.request(n)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),o={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=s.addMessageSent)||void 0===e||e.call(s)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=s.addMessageReceived)||void 0===e||e.call(s)},onCallEnd:e=>{var t;null===(t=s.onCallEnd)||void 0===t||t.call(s,e),this.removeActiveCall(l)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=s.onStreamEnd)||void 0===t||t.call(s,e)}}):o={addMessageSent:()=>{var e;null===(e=s.addMessageSent)||void 0===e||e.call(s)},addMessageReceived:()=>{var e;null===(e=s.addMessageReceived)||void 0===e||e.call(s)},onCallEnd:e=>{var t;null===(t=s.onCallEnd)||void 0===t||t.call(s,e),this.removeActiveCall(l)},onStreamEnd:e=>{var t;null===(t=s.onStreamEnd)||void 0===t||t.call(s,e)}},l=new p.Http2SubchannelCall(a,o,r,this,(0,f.getNextCallNumber)()),this.addActiveCall(l),l}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}getAuthContext(){return this.authContext}shutdown(){this.session.close(),(0,n.unregisterChannelzRef)(this.channelzRef)}}t.Http2SubchannelConnector=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){l.trace(a.LogVerbosity.DEBUG,m,(0,u.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,i){return this.isShutdown?Promise.reject():e.socket.closed?Promise.reject("Connection closed before starting HTTP/2 handshake"):new Promise((s,n)=>{var a,o,l,d,h,p,f,m;let g=null,v=this.channelTarget;if("grpc.http_connect_target"in i){const e=(0,u.parseUri)(i["grpc.http_connect_target"]);e&&(v=e,g=(0,u.uriToString)(e))}const y=e.secure?"https":"http",b=(0,c.getDefaultAuthority)(v),S=()=>{var e;null===(e=this.session)||void 0===e||e.destroy(),this.session=null,setImmediate(()=>{R||(R=!0,n(`${O.trim()} (${(new Date).toISOString()})`))})},C=e=>{var t;null===(t=this.session)||void 0===t||t.destroy(),O=e.message,this.trace("connection failed with error "+O),R||(R=!0,n(`${O} (${(new Date).toISOString()})`))},_={createConnection:(t,i)=>e.socket,settings:{initialWindowSize:null!==(d=null!==(a=i["grpc-node.flow_control_window"])&&void 0!==a?a:null===(l=null===(o=r.getDefaultSettings)||void 0===o?void 0:o.call(r))||void 0===l?void 0:l.initialWindowSize)&&void 0!==d?d:65535},maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER,maxSessionMemory:null!==(h=i["grpc-node.max_session_memory"])&&void 0!==h?h:Number.MAX_SAFE_INTEGER},T=r.connect(`${y}://${b}`,_),w=null!==(m=null===(f=null===(p=r.getDefaultSettings)||void 0===p?void 0:p.call(r))||void 0===f?void 0:f.initialWindowSize)&&void 0!==m?m:65535,k=i["grpc-node.flow_control_window"];this.session=T;let O="Failed to connect",R=!1;T.unref(),T.once("remoteSettings",()=>{var r;if(k&&k>w)try{T.setLocalWindowSize(k)}catch(e){const t=k-(null!==(r=T.state.localWindowSize)&&void 0!==r?r:w);t>0&&T.incrementWindowSize(t)}T.removeAllListeners(),e.socket.removeListener("close",S),e.socket.removeListener("error",C),s(new E(T,t,i,g)),this.session=null}),T.once("close",S),T.once("error",C),e.socket.once("close",S),e.socket.once("error",C)})}tcpConnect(e,t){return(0,o.getProxiedConnection)(e,t).then(t=>t||new Promise((t,i)=>{const r=()=>{i(new Error("Socket closed"))},s=e=>{i(e)},n=h.connect(e,()=>{n.removeListener("close",r),n.removeListener("error",s),t(n)});n.once("close",r),n.once("error",s)}))}async connect(e,t,i){if(this.isShutdown)return Promise.reject();let r=null,s=null;const n=(0,d.subchannelAddressToString)(e);try{return this.trace(n+" Waiting for secureConnector to be ready"),await t.waitForReady(),this.trace(n+" secureConnector is ready"),r=await this.tcpConnect(e,i),r.setNoDelay(),this.trace(n+" Established TCP connection"),s=await t.connect(r),this.trace(n+" Established secure connection"),this.createSession(s,e,i)}catch(e){throw null==r||r.destroy(),null==s||s.socket.destroy(),e}}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}},2146:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const i of e)t[i]=i;return t},e.getValidEnumValues=t=>{const i=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(const e of i)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},e.find=(e,t)=>{for(const i of e)if(t(i))return i},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(i=t.util||(t.util={})),(t.objectUtil||(t.objectUtil={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(e)?t.ZodParsedType.array:null===e?t.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?t.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?t.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},2203:e=>{"use strict";e.exports=require("stream")},2239:(e,t,i)=>{"use strict";e.exports=s;var r=i(3610);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=s.zero=new s(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return n;var t=e<0;t&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return t&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new s(i,r)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(r.isString(e)){if(!r.Long)return s.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):n},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;s.fromHash=function(e){return e===a?n:new s((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},2250:e=>{"use strict";e.exports=require("dns")},2267:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;const r=i(4097);class s{static createFromMetadataGenerator(e){return new a(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,i)=>{let s;var n;s="getRequestHeaders"in(n=e)&&"function"==typeof n.getRequestHeaders?e.getRequestHeaders(t.service_url):new Promise((i,r)=>{e.getRequestMetadata(t.service_url,(e,t)=>{e?r(e):t?i(t):r(new Error("Headers not set by metadata plugin"))})}),s.then(e=>{const t=new r.Metadata;for(const i of Object.keys(e))t.add(i,e[i]);i(null,t)},e=>{i(e)})})}static createEmpty(){return new o}}t.CallCredentials=s;class n extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){const t=new r.Metadata,i=await Promise.all(this.creds.map(t=>t.generateMetadata(e)));for(const e of i)t.merge(e);return t}compose(e){return new n(this.creds.concat([e]))}_equals(e){return this===e||e instanceof n&&this.creds.every((t,i)=>t._equals(e.creds[i]))}}class a extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,i)=>{this.metadataGenerator(e,(e,r)=>{void 0!==r?t(r):i(e)})})}compose(e){return new n([this,e])}_equals(e){return this===e||e instanceof a&&this.metadataGenerator===e.metadataGenerator}}class o extends s{generateMetadata(e){return Promise.resolve(new r.Metadata)}compose(e){return e}_equals(e){return e instanceof o}}},2284:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0,t.StatusBuilder=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){const e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}},2379:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0,t.BaseSubchannelWrapper=class{constructor(e){this.child=e,this.healthy=!0,this.healthListeners=new Set,this.refcount=0,this.dataWatchers=new Set,e.addHealthStateWatcher(e=>{this.healthy&&this.updateHealthListeners()})}updateHealthListeners(){for(const e of this.healthListeners)e(this.isHealthy())}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref(),this.refcount+=1}unref(){this.child.unref(),this.refcount-=1,0===this.refcount&&this.destroy()}destroy(){for(const e of this.dataWatchers)e.destroy()}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(e){this.healthListeners.add(e)}removeHealthStateWatcher(e){this.healthListeners.delete(e)}addDataWatcher(e){e.setSubchannel(this.getRealSubchannel()),this.dataWatchers.add(e)}setHealthy(e){e!==this.healthy&&(this.healthy=e,this.child.isHealthy()&&this.updateHealthListeners())}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}getChannel(){return this.child.getChannel()}}},2522:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addErrorMessage:()=>o,default:()=>re,defaultOptions:()=>s,getDefaultOptions:()=>n,getRefs:()=>a,ignoreOverride:()=>r,parseAnyDef:()=>d,parseArrayDef:()=>u,parseBigintDef:()=>h,parseBooleanDef:()=>p,parseBrandedDef:()=>f,parseCatchDef:()=>m,parseDateDef:()=>g,parseDef:()=>J,parseDefaultDef:()=>y,parseEffectsDef:()=>b,parseEnumDef:()=>S,parseIntersectionDef:()=>_,parseLiteralDef:()=>T,parseMapDef:()=>x,parseNativeEnumDef:()=>A,parseNeverDef:()=>M,parseNullDef:()=>D,parseNullableDef:()=>U,parseNumberDef:()=>B,parseObjectDef:()=>Z,parseOptionalDef:()=>$,parsePipelineDef:()=>H,parsePromiseDef:()=>W,parseReadonlyDef:()=>Y,parseRecordDef:()=>N,parseSetDef:()=>V,parseStringDef:()=>k,parseTupleDef:()=>q,parseUndefinedDef:()=>G,parseUnionDef:()=>j,parseUnknownDef:()=>K,primitiveMappings:()=>L,setResponseValueAndErrors:()=>l,zodPatterns:()=>w,zodToJsonSchema:()=>ie});const r=Symbol("Let zodToJsonSchema decide on which parser to use"),s={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},n=e=>"string"==typeof e?{...s,name:e}:{...s,...e},a=e=>{const t=n(e),i=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:i,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,i])=>[i._def,{def:i._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function o(e,t,i,r){r?.errorMessages&&i&&(e.errorMessage={...e.errorMessage,[t]:i})}function l(e,t,i,r,s){e[t]=i,o(e,t,r,s)}var c=i(1614);function d(){return{}}function u(e,t){const i={type:"array"};return e.type?._def?.typeName!==c.ZodFirstPartyTypeKind.ZodAny&&(i.items=J(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&l(i,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&l(i,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(l(i,"minItems",e.exactLength.value,e.exactLength.message,t),l(i,"maxItems",e.exactLength.value,e.exactLength.message,t)),i}function h(e,t){const i={type:"integer",format:"int64"};if(!e.checks)return i;for(const r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?l(i,"minimum",r.value,r.message,t):l(i,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(i.exclusiveMinimum=!0),l(i,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?l(i,"maximum",r.value,r.message,t):l(i,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(i.exclusiveMaximum=!0),l(i,"maximum",r.value,r.message,t));break;case"multipleOf":l(i,"multipleOf",r.value,r.message,t)}return i}function p(){return{type:"boolean"}}function f(e,t){return J(e.type._def,t)}const m=(e,t)=>J(e.innerType._def,t);function g(e,t,i){const r=i??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,r)=>g(e,t,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return v(e,t)}}const v=(e,t)=>{const i={type:"integer",format:"unix-time"};if("openApi3"===t.target)return i;for(const r of e.checks)switch(r.kind){case"min":l(i,"minimum",r.value,r.message,t);break;case"max":l(i,"maximum",r.value,r.message,t)}return i};function y(e,t){return{...J(e.innerType._def,t),default:e.defaultValue()}}function b(e,t){return"input"===t.effectStrategy?J(e.schema._def,t):{}}function S(e){return{type:"string",enum:e.values}}const C=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function _(e,t){const i=[J(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),J(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const s=[];return i.forEach(e=>{if(C(e))s.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:i,...r}=e;t=r}else r=void 0;s.push(t)}}),s.length?{allOf:s,...r}:void 0}function T(e,t){const i=typeof e.value;return"bigint"!==i&&"number"!==i&&"boolean"!==i&&"string"!==i?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===i?"integer":i,enum:[e.value]}:{type:"bigint"===i?"integer":i,const:e.value}}let E;const w={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===E&&(E=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),E),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function k(e,t){const i={type:"string"};function r(e){return"escape"===t.patternStrategy?O(e):e}if(e.checks)for(const s of e.checks)switch(s.kind){case"min":l(i,"minLength","number"==typeof i.minLength?Math.max(i.minLength,s.value):s.value,s.message,t);break;case"max":l(i,"maxLength","number"==typeof i.maxLength?Math.min(i.maxLength,s.value):s.value,s.message,t);break;case"email":switch(t.emailStrategy){case"format:email":R(i,"email",s.message,t);break;case"format:idn-email":R(i,"idn-email",s.message,t);break;case"pattern:zod":P(i,w.email,s.message,t)}break;case"url":R(i,"uri",s.message,t);break;case"uuid":R(i,"uuid",s.message,t);break;case"regex":P(i,s.regex,s.message,t);break;case"cuid":P(i,w.cuid,s.message,t);break;case"cuid2":P(i,w.cuid2,s.message,t);break;case"startsWith":P(i,RegExp(`^${r(s.value)}`),s.message,t);break;case"endsWith":P(i,RegExp(`${r(s.value)}$`),s.message,t);break;case"datetime":R(i,"date-time",s.message,t);break;case"date":R(i,"date",s.message,t);break;case"time":R(i,"time",s.message,t);break;case"duration":R(i,"duration",s.message,t);break;case"length":l(i,"minLength","number"==typeof i.minLength?Math.max(i.minLength,s.value):s.value,s.message,t),l(i,"maxLength","number"==typeof i.maxLength?Math.min(i.maxLength,s.value):s.value,s.message,t);break;case"includes":P(i,RegExp(r(s.value)),s.message,t);break;case"ip":"v6"!==s.version&&R(i,"ipv4",s.message,t),"v4"!==s.version&&R(i,"ipv6",s.message,t);break;case"emoji":P(i,w.emoji,s.message,t);break;case"ulid":P(i,w.ulid,s.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":R(i,"binary",s.message,t);break;case"contentEncoding:base64":l(i,"contentEncoding","base64",s.message,t);break;case"pattern:zod":P(i,w.base64,s.message,t)}break;case"nanoid":P(i,w.nanoid,s.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:(()=>{})()}return i}const O=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),R=(e,t,i,r)=>{e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...i&&r.errorMessages&&{errorMessage:{format:i}}})):l(e,"format",t,i,r)},P=(e,t,i,r)=>{e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:I(t,r),...i&&r.errorMessages&&{errorMessage:{pattern:i}}})):l(e,"pattern",I(t,r),i,r)},I=(e,t)=>{const i="function"==typeof e?e():e;if(!t.applyRegexFlags||!i.flags)return i.source;const r=i.flags.includes("i"),s=i.flags.includes("m"),n=i.flags.includes("s"),a=r?i.source.toLowerCase():i.source;let o="",l=!1,c=!1,d=!1;for(let e=0;e<a.length;e++)if(l)o+=a[e],l=!1;else{if(r)if(c){if(a[e].match(/[a-z]/)){d?(o+=a[e],o+=`${a[e-2]}-${a[e]}`.toUpperCase(),d=!1):"-"===a[e+1]&&a[e+2]?.match(/[a-z]/)?(o+=a[e],d=!0):o+=`${a[e]}${a[e].toUpperCase()}`;continue}}else if(a[e].match(/[a-z]/)){o+=`[${a[e]}${a[e].toUpperCase()}]`;continue}if(s){if("^"===a[e]){o+="(^|(?<=[\r\n]))";continue}if("$"===a[e]){o+="($|(?=[\r\n]))";continue}}n&&"."===a[e]?o+=c?`${a[e]}\r\n`:`[${a[e]}\r\n]`:(o+=a[e],"\\"===a[e]?l=!0:c&&"]"===a[e]?c=!1:c||"["!==a[e]||(c=!0))}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),i.source}return o};function N(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===c.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((i,r)=>({...i,[r]:J(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??{}}),{}),additionalProperties:!1};const i={type:"object",additionalProperties:J(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return i;if(e.keyType?._def.typeName===c.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){const r=Object.entries(k(e.keyType._def,t)).reduce((e,[t,i])=>"type"===t?e:{...e,[t]:i},{});return{...i,propertyNames:r}}return e.keyType?._def.typeName===c.ZodFirstPartyTypeKind.ZodEnum?{...i,propertyNames:{enum:e.keyType._def.values}}:i}function x(e,t){return"record"===t.mapStrategy?N(e,t):{type:"array",maxItems:125,items:{type:"array",items:[J(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},J(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}function A(e){const t=e.values,i=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(i.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:i}}function M(){return{not:{}}}function D(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}const L={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function j(e,t){if("openApi3"===t.target)return F(e,t);const i=e.options instanceof Map?Array.from(e.options.values()):e.options;if(i.every(e=>e._def.typeName in L&&(!e._def.checks||!e._def.checks.length))){const e=i.reduce((e,t)=>{const i=L[t._def.typeName];return i&&!e.includes(i)?[...e,i]:e},[]);return{type:e.length>1?e:e[0]}}if(i.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=i.reduce((e,t)=>{const i=typeof t._def.value;switch(i){case"string":case"number":case"boolean":return[...e,i];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===i.length){const t=e.filter((e,t,i)=>i.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:i.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(i.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:i.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return F(e,t)}const F=(e,t)=>{const i=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,i)=>J(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${i}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return i.length?{anyOf:i}:void 0};function U(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:L[e.innerType._def.typeName],nullable:!0}:{type:[L[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const i=J(e.innerType._def,{...t,currentPath:[...t.currentPath]});return i&&"$ref"in i?{allOf:[i],nullable:!0}:i&&{...i,nullable:!0}}const i=J(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return i&&{anyOf:[i,{type:"null"}]}}function B(e,t){const i={type:"number"};if(!e.checks)return i;for(const r of e.checks)switch(r.kind){case"int":i.type="integer",o(i,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?l(i,"minimum",r.value,r.message,t):l(i,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(i.exclusiveMinimum=!0),l(i,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?l(i,"maximum",r.value,r.message,t):l(i,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(i.exclusiveMaximum=!0),l(i,"maximum",r.value,r.message,t));break;case"multipleOf":l(i,"multipleOf",r.value,r.message,t)}return i}function z(e,t){return"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:J(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:J(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function Z(e,t){const i={type:"object",...Object.entries(e.shape()).reduce((e,[i,r])=>{if(void 0===r||void 0===r._def)return e;const s=J(r._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});return void 0===s?e:{properties:{...e.properties,[i]:s},required:r.isOptional()?e.required:[...e.required,i]}},{properties:{},required:[]}),additionalProperties:z(e,t)};return i.required.length||delete i.required,i}const $=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return J(e.innerType._def,t);const i=J(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return i?{anyOf:[{not:{}},i]}:{}},H=(e,t)=>{if("input"===t.pipeStrategy)return J(e.in._def,t);if("output"===t.pipeStrategy)return J(e.out._def,t);const i=J(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[i,J(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",i?"1":"0"]})].filter(e=>void 0!==e)}};function W(e,t){return J(e.type._def,t)}function V(e,t){const i={type:"array",uniqueItems:!0,items:J(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&l(i,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&l(i,"maxItems",e.maxSize.value,e.maxSize.message,t),i}function q(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,i)=>J(e._def,{...t,currentPath:[...t.currentPath,"items",`${i}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:J(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,i)=>J(e._def,{...t,currentPath:[...t.currentPath,"items",`${i}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function G(){return{not:{}}}function K(){return{}}const Y=(e,t)=>J(e.innerType._def,t);function J(e,t,i=!1){const s=t.seen.get(e);if(t.override){const n=t.override?.(e,t,s,i);if(n!==r)return n}if(s&&!i){const e=X(s,t);if(void 0!==e)return e}const n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,n);const a=ee(e,e.typeName,t);return a&&te(e,t,a),n.jsonSchema=a,a}const X=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Q(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,i)=>t.currentPath[i]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},Q=(e,t)=>{let i=0;for(;i<e.length&&i<t.length&&e[i]===t[i];i++);return[(e.length-i).toString(),...t.slice(i)].join("/")},ee=(e,t,i)=>{switch(t){case c.ZodFirstPartyTypeKind.ZodString:return k(e,i);case c.ZodFirstPartyTypeKind.ZodNumber:return B(e,i);case c.ZodFirstPartyTypeKind.ZodObject:return Z(e,i);case c.ZodFirstPartyTypeKind.ZodBigInt:return h(e,i);case c.ZodFirstPartyTypeKind.ZodBoolean:return{type:"boolean"};case c.ZodFirstPartyTypeKind.ZodDate:return g(e,i);case c.ZodFirstPartyTypeKind.ZodUndefined:return{not:{}};case c.ZodFirstPartyTypeKind.ZodNull:return D(i);case c.ZodFirstPartyTypeKind.ZodArray:return u(e,i);case c.ZodFirstPartyTypeKind.ZodUnion:case c.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return j(e,i);case c.ZodFirstPartyTypeKind.ZodIntersection:return _(e,i);case c.ZodFirstPartyTypeKind.ZodTuple:return q(e,i);case c.ZodFirstPartyTypeKind.ZodRecord:return N(e,i);case c.ZodFirstPartyTypeKind.ZodLiteral:return T(e,i);case c.ZodFirstPartyTypeKind.ZodEnum:return S(e);case c.ZodFirstPartyTypeKind.ZodNativeEnum:return A(e);case c.ZodFirstPartyTypeKind.ZodNullable:return U(e,i);case c.ZodFirstPartyTypeKind.ZodOptional:return $(e,i);case c.ZodFirstPartyTypeKind.ZodMap:return x(e,i);case c.ZodFirstPartyTypeKind.ZodSet:return V(e,i);case c.ZodFirstPartyTypeKind.ZodLazy:return J(e.getter()._def,i);case c.ZodFirstPartyTypeKind.ZodPromise:return W(e,i);case c.ZodFirstPartyTypeKind.ZodNaN:case c.ZodFirstPartyTypeKind.ZodNever:return{not:{}};case c.ZodFirstPartyTypeKind.ZodEffects:return b(e,i);case c.ZodFirstPartyTypeKind.ZodAny:case c.ZodFirstPartyTypeKind.ZodUnknown:return{};case c.ZodFirstPartyTypeKind.ZodDefault:return y(e,i);case c.ZodFirstPartyTypeKind.ZodBranded:return f(e,i);case c.ZodFirstPartyTypeKind.ZodReadonly:return Y(e,i);case c.ZodFirstPartyTypeKind.ZodCatch:return m(e,i);case c.ZodFirstPartyTypeKind.ZodPipeline:return H(e,i);case c.ZodFirstPartyTypeKind.ZodFunction:case c.ZodFirstPartyTypeKind.ZodVoid:case c.ZodFirstPartyTypeKind.ZodSymbol:default:return}},te=(e,t,i)=>(e.description&&(i.description=e.description,t.markdownDescription&&(i.markdownDescription=e.description)),i),ie=(e,t)=>{const i=a(t),r="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>({...e,[t]:J(r._def,{...i,currentPath:[...i.basePath,i.definitionPath,t]},!0)??{}}),{}):void 0,s="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,n=J(e._def,void 0===s?i:{...i,currentPath:[...i.basePath,i.definitionPath,s]},!1)??{},o="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==o&&(n.title=o);const l=void 0===s?r?{...n,[i.definitionPath]:r}:n:{$ref:[..."relative"===i.$refStrategy?[]:i.basePath,i.definitionPath,s].join("/"),[i.definitionPath]:{...r,[s]:n}};return"jsonSchema7"===i.target?l.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===i.target&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l},re=ie},2549:(e,t,i)=>{"use strict";e.exports=i(9100)},2551:(e,t,i)=>{"use strict";e.exports=s;var r=i(3610);function s(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)this[t[i]]=e[t[i]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},2558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0,t.BaseFilter=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}},2611:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;const r=i(463),s=i(131),n=i(6308),a=i(4097),o=i(178),l=i(3822),c=i(267),d=i(6067),u=i(5675);t.LoadBalancingCall=class{constructor(e,t,i,r,s,n,a){var o,c;this.channel=e,this.callConfig=t,this.methodName=i,this.host=r,this.credentials=s,this.deadline=n,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null,this.childStartTime=null;const d=this.methodName.split("/");let u="";d.length>=2&&(u=d[1]);const h=null!==(c=null===(o=(0,l.splitHostPort)(this.host))||void 0===o?void 0:o.host)&&void 0!==c?c:"localhost";this.serviceUrl=`https://${h}/${u}`,this.startTime=new Date}getDeadlineInfo(){var e,t;const i=[];return this.childStartTime?(this.childStartTime>this.startTime&&((null===(e=this.metadata)||void 0===e?void 0:e.getOptions().waitForReady)&&i.push("wait_for_ready"),i.push(`LB pick: ${(0,n.formatDateDifference)(this.startTime,this.childStartTime)}`)),i.push(...this.child.getDeadlineInfo()),i):((null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)&&i.push("wait_for_ready"),i.push("Waiting for LB pick"),i)}trace(e){c.trace(s.LogVerbosity.DEBUG,"load_balancing_call","["+this.callNumber+"] "+e)}outputStatus(e,t){var i,r;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());const s=Object.assign(Object.assign({},e),{progress:t});null===(i=this.listener)||void 0===i||i.onReceiveStatus(s),null===(r=this.onCallEnded)||void 0===r||r.call(this,s.code,s.details,s.metadata)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");const i=this.metadata.clone(),l=this.channel.doPick(i,this.callConfig.pickInformation),c=l.subchannel?"("+l.subchannel.getChannelzRef().id+") "+l.subchannel.getAddress():""+l.subchannel;switch(this.trace("Pick result: "+o.PickResultType[l.pickResultType]+" subchannel: "+c+" status: "+(null===(e=l.status)||void 0===e?void 0:e.code)+" "+(null===(t=l.status)||void 0===t?void 0:t.details)),l.pickResultType){case o.PickResultType.COMPLETE:this.credentials.compose(l.subchannel.getCallCredentials()).generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then(e=>{var t;if(this.ended)this.trace("Credentials metadata generation finished after call ended");else{if(i.merge(e),i.get("authorization").length>1&&this.outputStatus({code:s.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new a.Metadata},"PROCESSED"),l.subchannel.getConnectivityState()!==r.ConnectivityState.READY)return this.trace("Picked subchannel "+c+" has state "+r.ConnectivityState[l.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),void this.doPick();this.deadline!==1/0&&i.set("grpc-timeout",(0,n.getDeadlineTimeoutString)(this.deadline));try{this.child=l.subchannel.getRealSubchannel().createCall(i,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===u.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}}),this.childStartTime=new Date}catch(e){return this.trace("Failed to start call on picked subchannel "+c+" with error "+e.message),void this.outputStatus({code:s.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new a.Metadata},"NOT_STARTED")}null===(t=l.onCallStarted)||void 0===t||t.call(l),this.onCallEnded=l.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()}},e=>{const{code:t,details:i}=(0,d.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:s.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:i,metadata:new a.Metadata},"PROCESSED")});break;case o.PickResultType.DROP:const{code:e,details:t}=(0,d.restrictControlPlaneStatusCode)(l.status.code,l.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:l.status.metadata},"DROP")});break;case o.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{const{code:e,details:t}=(0,d.restrictControlPlaneStatusCode)(l.status.code,l.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:l.status.metadata},"PROCESSED")})}break;case o.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var i;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(i=this.child)||void 0===i||i.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}getAuthContext(){return this.child?this.child.getAuthContext():null}}},2661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAdminService=function(e,t){i.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(const{getServiceDefinition:t,getHandlers:r}of i)e.addService(t(),r())};const i=[]},2739:function(e,t,i){"use strict";var r,s,n=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,i,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,i):s?s.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.datetimeRegex=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=t.date=void 0;const o=i(627),l=i(9750),c=i(7231),d=i(2146),u=i(6837);class h{constructor(e,t,i,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const p=(e,t)=>{if((0,c.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new u.ZodError(e.common.issues);return this._error=t,this._error}}};function f(e){if(!e)return{};const{errorMap:t,invalid_type_error:i,required_error:r,description:s}=e;if(t&&(i||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:s}:{errorMap:(t,s)=>{var n,a;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:s.defaultError}:void 0===s.data?{message:null!==(n=null!=o?o:r)&&void 0!==n?n:s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:null!==(a=null!=o?o:i)&&void 0!==a?a:s.defaultError}},description:s}}class m{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,d.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,d.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new c.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,d.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,c.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const r={common:{issues:[],async:null!==(i=null==t?void 0:t.async)&&void 0!==i&&i,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,d.getParsedType)(e)},s=this._parseSync({data:e,path:r.path,parent:r});return p(r,s)}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,d.getParsedType)(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await((0,c.isAsync)(r)?r:Promise.resolve(r));return p(i,s)}refine(e,t){const i=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const s=e(t),n=()=>r.addIssue({code:u.ZodIssueCode.custom,...i(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(e=>!!e||(n(),!1)):!!s||(n(),!1)})}refinement(e,t){return this._refinement((i,r)=>!!e(i)||(r.addIssue("function"==typeof t?t(i,r):t),!1))}_refinement(e){return new ue({schema:this,typeName:Ce.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return he.create(this,this._def)}nullable(){return pe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return V.create(this,this._def)}promise(){return de.create(this,this._def)}or(e){return K.create([this,e],this._def)}and(e){return Q.create(this,e,this._def)}transform(e){return new ue({...f(this._def),schema:this,typeName:Ce.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new fe({...f(this._def),innerType:this,defaultValue:t,typeName:Ce.ZodDefault})}brand(){return new ve({typeName:Ce.ZodBranded,type:this,...f(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new me({...f(this._def),innerType:this,catchValue:t,typeName:Ce.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ye.create(this,e)}readonly(){return be.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=m,t.Schema=m,t.ZodSchema=m;const g=/^c[^\s-]{8,}$/i,v=/^[0-9a-z]+$/,y=/^[0-9A-HJKMNP-TV-Z]{26}$/,b=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,S=/^[a-z0-9_-]{21}$/i,C=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let T;const E=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,w=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,k=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,O="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",R=new RegExp(`^${O}$`);function P(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function I(e){return new RegExp(`^${P(e)}$`)}function N(e){let t=`${O}T${P(e)}`;const i=[];return i.push(e.local?"Z?":"Z"),e.offset&&i.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${i.join("|")})`,new RegExp(`^${t}$`)}function x(e,t){return!("v4"!==t&&t||!E.test(e))||!("v6"!==t&&t||!w.test(e))}t.datetimeRegex=N;class A extends m{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==d.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.string,received:t.parsedType}),c.INVALID}const t=new c.ParseStatus;let i;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const s=e.data.length>r.value,n=e.data.length<r.value;(s||n)&&(i=this._getOrReturnCtx(e,i),s?(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):n&&(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)_.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"email",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)T||(T=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),T.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"emoji",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)b.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"uuid",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)S.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"nanoid",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)g.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"cuid",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)v.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"cuid2",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)y.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"ulid",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(s){i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"url",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"regex",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty())):"trim"===r.kind?e.data=e.data.trim():"includes"===r.kind?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):"toLowerCase"===r.kind?e.data=e.data.toLowerCase():"toUpperCase"===r.kind?e.data=e.data.toUpperCase():"startsWith"===r.kind?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):"endsWith"===r.kind?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):"datetime"===r.kind?N(r).test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_string,validation:"datetime",message:r.message}),t.dirty()):"date"===r.kind?R.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_string,validation:"date",message:r.message}),t.dirty()):"time"===r.kind?I(r).test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_string,validation:"time",message:r.message}),t.dirty()):"duration"===r.kind?C.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"duration",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?x(e.data,r.version)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"ip",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?k.test(e.data)||(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{validation:"base64",code:u.ZodIssueCode.invalid_string,message:r.message}),t.dirty()):d.util.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,i){return this.refinement(t=>e.test(t),{validation:t,code:u.ZodIssueCode.invalid_string,...l.errorUtil.errToObj(i)})}_addCheck(e){return new A({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...l.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...l.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...l.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...l.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...l.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...l.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...l.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...l.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...l.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...l.errorUtil.errToObj(e)})}datetime(e){var t,i;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(i=null==e?void 0:e.local)&&void 0!==i&&i,...l.errorUtil.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...l.errorUtil.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...l.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...l.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...l.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...l.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...l.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...l.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...l.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...l.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,l.errorUtil.errToObj(e))}trim(){return new A({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new A({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new A({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function M(e,t){const i=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=i>r?i:r;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}t.ZodString=A,A.create=e=>{var t;return new A({checks:[],typeName:Ce.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...f(e)})};class D extends m{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==d.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.number,received:t.parsedType}),c.INVALID}let t;const i=new c.ParseStatus;for(const r of this._def.checks)"int"===r.kind?d.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):"multipleOf"===r.kind?0!==M(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.not_finite,message:r.message}),i.dirty()):d.util.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,l.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,l.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,l.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,l.errorUtil.toString(t))}setLimit(e,t,i,r){return new D({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:l.errorUtil.toString(r)}]})}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:l.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:l.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:l.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:l.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:l.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:l.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:l.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:l.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:l.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&d.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===t||i.value>t)&&(t=i.value):"max"===i.kind&&(null===e||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=D,D.create=e=>new D({checks:[],typeName:Ce.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...f(e)});class L extends m{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==d.ZodParsedType.bigint){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.bigint,received:t.parsedType}),c.INVALID}let t;const i=new c.ParseStatus;for(const r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):d.util.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,l.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,l.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,l.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,l.errorUtil.toString(t))}setLimit(e,t,i,r){return new L({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:l.errorUtil.toString(r)}]})}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:l.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:l.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:l.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:l.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:l.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=L,L.create=e=>{var t;return new L({checks:[],typeName:Ce.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...f(e)})};class j extends m{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==d.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.boolean,received:t.parsedType}),c.INVALID}return(0,c.OK)(e.data)}}t.ZodBoolean=j,j.create=e=>new j({typeName:Ce.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...f(e)});class F extends m{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==d.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.date,received:t.parsedType}),c.INVALID}if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_date}),c.INVALID}const t=new c.ParseStatus;let i;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):d.util.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:l.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:l.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=F,F.create=e=>new F({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ce.ZodDate,...f(e)});class U extends m{_parse(e){if(this._getType(e)!==d.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.symbol,received:t.parsedType}),c.INVALID}return(0,c.OK)(e.data)}}t.ZodSymbol=U,U.create=e=>new U({typeName:Ce.ZodSymbol,...f(e)});class B extends m{_parse(e){if(this._getType(e)!==d.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.undefined,received:t.parsedType}),c.INVALID}return(0,c.OK)(e.data)}}t.ZodUndefined=B,B.create=e=>new B({typeName:Ce.ZodUndefined,...f(e)});class z extends m{_parse(e){if(this._getType(e)!==d.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.null,received:t.parsedType}),c.INVALID}return(0,c.OK)(e.data)}}t.ZodNull=z,z.create=e=>new z({typeName:Ce.ZodNull,...f(e)});class Z extends m{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,c.OK)(e.data)}}t.ZodAny=Z,Z.create=e=>new Z({typeName:Ce.ZodAny,...f(e)});class $ extends m{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,c.OK)(e.data)}}t.ZodUnknown=$,$.create=e=>new $({typeName:Ce.ZodUnknown,...f(e)});class H extends m{_parse(e){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.never,received:t.parsedType}),c.INVALID}}t.ZodNever=H,H.create=e=>new H({typeName:Ce.ZodNever,...f(e)});class W extends m{_parse(e){if(this._getType(e)!==d.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.void,received:t.parsedType}),c.INVALID}return(0,c.OK)(e.data)}}t.ZodVoid=W,W.create=e=>new W({typeName:Ce.ZodVoid,...f(e)});class V extends m{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),r=this._def;if(t.parsedType!==d.ZodParsedType.array)return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.array,received:t.parsedType}),c.INVALID;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,s=t.data.length<r.exactLength.value;(e||s)&&((0,c.addIssueToContext)(t,{code:e?u.ZodIssueCode.too_big:u.ZodIssueCode.too_small,minimum:s?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&((0,c.addIssueToContext)(t,{code:u.ZodIssueCode.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&((0,c.addIssueToContext)(t,{code:u.ZodIssueCode.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((e,i)=>r.type._parseAsync(new h(t,e,t.path,i)))).then(e=>c.ParseStatus.mergeArray(i,e));const s=[...t.data].map((e,i)=>r.type._parseSync(new h(t,e,t.path,i)));return c.ParseStatus.mergeArray(i,s)}get element(){return this._def.type}min(e,t){return new V({...this._def,minLength:{value:e,message:l.errorUtil.toString(t)}})}max(e,t){return new V({...this._def,maxLength:{value:e,message:l.errorUtil.toString(t)}})}length(e,t){return new V({...this._def,exactLength:{value:e,message:l.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function q(e){if(e instanceof G){const t={};for(const i in e.shape){const r=e.shape[i];t[i]=he.create(q(r))}return new G({...e._def,shape:()=>t})}return e instanceof V?new V({...e._def,type:q(e.element)}):e instanceof he?he.create(q(e.unwrap())):e instanceof pe?pe.create(q(e.unwrap())):e instanceof ee?ee.create(e.items.map(e=>q(e))):e}t.ZodArray=V,V.create=(e,t)=>new V({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ce.ZodArray,...f(t)});class G extends m{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=d.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==d.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.object,received:t.parsedType}),c.INVALID}const{status:t,ctx:i}=this._processInputParams(e),{shape:r,keys:s}=this._getCached(),n=[];if(!(this._def.catchall instanceof H&&"strip"===this._def.unknownKeys))for(const e in i.data)s.includes(e)||n.push(e);const a=[];for(const e of s){const t=r[e],s=i.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new h(i,s,i.path,e)),alwaysSet:e in i.data})}if(this._def.catchall instanceof H){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of n)a.push({key:{status:"valid",value:e},value:{status:"valid",value:i.data[e]}});else if("strict"===e)n.length>0&&((0,c.addIssueToContext)(i,{code:u.ZodIssueCode.unrecognized_keys,keys:n}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of n){const r=i.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new h(i,r,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of a){const i=await t.key,r=await t.value;e.push({key:i,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>c.ParseStatus.mergeObjectSync(t,e)):c.ParseStatus.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return l.errorUtil.errToObj,new G({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,i)=>{var r,s,n,a;const o=null!==(n=null===(s=(r=this._def).errorMap)||void 0===s?void 0:s.call(r,t,i).message)&&void 0!==n?n:i.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=l.errorUtil.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ce.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};return d.util.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])}),new G({...this._def,shape:()=>t})}omit(e){const t={};return d.util.objectKeys(this.shape).forEach(i=>{e[i]||(t[i]=this.shape[i])}),new G({...this._def,shape:()=>t})}deepPartial(){return q(this)}partial(e){const t={};return d.util.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?t[i]=r:t[i]=r.optional()}),new G({...this._def,shape:()=>t})}required(e){const t={};return d.util.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])t[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof he;)e=e._def.innerType;t[i]=e}}),new G({...this._def,shape:()=>t})}keyof(){return oe(d.util.objectKeys(this.shape))}}t.ZodObject=G,G.create=(e,t)=>new G({shape:()=>e,unknownKeys:"strip",catchall:H.create(),typeName:Ce.ZodObject,...f(t)}),G.strictCreate=(e,t)=>new G({shape:()=>e,unknownKeys:"strict",catchall:H.create(),typeName:Ce.ZodObject,...f(t)}),G.lazycreate=(e,t)=>new G({shape:e,unknownKeys:"strip",catchall:H.create(),typeName:Ce.ZodObject,...f(t)});class K extends m{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;if(t.common.async)return Promise.all(i.map(async e=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const i of e)if("dirty"===i.result.status)return t.common.issues.push(...i.ctx.common.issues),i.result;const i=e.map(e=>new u.ZodError(e.ctx.common.issues));return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_union,unionErrors:i}),c.INVALID});{let e;const r=[];for(const s of i){const i={...t,common:{...t.common,issues:[]},parent:null},n=s._parseSync({data:t.data,path:t.path,parent:i});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:i}),i.common.issues.length&&r.push(i.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=r.map(e=>new u.ZodError(e));return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_union,unionErrors:s}),c.INVALID}}get options(){return this._def.options}}t.ZodUnion=K,K.create=(e,t)=>new K({options:e,typeName:Ce.ZodUnion,...f(t)});const Y=e=>e instanceof ne?Y(e.schema):e instanceof ue?Y(e.innerType()):e instanceof ae?[e.value]:e instanceof le?e.options:e instanceof ce?d.util.objectValues(e.enum):e instanceof fe?Y(e._def.innerType):e instanceof B?[void 0]:e instanceof z?[null]:e instanceof he?[void 0,...Y(e.unwrap())]:e instanceof pe?[null,...Y(e.unwrap())]:e instanceof ve||e instanceof be?Y(e.unwrap()):e instanceof me?Y(e._def.innerType):[];class J extends m{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==d.ZodParsedType.object)return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.object,received:t.parsedType}),c.INVALID;const i=this.discriminator,r=t.data[i],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):((0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),c.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const r=new Map;for(const i of t){const t=Y(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const s of t){if(r.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);r.set(s,i)}}return new J({typeName:Ce.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...f(i)})}}function X(e,t){const i=(0,d.getParsedType)(e),r=(0,d.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(i===d.ZodParsedType.object&&r===d.ZodParsedType.object){const i=d.util.objectKeys(t),r=d.util.objectKeys(e).filter(e=>-1!==i.indexOf(e)),s={...e,...t};for(const i of r){const r=X(e[i],t[i]);if(!r.valid)return{valid:!1};s[i]=r.data}return{valid:!0,data:s}}if(i===d.ZodParsedType.array&&r===d.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let r=0;r<e.length;r++){const s=X(e[r],t[r]);if(!s.valid)return{valid:!1};i.push(s.data)}return{valid:!0,data:i}}return i===d.ZodParsedType.date&&r===d.ZodParsedType.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}t.ZodDiscriminatedUnion=J;class Q extends m{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=(e,r)=>{if((0,c.isAborted)(e)||(0,c.isAborted)(r))return c.INVALID;const s=X(e.value,r.value);return s.valid?(((0,c.isDirty)(e)||(0,c.isDirty)(r))&&t.dirty(),{status:t.value,value:s.data}):((0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_intersection_types}),c.INVALID)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}t.ZodIntersection=Q,Q.create=(e,t,i)=>new Q({left:e,right:t,typeName:Ce.ZodIntersection,...f(i)});class ee extends m{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==d.ZodParsedType.array)return(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.array,received:i.parsedType}),c.INVALID;if(i.data.length<this._def.items.length)return(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c.INVALID;!this._def.rest&&i.data.length>this._def.items.length&&((0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...i.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new h(i,e,i.path,t)):null}).filter(e=>!!e);return i.common.async?Promise.all(r).then(e=>c.ParseStatus.mergeArray(t,e)):c.ParseStatus.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ee({...this._def,rest:e})}}t.ZodTuple=ee,ee.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ee({items:e,typeName:Ce.ZodTuple,rest:null,...f(t)})};class te extends m{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==d.ZodParsedType.object)return(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.object,received:i.parsedType}),c.INVALID;const r=[],s=this._def.keyType,n=this._def.valueType;for(const e in i.data)r.push({key:s._parse(new h(i,e,i.path,e)),value:n._parse(new h(i,i.data[e],i.path,e)),alwaysSet:e in i.data});return i.common.async?c.ParseStatus.mergeObjectAsync(t,r):c.ParseStatus.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,i){return new te(t instanceof m?{keyType:e,valueType:t,typeName:Ce.ZodRecord,...f(i)}:{keyType:A.create(),valueType:e,typeName:Ce.ZodRecord,...f(t)})}}t.ZodRecord=te;class ie extends m{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==d.ZodParsedType.map)return(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.map,received:i.parsedType}),c.INVALID;const r=this._def.keyType,s=this._def.valueType,n=[...i.data.entries()].map(([e,t],n)=>({key:r._parse(new h(i,e,i.path,[n,"key"])),value:s._parse(new h(i,t,i.path,[n,"value"]))}));if(i.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const i of n){const r=await i.key,s=await i.value;if("aborted"===r.status||"aborted"===s.status)return c.INVALID;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}})}{const e=new Map;for(const i of n){const r=i.key,s=i.value;if("aborted"===r.status||"aborted"===s.status)return c.INVALID;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}}}t.ZodMap=ie,ie.create=(e,t,i)=>new ie({valueType:t,keyType:e,typeName:Ce.ZodMap,...f(i)});class re extends m{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==d.ZodParsedType.set)return(0,c.addIssueToContext)(i,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.set,received:i.parsedType}),c.INVALID;const r=this._def;null!==r.minSize&&i.data.size<r.minSize.value&&((0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&i.data.size>r.maxSize.value&&((0,c.addIssueToContext)(i,{code:u.ZodIssueCode.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function n(e){const i=new Set;for(const r of e){if("aborted"===r.status)return c.INVALID;"dirty"===r.status&&t.dirty(),i.add(r.value)}return{status:t.value,value:i}}const a=[...i.data.values()].map((e,t)=>s._parse(new h(i,e,i.path,t)));return i.common.async?Promise.all(a).then(e=>n(e)):n(a)}min(e,t){return new re({...this._def,minSize:{value:e,message:l.errorUtil.toString(t)}})}max(e,t){return new re({...this._def,maxSize:{value:e,message:l.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=re,re.create=(e,t)=>new re({valueType:e,minSize:null,maxSize:null,typeName:Ce.ZodSet,...f(t)});class se extends m{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==d.ZodParsedType.function)return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.function,received:t.parsedType}),c.INVALID;function i(e,i){return(0,c.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter(e=>!!e),issueData:{code:u.ZodIssueCode.invalid_arguments,argumentsError:i}})}function r(e,i){return(0,c.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter(e=>!!e),issueData:{code:u.ZodIssueCode.invalid_return_type,returnTypeError:i}})}const s={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof de){const e=this;return(0,c.OK)(async function(...t){const a=new u.ZodError([]),o=await e._def.args.parseAsync(t,s).catch(e=>{throw a.addIssue(i(t,e)),a}),l=await Reflect.apply(n,this,o);return await e._def.returns._def.type.parseAsync(l,s).catch(e=>{throw a.addIssue(r(l,e)),a})})}{const e=this;return(0,c.OK)(function(...t){const a=e._def.args.safeParse(t,s);if(!a.success)throw new u.ZodError([i(t,a.error)]);const o=Reflect.apply(n,this,a.data),l=e._def.returns.safeParse(o,s);if(!l.success)throw new u.ZodError([r(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new se({...this._def,args:ee.create(e).rest($.create())})}returns(e){return new se({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new se({args:e||ee.create([]).rest($.create()),returns:t||$.create(),typeName:Ce.ZodFunction,...f(i)})}}t.ZodFunction=se;class ne extends m{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=ne,ne.create=(e,t)=>new ne({getter:e,typeName:Ce.ZodLazy,...f(t)});class ae extends m{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{received:t.data,code:u.ZodIssueCode.invalid_literal,expected:this._def.value}),c.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function oe(e,t){return new le({values:e,typeName:Ce.ZodEnum,...f(t)})}t.ZodLiteral=ae,ae.create=(e,t)=>new ae({value:e,typeName:Ce.ZodLiteral,...f(t)});class le extends m{constructor(){super(...arguments),r.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),i=this._def.values;return(0,c.addIssueToContext)(t,{expected:d.util.joinValues(i),received:t.parsedType,code:u.ZodIssueCode.invalid_type}),c.INVALID}if(n(this,r,"f")||a(this,r,new Set(this._def.values),"f"),!n(this,r,"f").has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return(0,c.addIssueToContext)(t,{received:t.data,code:u.ZodIssueCode.invalid_enum_value,options:i}),c.INVALID}return(0,c.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return le.create(e,{...this._def,...t})}exclude(e,t=this._def){return le.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}t.ZodEnum=le,r=new WeakMap,le.create=oe;class ce extends m{constructor(){super(...arguments),s.set(this,void 0)}_parse(e){const t=d.util.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==d.ZodParsedType.string&&i.parsedType!==d.ZodParsedType.number){const e=d.util.objectValues(t);return(0,c.addIssueToContext)(i,{expected:d.util.joinValues(e),received:i.parsedType,code:u.ZodIssueCode.invalid_type}),c.INVALID}if(n(this,s,"f")||a(this,s,new Set(d.util.getValidEnumValues(this._def.values)),"f"),!n(this,s,"f").has(e.data)){const e=d.util.objectValues(t);return(0,c.addIssueToContext)(i,{received:i.data,code:u.ZodIssueCode.invalid_enum_value,options:e}),c.INVALID}return(0,c.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=ce,s=new WeakMap,ce.create=(e,t)=>new ce({values:e,typeName:Ce.ZodNativeEnum,...f(t)});class de extends m{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==d.ZodParsedType.promise&&!1===t.common.async)return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.promise,received:t.parsedType}),c.INVALID;const i=t.parsedType===d.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,c.OK)(i.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t.ZodPromise=de,de.create=(e,t)=>new de({type:e,typeName:Ce.ZodPromise,...f(t)});class ue extends m{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ce.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:e=>{(0,c.addIssueToContext)(i,e),e.fatal?t.abort():t.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===r.type){const e=r.transform(i.data,s);if(i.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return c.INVALID;const r=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return"aborted"===r.status?c.INVALID:"dirty"===r.status||"dirty"===t.value?(0,c.DIRTY)(r.value):r});{if("aborted"===t.value)return c.INVALID;const r=this._def.schema._parseSync({data:e,path:i.path,parent:i});return"aborted"===r.status?c.INVALID:"dirty"===r.status||"dirty"===t.value?(0,c.DIRTY)(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,s);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.common.async){const r=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===r.status?c.INVALID:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(i=>"aborted"===i.status?c.INVALID:("dirty"===i.status&&t.dirty(),e(i.value).then(()=>({status:t.value,value:i.value}))))}if("transform"===r.type){if(!1===i.common.async){const e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!(0,c.isValid)(e))return e;const n=r.transform(e.value,s);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(e=>(0,c.isValid)(e)?Promise.resolve(r.transform(e.value,s)).then(e=>({status:t.value,value:e})):e)}d.util.assertNever(r)}}t.ZodEffects=ue,t.ZodTransformer=ue,ue.create=(e,t,i)=>new ue({schema:e,typeName:Ce.ZodEffects,effect:t,...f(i)}),ue.createWithPreprocess=(e,t,i)=>new ue({schema:t,effect:{type:"preprocess",transform:e},typeName:Ce.ZodEffects,...f(i)});class he extends m{_parse(e){return this._getType(e)===d.ZodParsedType.undefined?(0,c.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=he,he.create=(e,t)=>new he({innerType:e,typeName:Ce.ZodOptional,...f(t)});class pe extends m{_parse(e){return this._getType(e)===d.ZodParsedType.null?(0,c.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=pe,pe.create=(e,t)=>new pe({innerType:e,typeName:Ce.ZodNullable,...f(t)});class fe extends m{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===d.ZodParsedType.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=fe,fe.create=(e,t)=>new fe({innerType:e,typeName:Ce.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...f(t)});class me extends m{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return(0,c.isAsync)(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new u.ZodError(i.common.issues)},input:i.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new u.ZodError(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=me,me.create=(e,t)=>new me({innerType:e,typeName:Ce.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...f(t)});class ge extends m{_parse(e){if(this._getType(e)!==d.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,c.addIssueToContext)(t,{code:u.ZodIssueCode.invalid_type,expected:d.ZodParsedType.nan,received:t.parsedType}),c.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ge,ge.create=e=>new ge({typeName:Ce.ZodNaN,...f(e)}),t.BRAND=Symbol("zod_brand");class ve extends m{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ve;class ye extends m{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?c.INVALID:"dirty"===e.status?(t.dirty(),(0,c.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})();{const e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?c.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,t){return new ye({in:e,out:t,typeName:Ce.ZodPipeline})}}t.ZodPipeline=ye;class be extends m{_parse(e){const t=this._def.innerType._parse(e),i=e=>((0,c.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,c.isAsync)(t)?t.then(e=>i(e)):i(t)}unwrap(){return this._def.innerType}}function Se(e,t={},i){return e?Z.create().superRefine((r,s)=>{var n,a;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(a=null!==(n=e.fatal)&&void 0!==n?n:i)||void 0===a||a,l="string"==typeof e?{message:e}:e;s.addIssue({code:"custom",...l,fatal:o})}}):Z.create()}var Ce;t.ZodReadonly=be,be.create=(e,t)=>new be({innerType:e,typeName:Ce.ZodReadonly,...f(t)}),t.custom=Se,t.late={object:G.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ce=t.ZodFirstPartyTypeKind||(t.ZodFirstPartyTypeKind={})),t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>Se(t=>t instanceof e,t);const _e=A.create;t.string=_e;const Te=D.create;t.number=Te;const Ee=ge.create;t.nan=Ee;const we=L.create;t.bigint=we;const ke=j.create;t.boolean=ke;const Oe=F.create;t.date=Oe;const Re=U.create;t.symbol=Re;const Pe=B.create;t.undefined=Pe;const Ie=z.create;t.null=Ie;const Ne=Z.create;t.any=Ne;const xe=$.create;t.unknown=xe;const Ae=H.create;t.never=Ae;const Me=W.create;t.void=Me;const De=V.create;t.array=De;const Le=G.create;t.object=Le;const je=G.strictCreate;t.strictObject=je;const Fe=K.create;t.union=Fe;const Ue=J.create;t.discriminatedUnion=Ue;const Be=Q.create;t.intersection=Be;const ze=ee.create;t.tuple=ze;const Ze=te.create;t.record=Ze;const $e=ie.create;t.map=$e;const He=re.create;t.set=He;const We=se.create;t.function=We;const Ve=ne.create;t.lazy=Ve;const qe=ae.create;t.literal=qe;const Ge=le.create;t.enum=Ge;const Ke=ce.create;t.nativeEnum=Ke;const Ye=de.create;t.promise=Ye;const Je=ue.create;t.effect=Je,t.transformer=Je;const Xe=he.create;t.optional=Xe;const Qe=pe.create;t.nullable=Qe;const et=ue.createWithPreprocess;t.preprocess=et;const tt=ye.create;t.pipeline=tt,t.ostring=()=>_e().optional(),t.onumber=()=>Te().optional(),t.oboolean=()=>ke().optional(),t.coerce={string:e=>A.create({...e,coerce:!0}),number:e=>D.create({...e,coerce:!0}),boolean:e=>j.create({...e,coerce:!0}),bigint:e=>L.create({...e,coerce:!0}),date:e=>F.create({...e,coerce:!0})},t.NEVER=c.INVALID},2921:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrcaOobMetricsSubchannelWrapper=t.GRPC_METRICS_HEADER=t.ServerMetricRecorder=t.PerRequestMetricRecorder=void 0,t.createOrcaClient=h,t.createMetricsReader=function(e,i){return(r,s,n)=>{let a=n.getOpaque(p);if(a)e(a);else{const i=n.get(t.GRPC_METRICS_HEADER);i.length>0&&(a=u().xds.data.orca.v3.OrcaLoadReport.deserialize(i[0]),e(a),n.setOpaque(p,a))}i&&i(r,s,n)}};const r=i(4056),s=i(4700),n=i(7434),a=i(2379),o=i(131),l=i(3956),c=i(463),d=null;function u(){if(d)return d;const e=(0,i(5085).Yi)("xds/service/orca/v3/orca.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto/xds`,`${__dirname}/../../proto/protoc-gen-validate`]});return(0,r.loadPackageDefinition)(e)}function h(e){return new(0,u().xds.service.orca.v3.OpenRcaService)("unused",n.ChannelCredentials.createInsecure(),{channelOverride:e})}t.PerRequestMetricRecorder=class{constructor(){this.message={}}recordRequestCostMetric(e,t){this.message.request_cost||(this.message.request_cost={}),this.message.request_cost[e]=t}recordUtilizationMetric(e,t){this.message.utilization||(this.message.utilization={}),this.message.utilization[e]=t}recordNamedMetric(e,t){this.message.named_metrics||(this.message.named_metrics={}),this.message.named_metrics[e]=t}recordCPUUtilizationMetric(e){this.message.cpu_utilization=e}recordMemoryUtilizationMetric(e){this.message.mem_utilization=e}recordApplicationUtilizationMetric(e){this.message.application_utilization=e}recordQpsMetric(e){this.message.rps_fractional=e}recordEpsMetric(e){this.message.eps=e}serialize(){return u().xds.data.orca.v3.OrcaLoadReport.serialize(this.message)}},t.ServerMetricRecorder=class{constructor(){this.message={},this.serviceImplementation={StreamCoreMetrics:e=>{const t=e.request.report_interval?(0,s.durationToMs)((0,s.durationMessageToDuration)(e.request.report_interval)):3e4,i=setInterval(()=>{e.write(this.message)},t);e.on("cancelled",()=>{clearInterval(i)})}}}putUtilizationMetric(e,t){this.message.utilization||(this.message.utilization={}),this.message.utilization[e]=t}setAllUtilizationMetrics(e){this.message.utilization=Object.assign({},e)}deleteUtilizationMetric(e){var t;null===(t=this.message.utilization)||void 0===t||delete t[e]}setCpuUtilizationMetric(e){this.message.cpu_utilization=e}deleteCpuUtilizationMetric(){delete this.message.cpu_utilization}setApplicationUtilizationMetric(e){this.message.application_utilization=e}deleteApplicationUtilizationMetric(){delete this.message.application_utilization}setQpsMetric(e){this.message.rps_fractional=e}deleteQpsMetric(){delete this.message.rps_fractional}setEpsMetric(e){this.message.eps=e}deleteEpsMetric(){delete this.message.eps}addToServer(e){const t=u().xds.service.orca.v3.OpenRcaService.service;e.addService(t,this.serviceImplementation)}},t.GRPC_METRICS_HEADER="endpoint-load-metrics-bin";const p="grpc_orca_load_report",f="orca_oob_metrics";class m{constructor(e,t){this.metricsListener=e,this.intervalMs=t,this.dataProducer=null}setSubchannel(e){const t=e.getOrCreateDataProducer(f,y);this.dataProducer=t,t.addDataWatcher(this)}destroy(){var e;null===(e=this.dataProducer)||void 0===e||e.removeDataWatcher(this)}getInterval(){return this.intervalMs}onMetricsUpdate(e){this.metricsListener(e)}}class g{constructor(e){this.subchannel=e,this.dataWatchers=new Set,this.orcaSupported=!0,this.metricsCall=null,this.currentInterval=1/0,this.backoffTimer=new l.BackoffTimeout(()=>this.updateMetricsSubscription()),this.subchannelStateListener=()=>this.updateMetricsSubscription();const t=e.getChannel();this.client=h(t),e.addConnectivityStateListener(this.subchannelStateListener)}addDataWatcher(e){this.dataWatchers.add(e),this.updateMetricsSubscription()}removeDataWatcher(e){var t;this.dataWatchers.delete(e),0===this.dataWatchers.size?(this.subchannel.removeDataProducer(f),null===(t=this.metricsCall)||void 0===t||t.cancel(),this.metricsCall=null,this.client.close(),this.subchannel.removeConnectivityStateListener(this.subchannelStateListener)):this.updateMetricsSubscription()}updateMetricsSubscription(){var e;if(0===this.dataWatchers.size||!this.orcaSupported||this.subchannel.getConnectivityState()!==c.ConnectivityState.READY)return;const t=Math.min(...Array.from(this.dataWatchers).map(e=>e.getInterval()));if(!this.metricsCall||t!==this.currentInterval){null===(e=this.metricsCall)||void 0===e||e.cancel(),this.currentInterval=t;const i=this.client.streamCoreMetrics({report_interval:(0,s.msToDuration)(t)});this.metricsCall=i,i.on("data",e=>{this.dataWatchers.forEach(t=>{t.onMetricsUpdate(e)})}),i.on("error",e=>{this.metricsCall=null,e.code!==o.Status.UNIMPLEMENTED?e.code!==o.Status.CANCELLED&&this.backoffTimer.runOnce():this.orcaSupported=!1})}}}class v extends a.BaseSubchannelWrapper{constructor(e,t,i){super(e),this.addDataWatcher(new m(t,i))}getWrappedSubchannel(){return this.child}}function y(e){return new g(e)}t.OrcaOobMetricsSubchannelWrapper=v},2939:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},3106:e=>{"use strict";e.exports=require("zlib")},3135:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;const r=i(131),s=i(6308),n=i(4097),a=i(267);t.RetryThrottler=class{constructor(e,t,i){this.maxTokens=e,this.tokenRatio=t,this.tokens=i?i.tokens*(e/i.maxTokens):e}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.max(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}},t.MessageBufferTracker=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var i;const r=null!==(i=this.allocatedPerCall.get(t))&&void 0!==i?i:0;return!(this.limitPerCall-r<e||this.totalLimit-this.totalAllocated<e||(this.allocatedPerCall.set(t,r+e),this.totalAllocated+=e,0))}free(e,t){var i;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;const r=null!==(i=this.allocatedPerCall.get(t))&&void 0!==i?i:0;if(r<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${r}`);this.allocatedPerCall.set(t,r-e)}freeAll(e){var t;const i=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<i)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${i} > total allocated ${this.totalAllocated}`);this.totalAllocated-=i,this.allocatedPerCall.delete(e)}};const o="grpc-previous-rpc-attempts";t.RetryingCall=class{constructor(e,t,i,r,s,n,a,o,l){var c;this.channel=e,this.callConfig=t,this.methodName=i,this.host=r,this.credentials=s,this.deadline=n,this.callNumber=a,this.bufferTracker=o,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0;const d=null!==(c=e.getOptions()["grpc-node.retry_max_attempts_limit"])&&void 0!==c?c:5;if(0===e.getOptions()["grpc.enable_retries"])this.state="NO_RETRY",this.maxAttempts=1;else if(t.methodConfig.retryPolicy){this.state="RETRY";const e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1)),this.maxAttempts=Math.min(e.maxAttempts,d)}else t.methodConfig.hedgingPolicy?(this.state="HEDGING",this.maxAttempts=Math.min(t.methodConfig.hedgingPolicy.maxAttempts,d)):(this.state="TRANSPARENT_ONLY",this.maxAttempts=1);this.startTime=new Date}getDeadlineInfo(){if(0===this.underlyingCalls.length)return[];const e=[],t=this.underlyingCalls[this.underlyingCalls.length-1];return this.underlyingCalls.length>1&&e.push("previous attempts: "+(this.underlyingCalls.length-1)),t.startTime>this.startTime&&e.push(`time to current attempt start: ${(0,s.formatDateDifference)(this.startTime,t.startTime)}`),e.push(...t.call.getDeadlineInfo()),e}getCallNumber(){return this.callNumber}trace(e){a.trace(r.LogVerbosity.DEBUG,"retrying_call","["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString()),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new n.Metadata});for(const{call:i}of this.underlyingCalls)i.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!==(t=this.writeBuffer[e-this.writeBufferOffset])&&void 0!==t?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e;e="COMPLETED"===this.underlyingCalls[this.committedCallIndex].state?this.getNextBufferIndex():this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){const e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){var t,i;if("COMMITTED"!==this.state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",null===(i=(t=this.callConfig).onCommitted)||void 0===i||i.call(t),this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(r.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(const[i,r]of this.underlyingCalls.entries())"ACTIVE"===r.state&&r.nextMessageToSend>e&&(e=r.nextMessageToSend,t=i);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>{var i;return e===t||e.toString().toLowerCase()===(null===(i=r.Status[t])||void 0===i?void 0:i.toLowerCase())})}getNextRetryJitter(){return Math.random()*(1.2-.8)+.8}getNextRetryBackoffMs(){var e;const t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;const i=this.getNextRetryJitter()*this.nextRetryBackoffSec*1e3,r=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,r),i}maybeRetryCall(e,t){if("RETRY"!==this.state)return void t(!1);if(this.attempts>=this.maxAttempts)return void t(!1);let i;if(null===e)i=this.getNextRetryBackoffMs();else{if(e<0)return this.state="TRANSPARENT_ONLY",void t(!1);i=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec}setTimeout(()=>{var e,i;"RETRY"===this.state?null===(i=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===i||i?(t(!0),this.attempts+=1,this.startNewAttempt()):(this.trace("Retry attempt denied by throttling policy"),t(!1)):t(!1)},i)}countActiveCalls(){let e=0;for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(e+=1);return e}handleProcessedStatus(e,t,i){var r,s,n;switch(this.state){case"COMMITTED":case"NO_RETRY":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(r=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==r?r:[],e.code)){let r;if(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),null===i)r=0;else{if(i<0)return this.state="TRANSPARENT_ONLY",this.commitCall(t),void this.reportStatus(e);r=i}setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},r)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(n=this.retryThrottler)||void 0===n||n.addCallFailed(),this.maybeRetryCall(i,i=>{i||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){const t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return-1}}handleChildStatus(e,t){var i;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===r.Status.OK)return null===(i=this.retryThrottler)||void 0===i||i.addCallSucceeded(),this.commitCall(t),void this.reportStatus(e);if("NO_RETRY"===this.state)return this.commitCall(t),void this.reportStatus(e);if("COMMITTED"===this.state)return void this.reportStatus(e);const s=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,s):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,s)}}maybeStartHedgingAttempt(){"HEDGING"===this.state&&this.callConfig.methodConfig.hedgingPolicy&&(this.attempts>=this.maxAttempts||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()))}maybeStartHedgingTimer(){var e,t,i;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const r=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts)return;const s=null!==(e=r.hedgingDelay)&&void 0!==e?e:"0s",n=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*n),null===(i=(t=this.hedgingTimer).unref)||void 0===i||i.call(t)}startNewAttempt(){const e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);const t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0,startTime:new Date});const i=this.attempts-1,r=this.initialMetadata.clone();i>0&&r.set(o,`${i}`);let s=!1;e.start(r,{onReceiveMetadata:r=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),s=!0,i>0&&r.set(o,`${i}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(r)},onReceiveMessage:i=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(i)},onReceiveStatus:r=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&i>0&&r.metadata.set(o,`${i}`),this.handleChildStatus(r,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e,t){var i,r;null===(r=(i=this.getBufferEntry(t)).callback)||void 0===r||r.call(i),this.clearSentMessages(),this.underlyingCalls[e].nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){const t=this.underlyingCalls[e];if("COMPLETED"===t.state)return;const i=t.nextMessageToSend;if(this.getBufferEntry(i)){const r=this.getBufferEntry(i);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e,i)}},r.message.message),"HALF_CLOSE"===this.getBufferEntry(i+1).entryType&&(this.trace("Sending halfClose immediately after message to child ["+t.call.getCallNumber()+"] - optimizing for unary/final message"),t.nextMessageToSend+=1,t.call.halfClose());break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const i={message:t,flags:e.flags},r=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated){process.nextTick(()=>{var t;null===(t=e.callback)||void 0===t||t.call(e)});for(const[e,i]of this.underlyingCalls.entries())"ACTIVE"===i.state&&i.nextMessageToSend===r&&i.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e,r)}},t)}else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;const i=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===i.state&&i.nextMessageToSend===r&&i.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex,r)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(const e of this.underlyingCalls)"ACTIVE"===(null==e?void 0:e.state)&&e.call.startRead()}halfClose(){this.trace("halfClose called");const e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(t.nextMessageToSend!==e&&t.nextMessageToSend!==e-1||(this.trace("Sending halfClose immediately to child ["+t.call.getCallNumber()+"] - all messages already sent"),t.nextMessageToSend+=1,t.call.halfClose()))}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}getAuthContext(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getAuthContext():null}}},3158:(e,t,i)=>{"use strict";e.exports=n;var r=i(6237);(n.prototype=Object.create(r.prototype)).constructor=n;var s=i(3610);function n(e){r.call(this,e)}n._configure=function(){s.Buffer&&(n.prototype._slice=s.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure()},3197:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const r=i(9896),s=i(6928),n=i(2549);function a(e,t){const i=e.resolvePath;e.resolvePath=(e,n)=>{if(s.isAbsolute(n))return n;for(const e of t){const t=s.join(e,n);try{return r.accessSync(t,r.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${n} not found in any of the include paths ${t}`),i(e,n)}}t.loadProtosWithOptions=async function(e,t){const i=new n.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));a(i,t.includeDirs)}const r=await i.load(e,t);return r.resolveAll(),r},t.loadProtosWithOptionsSync=function(e,t){const i=new n.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");a(i,t.includeDirs)}const r=i.loadSync(e,t);return r.resolveAll(),r},t.addCommonProtos=function(){const e=i(5434),t=i(3951),r=i(2939),s=i(6710);n.common("api",e.nested.google.nested.protobuf.nested),n.common("descriptor",t.nested.google.nested.protobuf.nested),n.common("source_context",r.nested.google.nested.protobuf.nested),n.common("type",s.nested.google.nested.protobuf.nested)}},3262:(e,t,i)=>{"use strict";var r,s,n=e.exports=i(3610),a=i(4529);n.codegen=i(8561),n.fetch=i(5212),n.path=i(9207),n.fs=n.inquire("fs"),n.toArray=function(e){if(e){for(var t=Object.keys(e),i=new Array(t.length),r=0;r<t.length;)i[r]=e[t[r++]];return i}return[]},n.toObject=function(e){for(var t={},i=0;i<e.length;){var r=e[i++],s=e[i++];void 0!==s&&(t[r]=s)}return t};var o=/\\/g,l=/"/g;n.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},n.safeProp=function(e){return!/^[$\w_]+$/.test(e)||n.isReserved(e)?'["'+e.replace(o,"\\\\").replace(l,'\\"')+'"]':"."+e},n.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;n.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,function(e,t){return t.toUpperCase()})},n.compareFieldsById=function(e,t){return e.id-t.id},n.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(n.decorateRoot.remove(e.$type),e.$type.name=t,n.decorateRoot.add(e.$type)),e.$type;r||(r=i(7882));var s=new r(t||e.name);return n.decorateRoot.add(s),s.ctor=e,Object.defineProperty(e,"$type",{value:s,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:s,enumerable:!1}),s};var d=0;n.decorateEnum=function(e){if(e.$type)return e.$type;s||(s=i(5643));var t=new s("Enum"+d++,e);return n.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},n.setProperty=function(e,t,i,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,i,s){var n=i.shift();if("__proto__"===n||"prototype"===n)return t;if(i.length>0)t[n]=e(t[n]||{},i,s);else{var a=t[n];if(a&&r)return t;a&&(s=[].concat(a).concat(s)),t[n]=s}return t}(e,t=t.split("."),i)},Object.defineProperty(n,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(i(5330)))}})},3449:(e,t,i)=>{"use strict";e.exports=u;var r,s=i(3610),n=s.LongBits,a=s.base64,o=s.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function c(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return s.Buffer?function(){return(u.create=function(){return new r})()}:function(){return new u}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function g(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}u.create=h(),u.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(u.alloc=s.pool(u.alloc,s.Array.prototype.subarray)),u.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(m,10,n.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=n.from(e);return this._push(m,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(m,t.length(),t)},u.prototype.bool=function(e){return this._push(p,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=n.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var v=s.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var i=u.alloc(t=a.length(e));a.decode(e,i,0),e=i}return this.uint32(t)._push(v,t,e)},u.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(p,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new l(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},u._configure=function(e){r=e,u.create=h(),r._configure()}},3529:function(e,t,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=r(e),a=0;a<i.length;a++)"default"!==i[a]&&s(t,e,i[a]);return n(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.IdbManager=void 0;const o=a(i(5317)),l=a(i(6982)),c=a(i(1943)),d=a(i(9896)),u=a(i(674)),h=a(i(6340)),p=a(i(5692)),f=a(i(6928)),m=i(9023),g=a(i(1398)),v=(0,m.promisify)(o.execFile),y="1.1.8",b="idb_companion",S="7d6e854dbc0f47243fc26644f5deb586618bd86a31aaf1b933c7b64a84cc56f7",C=`https://github.com/facebook/idb/releases/download/v${y}/idb-companion.universal.tar.gz`,_="3b72cc6a9a5b1a22a188205a84090d3a294347a846180efd755cf1a3c848e3e7";t.IdbManager=class{constructor(e,t,i){this.logger=e,this.globalStoragePath=t,this.extensionPath=i,this.status="not_installed",this.idbPath=null,this.companionProcess=null,this.grpcClient=null,this.grpcSocketPath=null,this.downloadPromise=null,this.currentDeviceUdid=null,this.protoPath=f.join(i,"resources","idb.proto")}getStatus(){return this.status}async ensureInstalled(){if("ready"===this.status&&this.idbPath)return!0;if(this.downloadPromise)return await this.downloadPromise,"ready"===this.status;const e=this.getFixedBinaryPath();if(await this.fileExists(e))return this.logger.info("Using fixed idb_companion with video streaming support"),this.idbPath=e,this.status="ready",!0;this.downloadPromise=this.downloadFixedIdbCompanion();try{if(await this.downloadPromise,"ready"===this.status)return!0}catch(e){this.logger.warn("Failed to download fixed idb_companion, trying original",e)}finally{this.downloadPromise=null}const t=await this.findSystemIdb();if(t)return this.logger.info("Using system idb_companion (video streaming may not work)"),this.idbPath=t,this.status="ready",!0;const i=this.getCachedBinaryPath();if(await this.fileExists(i))return this.logger.info("Using cached idb_companion (video streaming may not work)"),this.idbPath=i,this.status="ready",!0;this.downloadPromise=this.downloadIdbCompanion();try{return await this.downloadPromise,"ready"===this.status}finally{this.downloadPromise=null}}getFixedBinaryPath(){return f.join(this.globalStoragePath,"idb","fixed","bin",b)}getFixedExtractDir(){return f.join(this.globalStoragePath,"idb","fixed")}async downloadFixedIdbCompanion(){this.status="downloading";const e=this.getFixedExtractDir();try{await c.mkdir(e,{recursive:!0});const t=f.join(e,"idb_companion_fixed.tar.gz");await g.window.withProgress({location:g.ProgressLocation.Notification,title:"iOS Simulator: Downloading fixed idb_companion (video streaming support)...",cancellable:!1},async i=>{await this.downloadFile("https://github.com/anysphere/idb/releases/download/v1.1.8-fixed-stream/idb-companion-fixed-video-stream.tar.gz",t,e=>{i.report({increment:e})}),i.report({message:"Verifying checksum..."});const r=await this.computeFileHash(t);if(r!==S)throw await c.unlink(t).catch(()=>{}),new Error(`Checksum verification failed for fixed idb_companion download. Expected: ${S}, Got: ${r}. The download may have been corrupted or tampered with.`);i.report({message:"Extracting..."}),await this.extractTarball(t,e),await c.unlink(t).catch(()=>{});const s=this.getFixedBinaryPath();await c.chmod(s,493),this.idbPath=s,this.status="ready",this.logger.info("Fixed idb_companion installed successfully with video streaming support")})}catch(e){throw this.status="error",this.logger.error("Failed to download fixed idb_companion",e),e}}async findSystemIdb(){const e=["/opt/homebrew/bin/idb_companion","/usr/local/bin/idb_companion"];for(const t of e)if(await this.fileExists(t))return t;try{const{stdout:e}=await v("which",["idb_companion"]),t=e.trim();if(t&&await this.fileExists(t))return t}catch{}return null}getCachedBinaryPath(){return f.join(this.globalStoragePath,"idb",y,"idb-companion.universal","bin",b)}async downloadIdbCompanion(){this.status="downloading";const e=f.join(this.globalStoragePath,"idb",y);try{await c.mkdir(e,{recursive:!0});const t=f.join(e,"idb_companion.tar.gz");await g.window.withProgress({location:g.ProgressLocation.Notification,title:"iOS Simulator: Downloading idb_companion...",cancellable:!1},async i=>{await this.downloadFile(C,t,e=>{i.report({increment:e})}),i.report({message:"Verifying checksum..."});const r=await this.computeFileHash(t);if(r!==_)throw await c.unlink(t).catch(()=>{}),new Error(`Checksum verification failed for idb_companion download. Expected: ${_}, Got: ${r}. The download may have been corrupted or tampered with.`);i.report({message:"Extracting..."}),await this.extractTarball(t,e),await c.unlink(t).catch(()=>{});const s=this.getCachedBinaryPath();await c.chmod(s,493),this.idbPath=s,this.status="ready"})}catch(e){throw this.status="error",this.logger.error("Failed to download idb_companion",e),e}}async computeFileHash(e){return new Promise((t,i)=>{const r=l.createHash("sha256"),s=d.createReadStream(e);s.on("data",e=>{r.update(e)}),s.on("end",()=>{t(r.digest("hex"))}),s.on("error",e=>{i(e)})})}downloadFile(e,t,i){return new Promise((r,s)=>{const n=d.createWriteStream(t);let a=0;const o=e=>{p.get(e,e=>{if(301===e.statusCode||302===e.statusCode){if(e.resume(),a++,a>5)return n.close(),void s(new Error("Too many redirects"));const t=e.headers.location;if(t)return void o(t)}if(200!==e.statusCode)return n.close(),void s(new Error(`Failed to download: HTTP ${e.statusCode}`));const l=parseInt(e.headers["content-length"]||"0",10);let d=0,u=0;e.on("data",e=>{if(d+=e.length,l>0&&i){const e=Math.floor(d/l*100);e>u&&(i(e-u),u=e)}}),e.pipe(n),n.on("finish",()=>{n.close(),r()}),n.on("error",e=>{n.close(),c.unlink(t).catch(()=>{}),s(e)})}).on("error",e=>{n.close(),c.unlink(t).catch(()=>{}),s(e)})};o(e)})}async extractTarball(e,t){await v("tar",["-xzf",e,"-C",t])}async fileExists(e){try{return await c.access(e),!0}catch{return!1}}async ensureCompanionRunning(e){if(!this.idbPath)throw new Error("idb_companion not installed");if(this.companionProcess&&!this.companionProcess.killed&&this.currentDeviceUdid===e)return;await this.stopCompanion(),this.currentDeviceUdid=e;const t="/tmp/cursor-idb";await c.mkdir(t,{recursive:!0,mode:448});const i=l.randomBytes(8).toString("hex");this.grpcSocketPath=f.join(t,`${i}.sock`),await c.unlink(this.grpcSocketPath).catch(()=>{}),this.companionProcess=o.spawn(this.idbPath,["--udid",e,"--grpc-domain-sock",this.grpcSocketPath],{stdio:["ignore","pipe","pipe"],detached:!1,env:{...process.env,...process.env.DEVELOPER_DIR?{DEVELOPER_DIR:process.env.DEVELOPER_DIR}:{}}}),this.companionProcess.stderr?.on("data",e=>{const t=e.toString().trim();(t.includes("error")||t.includes("Error"))&&this.logger.warn("idb_companion stderr",t)}),this.companionProcess.on("error",e=>{this.logger.error("idb_companion spawn error",e),this.companionProcess=null,this.grpcClient=null}),this.companionProcess.on("exit",e=>{0!==e&&null!==e&&this.logger.warn("idb_companion exited with code",{code:e}),this.companionProcess=null,this.grpcClient=null}),await this.waitForCompanion(),await this.createGrpcClient()}async waitForCompanion(){if(!this.grpcSocketPath)throw new Error("gRPC socket path not set");for(let e=0;e<50;e++){await new Promise(e=>setTimeout(e,100));try{await c.access(this.grpcSocketPath);const e=await Promise.resolve().then(()=>a(i(9278)));if(await new Promise(t=>{const i=new e.Socket;i.setTimeout(200),i.on("connect",()=>{i.destroy(),t(!0)}),i.on("error",()=>{i.destroy(),t(!1)}),i.on("timeout",()=>{i.destroy(),t(!1)}),i.connect(this.grpcSocketPath)}))return}catch{}}throw new Error("Timeout waiting for idb_companion to start")}async createGrpcClient(){if(!this.grpcSocketPath)throw new Error("gRPC socket path not set");try{this.logger.info("Loading idb proto definition");const e=await h.load(this.protoPath,{keepCase:!0,longs:Number,enums:Number,defaults:!0,oneofs:!0});Object.keys(e).filter(e=>e.includes("Service")||e.includes("service")),this.logger.info(`Proto package definition keys: ${Object.keys(e).slice(0,20).join(", ")}`);const t=u.loadPackageDefinition(e);this.logger.info(`Proto descriptor keys: ${Object.keys(t).join(", ")}`);const i=t.idb;if(!i)throw this.logger.error(`idb package not found. Available: ${Object.keys(t).join(", ")}`),new Error("idb package not found in proto");if(this.logger.info(`idb package keys: ${Object.keys(i).join(", ")}`),!i.CompanionService)throw this.logger.error(`CompanionService not found in idb package. Available: ${Object.keys(i).join(", ")}`),new Error("CompanionService not found in proto");const r=i.CompanionService;this.logger.info("CompanionService is: "+typeof r),this.grpcClient=new i.CompanionService(`unix://${this.grpcSocketPath}`,u.credentials.createInsecure());const s=Object.getPrototypeOf(this.grpcClient),n=Object.getOwnPropertyNames(s).filter(e=>"constructor"!==e);this.logger.info(`gRPC client prototype methods: ${n.join(", ")}`)}catch(e){throw this.logger.error("Failed to create gRPC client",e),e}}async stopCompanion(){this.grpcClient&&(this.grpcClient.close(),this.grpcClient=null),this.companionProcess&&!this.companionProcess.killed&&(this.companionProcess.kill(),this.companionProcess=null),this.grpcSocketPath&&(await c.unlink(this.grpcSocketPath).catch(()=>{}),this.grpcSocketPath=null),this.currentDeviceUdid=null}async tap(e,t,i=0,r){try{await this.ensureInstalled();const s=r||await this.getBootedDeviceUdid();if(!s)return{success:!1,error:"No booted simulator found"};if(await this.ensureCompanionRunning(s),!this.grpcClient)return{success:!1,error:"gRPC client not available"};const n=[{press:{action:{touch:{point:{x:e,y:t}}},direction:"DOWN"}}];return i>0&&n.push({delay:{duration:i/1e3}}),n.push({press:{action:{touch:{point:{x:e,y:t}}},direction:"UP"}}),await this.sendHidEvents(n),{success:!0,x:e,y:t,method:"idb"}}catch(i){return this.logger.error("Tap failed",i),{success:!1,x:e,y:t,error:String(i)}}}async swipe(e,t,i,r,s=300,n){try{await this.ensureInstalled();const a=n||await this.getBootedDeviceUdid();return a?(await this.ensureCompanionRunning(a),this.grpcClient?(await this.sendHidEvents([{swipe:{start:{x:e,y:t},end:{x:i,y:r},delta:2,duration:Math.min(s,100)/1e3}}]),{success:!0,startX:e,startY:t,endX:i,endY:r,method:"idb"}):{success:!1,error:"gRPC client not available"}):{success:!1,error:"No booted simulator found"}}catch(s){return this.logger.error("Swipe failed",s),{success:!1,startX:e,startY:t,endX:i,endY:r,error:String(s)}}}async typeText(e,t){try{await this.ensureInstalled();const i=t||await this.getBootedDeviceUdid();if(!i)return{success:!1,error:"No booted simulator found"};if(await this.ensureCompanionRunning(i),!this.grpcClient)return{success:!1,error:"gRPC client not available"};const r=[],s=225;for(const t of e){const e=this.charToKeyCode(t);e&&(e.shift&&r.push({press:{action:{key:{keycode:s}},direction:"DOWN"}}),r.push({press:{action:{key:{keycode:e.keyCode}},direction:"DOWN"}}),r.push({press:{action:{key:{keycode:e.keyCode}},direction:"UP"}}),e.shift&&r.push({press:{action:{key:{keycode:s}},direction:"UP"}}))}return 0===r.length||await this.sendHidEvents(r),{success:!0,text:e,method:"idb"}}catch(t){return this.logger.error("Type failed",t),{success:!1,text:e,error:String(t)}}}charToKeyCode(e){const t=e;if(t>="a"&&t<="z")return{keyCode:t.charCodeAt(0)-"a".charCodeAt(0)+4,shift:!1};if(t>="A"&&t<="Z")return{keyCode:t.charCodeAt(0)-"A".charCodeAt(0)+4,shift:!0};if(t>="1"&&t<="9")return{keyCode:t.charCodeAt(0)-"1".charCodeAt(0)+30,shift:!1};if("0"===t)return{keyCode:39,shift:!1};const i={" ":{keyCode:44,shift:!1},"\n":{keyCode:40,shift:!1},"\t":{keyCode:43,shift:!1},"-":{keyCode:45,shift:!1},_:{keyCode:45,shift:!0},"=":{keyCode:46,shift:!1},"+":{keyCode:46,shift:!0},"[":{keyCode:47,shift:!1},"{":{keyCode:47,shift:!0},"]":{keyCode:48,shift:!1},"}":{keyCode:48,shift:!0},"\\":{keyCode:49,shift:!1},"|":{keyCode:49,shift:!0},";":{keyCode:51,shift:!1},":":{keyCode:51,shift:!0},"'":{keyCode:52,shift:!1},'"':{keyCode:52,shift:!0},"`":{keyCode:53,shift:!1},"~":{keyCode:53,shift:!0},",":{keyCode:54,shift:!1},"<":{keyCode:54,shift:!0},".":{keyCode:55,shift:!1},">":{keyCode:55,shift:!0},"/":{keyCode:56,shift:!1},"?":{keyCode:56,shift:!0},"!":{keyCode:30,shift:!0},"@":{keyCode:31,shift:!0},"#":{keyCode:32,shift:!0},$:{keyCode:33,shift:!0},"%":{keyCode:34,shift:!0},"^":{keyCode:35,shift:!0},"&":{keyCode:36,shift:!0},"*":{keyCode:37,shift:!0},"(":{keyCode:38,shift:!0},")":{keyCode:39,shift:!0}};return i[t]?i[t]:null}async pressKey(e,t){try{await this.ensureInstalled();const i=t||await this.getBootedDeviceUdid();if(!i)return{success:!1,error:"No booted simulator found"};if(await this.ensureCompanionRunning(i),!this.grpcClient)return{success:!1,error:"gRPC client not available"};const r=e.toLowerCase(),s={home:"HOME",lock:"LOCK",siri:"SIRI",sidebutton:"SIDE_BUTTON",applepay:"APPLE_PAY"}[r];if(void 0!==s)return await this.sendHidEvents([{press:{action:{button:{button:s}},direction:"DOWN"}},{press:{action:{button:{button:s}},direction:"UP"}}]),{success:!0,key:e,method:"idb"};const n={return:40,enter:40,tab:43,space:44,backspace:42,delete:42,escape:41,up:82,down:81,left:80,right:79,end:77,pageup:75,pagedown:78}[r];if(n)return await this.sendHidEvents([{press:{action:{key:{keycode:n}},direction:"DOWN"}},{press:{action:{key:{keycode:n}},direction:"UP"}}]),{success:!0,key:e,method:"idb"};if(1===e.length){const i=await this.typeText(e,t);return{success:i.success,key:e,method:i.method,error:i.error}}return{success:!1,key:e,error:"Unknown key"}}catch(t){return this.logger.error("Key press failed",t),{success:!1,key:e,error:String(t)}}}async getAccessibilityTree(e=4,t=24,i){try{await this.ensureInstalled();const r=i||await this.getBootedDeviceUdid();if(!r)return{error:"No booted simulator found"};if(await this.ensureCompanionRunning(r),!this.grpcClient)return{error:"gRPC client not available"};const s=await new Promise((e,t)=>{this.grpcClient.accessibility_info({format:"NESTED"},(i,r)=>{i?t(i):e(r)})}),n=JSON.parse(s.json),a=this.pruneAccessibilityTree(n,e,t);return{capturedAt:(new Date).toISOString(),tree:a}}catch(e){return this.logger.error("Accessibility snapshot failed",e),{error:String(e)}}}pruneAccessibilityTree(e,t,i,r=0){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.slice(0,i).map(e=>this.pruneAccessibilityTree(e,t,i,r));const s=e,n={};for(const[e,a]of Object.entries(s))if("children"!==e&&"AXChildren"!==e&&"elements"!==e||!Array.isArray(a))n[e]=a;else if(r>=t)a.length>0&&(n[e]=`[${a.length} children omitted - max depth reached]`);else{const s=a.slice(0,i);n[e]=s.map(e=>this.pruneAccessibilityTree(e,t,i,r+1)),a.length>i&&(n[`${e}_truncated`]=a.length-i+" more children omitted")}return n}async sendHidEvents(e){return new Promise((t,i)=>{const r=this.grpcClient.hid((e,r)=>{e?(this.logger.error("HID call error",e),i(e)):t()});r.on("error",e=>{this.logger.error("HID stream error",e)});for(const t of e)r.write(t);r.end()})}async getBootedDeviceUdid(){try{const{stdout:e}=await v("xcrun",["simctl","list","devices","--json"]),t=JSON.parse(e);for(const e of Object.values(t.devices))for(const t of e)if("Booted"===t.state)return t.udid}catch(e){this.logger.error("Failed to get booted device",e)}return null}async listDevices(){try{const{stdout:e}=await v("xcrun",["simctl","list","devices","--json"]),t=JSON.parse(e),i=[];for(const[e,r]of Object.entries(t.devices))for(const t of r)"Booted"===t.state&&i.push({...t,runtime:e});return i}catch(e){return this.logger.error("Failed to list devices",e),[]}}async listAllDevices(){try{const{stdout:e}=await v("xcrun",["simctl","list","devices","--json"]),t=JSON.parse(e),i=[];for(const[e,r]of Object.entries(t.devices))for(const t of r)!1!==t.isAvailable&&i.push({name:t.name,udid:t.udid,state:t.state,runtime:e});return i}catch(e){return this.logger.error("Failed to list all devices",e),[]}}async bootSimulator(e){try{return this.logger.info(`Booting simulator: ${e}`),await v("xcrun",["simctl","boot",e],{timeout:3e4}),await v("open",["-a","Simulator"]),{success:!0}}catch(e){const t=e instanceof Error?e.message:String(e);return t.includes("current state: Booted")?(this.logger.info("Simulator already booted"),{success:!0}):(this.logger.error("Failed to boot simulator",e),{success:!1,error:t})}}async bootFirstAvailableSimulator(){try{const e=await this.listAllDevices(),t=e.filter(e=>e.name.includes("iPhone")&&e.runtime.includes("iOS")).sort((e,t)=>t.name.localeCompare(e.name));if(0===t.length){const t=e.filter(e=>e.runtime.includes("iOS"));if(0===t.length)return{success:!1,error:"No iOS simulators available. Install simulators via Xcode."};const i=t[0];return{...await this.bootSimulator(i.udid),name:i.name,udid:i.udid}}const i=t[0];return{...await this.bootSimulator(i.udid),name:i.name,udid:i.udid}}catch(e){return this.logger.error("Failed to boot first available simulator",e),{success:!1,error:String(e)}}}async screenshot(e){try{await this.ensureInstalled();const t=e||await this.getBootedDeviceUdid();if(!t)return null;if(await this.ensureCompanionRunning(t),!this.grpcClient)return null;const i=Date.now(),r=await new Promise((e,t)=>{this.grpcClient.screenshot({},(i,r)=>{i?t(i):e(r)})}),s=Date.now()-i;return r.image_data&&0!==r.image_data.length?(this.logger.info(`idb screenshot: ${r.image_data.length} bytes, format=${r.image_format}, took ${s}ms`),{imageData:r.image_data,imageFormat:r.image_format||"png"}):(this.logger.warn("idb screenshot returned empty data"),null)}catch(e){return this.logger.warn("idb screenshot error",e),null}}async startVideoStream(e,t,i){try{await this.ensureInstalled();const r=i||await this.getBootedDeviceUdid();if(!r)return this.logger.warn("No booted device for video stream"),null;if(await this.ensureCompanionRunning(r),!this.grpcClient)return this.logger.warn("No gRPC client for video stream"),null;this.logger.info(`Starting video stream: fps=${e.fps??30}, format=${e.format??"mjpeg"}`);const s=this.grpcClient.video_stream();let n=!1,a=0;s.on("data",e=>{if(n)return;const i=e;if(0===a){const e=Object.keys(i);this.logger.info(`Video stream response keys: ${e.join(", ")}`);for(const t of e){const e=i[t];if(e&&"object"==typeof e){const i=Object.keys(e);this.logger.info(`  ${t} keys: ${i.join(", ")}`)}else Buffer.isBuffer(e)?this.logger.info(`  ${t}: Buffer(${e.length})`):this.logger.info(`  ${t}: ${typeof e}`)}}let r;if(i.payload&&"object"==typeof i.payload){const e=i.payload;if(Buffer.isBuffer(e.data))r=e.data;else if(e.source&&"object"==typeof e.source){const t=e.source;Buffer.isBuffer(t.data)&&(r=t.data)}}!r&&Buffer.isBuffer(i.data)&&(r=i.data),r&&r.length>0?(a++,1===a&&this.logger.info(`First video frame received: ${r.length} bytes`),a%100==0&&this.logger.info(`Video stream: ${a} frames received`),t(r)):i.log_output&&Buffer.isBuffer(i.log_output)&&this.logger.info(`Video stream log: ${i.log_output.toString()}`)}),s.on("error",e=>{n||this.logger.warn("Video stream error",e)}),s.on("end",()=>{this.logger.info(`Video stream ended after ${a} frames`)});const o={h264:0,mjpeg:2},l={start:{fps:e.fps??30,format:o[e.format??"mjpeg"]??2,compression_quality:e.quality??.5,scale_factor:e.scale??1}};return s.write(l),{stop:()=>{n||(n=!0,s.write({stop:{}}),s.end())}}}catch(e){return this.logger.error("Failed to start video stream",e),null}}async dispose(){await this.stopCompanion()}}},3610:function(e,t,i){"use strict";var r=t;function s(e,t,i){for(var r=Object.keys(t),s=0;s<r.length;++s)void 0!==e[r[s]]&&i||(e[r[s]]=t[r[s]]);return e}function n(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&s(this,i)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}r.asPromise=i(8045),r.base64=i(8839),r.EventEmitter=i(4358),r.float=i(9410),r.inquire=i(4153),r.utf8=i(1447),r.pool=i(9390),r.LongBits=i(2239),r.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var i=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},r.merge=s,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=n,r.ProtocolError=n("ProtocolError"),r.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},r.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},3653:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;const r=i(7434),s=i(8899);t.ChannelImplementation=class{constructor(e,t,i){if("string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof r.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(i&&"object"!=typeof i)throw new TypeError("Channel options must be an object");this.internalChannel=new s.InternalChannel(e,t,i)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,i){this.internalChannel.watchConnectivityState(e,t,i)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,i,r,s){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,i,r,s)}}},3822:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUri=function(e){const t=i.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}},t.splitHostPort=function(e){if(e.startsWith("[")){const t=e.indexOf("]");if(-1===t)return null;const i=e.substring(1,t);if(-1===i.indexOf(":"))return null;if(e.length>t+1){if(":"===e[t+1]){const s=e.substring(t+2);return r.test(s)?{host:i,port:+s}:null}return null}return{host:i}}{const t=e.split(":");return 2===t.length?r.test(t[1])?{host:t[0],port:+t[1]}:null:{host:e}}},t.combineHostPort=function(e){return void 0===e.port?e.host:e.host.includes(":")?`[${e.host}]:${e.port}`:`${e.host}:${e.port}`},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path,t};const i=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/,r=/^\d+$/},3951:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"edition":"proto2","fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}},"extensions":[[536000000,536000000]]},"Edition":{"edition":"proto2","values":{"EDITION_UNKNOWN":0,"EDITION_LEGACY":900,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10},"weakDependency":{"rule":"repeated","type":"int32","id":11},"optionDependency":{"rule":"repeated","type":"string","id":15},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10},"visibility":{"type":"SymbolVisibility","id":11}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"edition":"proto2","fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5},"visibility":{"type":"SymbolVisibility","id":6}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"edition":"proto2","fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38],"php_generic_services"],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"edition":"proto2","fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"edition":"proto2","fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"unverifiedLazy":{"type":"bool","id":15},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10,"options":{"deprecated":true}},"debugRedact":{"type":"bool","id":16},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"featureSupport":{"type":"FeatureSupport","id":22},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}},"FeatureSupport":{"fields":{"editionIntroduced":{"type":"Edition","id":1},"editionDeprecated":{"type":"Edition","id":2},"deprecationWarning":{"type":"string","id":3},"editionRemoved":{"type":"Edition","id":4}}}}},"OneofOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"edition":"proto2","fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":1},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3},"featureSupport":{"type":"FieldOptions.FeatureSupport","id":4},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":33},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"edition":"proto2","fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"edition":"proto2","fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},"enforceNamingStyle":{"type":"EnforceNamingStyle","id":7,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},"defaultSymbolVisibility":{"type":"VisibilityFeature.DefaultSymbolVisibility","id":8,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},"extensions":[[1000,9994],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}},"EnforceNamingStyle":{"values":{"ENFORCE_NAMING_STYLE_UNKNOWN":0,"STYLE2024":1,"STYLE_LEGACY":2}},"VisibilityFeature":{"fields":{},"reserved":[[1,536870911]],"nested":{"DefaultSymbolVisibility":{"values":{"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN":0,"EXPORT_ALL":1,"EXPORT_TOP_LEVEL":2,"LOCAL_ALL":3,"STRICT":4}}}}}},"FeatureSetDefaults":{"edition":"proto2","fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"overridableFeatures":{"type":"FeatureSet","id":4},"fixedFeatures":{"type":"FeatureSet","id":5}},"reserved":[[1,1],[2,2],"features"]}}},"SourceCodeInfo":{"edition":"proto2","fields":{"location":{"rule":"repeated","type":"Location","id":1}},"extensions":[[536000000,536000000]],"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"span":{"rule":"repeated","type":"int32","id":2,"options":{"packed":true}},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"edition":"proto2","fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"SymbolVisibility":{"edition":"proto2","values":{"VISIBILITY_UNSET":0,"VISIBILITY_LOCAL":1,"VISIBILITY_EXPORT":2}}}}}}}}')},3952:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0,t.getInterceptingCall=function(e,t,i,r){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let s=[];s=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);const n=Object.assign({},i,{method_definition:t}),a=s.reduceRight((e,t)=>i=>t(i,e),e=>function(e,t,i){const r=function(e,t,i){var r,s;const n=null!==(r=i.deadline)&&void 0!==r?r:1/0,a=i.host,o=null!==(s=i.parent)&&void 0!==s?s:null,l=i.propagate_flags,c=i.credentials,d=e.createCall(t,n,a,o,l);return c&&d.setCredentials(c),d}(e,i.path,t);return i.responseStream?new h(r,i):new u(r,i)}(r,e,t));return a(n)};const r=i(4097),s=i(5034),n=i(131),a=i(9752);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o,t.ListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}},t.RequesterBuilder=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};const l={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},c={start:(e,t,i)=>{i(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};t.InterceptingCall=class{constructor(e,t){var i,r,s,n;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,this.requester=t?{start:null!==(i=t.start)&&void 0!==i?i:c.start,sendMessage:null!==(r=t.sendMessage)&&void 0!==r?r:c.sendMessage,halfClose:null!==(s=t.halfClose)&&void 0!==s?s:c.halfClose,cancel:null!==(n=t.cancel)&&void 0!==n?n:c.cancel}:c}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var i,r,n,a,o,c;const d={onReceiveMetadata:null!==(r=null===(i=null==t?void 0:t.onReceiveMetadata)||void 0===i?void 0:i.bind(t))&&void 0!==r?r:e=>{},onReceiveMessage:null!==(a=null===(n=null==t?void 0:t.onReceiveMessage)||void 0===n?void 0:n.bind(t))&&void 0!==a?a:e=>{},onReceiveStatus:null!==(c=null===(o=null==t?void 0:t.onReceiveStatus)||void 0===o?void 0:o.bind(t))&&void 0!==c?c:e=>{}};this.processingMetadata=!0,this.requester.start(e,d,(e,t)=>{var i,r,n;let a;if(this.processingMetadata=!1,(0,s.isInterceptingListener)(t))a=t;else{const e={onReceiveMetadata:null!==(i=t.onReceiveMetadata)&&void 0!==i?i:l.onReceiveMetadata,onReceiveMessage:null!==(r=t.onReceiveMessage)&&void 0!==r?r:l.onReceiveMessage,onReceiveStatus:null!==(n=t.onReceiveStatus)&&void 0!==n?n:l.onReceiveStatus};a=new s.InterceptingListenerImpl(e,d)}this.nextCall.start(e,a),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,i=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,i),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}getAuthContext(){return this.nextCall.getAuthContext()}};class d{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let i;try{i=this.methodDefinition.requestSerialize(t)}catch(e){return void this.call.cancelWithStatus(n.Status.INTERNAL,`Request message serialization failure: ${(0,a.getErrorMessage)(e)}`)}this.call.sendMessageWithContext(e,i)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let i=null;this.call.start(e,{onReceiveMetadata:e=>{var i;null===(i=null==t?void 0:t.onReceiveMetadata)||void 0===i||i.call(t,e)},onReceiveMessage:e=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){return i={code:n.Status.INTERNAL,details:`Response message parsing error: ${(0,a.getErrorMessage)(e)}`,metadata:new r.Metadata},void this.call.cancelWithStatus(i.code,i.details)}null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s||s.call(t,o)},onReceiveStatus:e=>{var r,s;i?null===(r=null==t?void 0:t.onReceiveStatus)||void 0===r||r.call(t,i):null===(s=null==t?void 0:t.onReceiveStatus)||void 0===s||s.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}getAuthContext(){return this.call.getAuthContext()}}class u extends d{constructor(e,t){super(e,t)}start(e,t){var i,r;let s=!1;const n={onReceiveMetadata:null!==(r=null===(i=null==t?void 0:t.onReceiveMetadata)||void 0===i?void 0:i.bind(t))&&void 0!==r?r:e=>{},onReceiveMessage:e=>{var i;s=!0,null===(i=null==t?void 0:t.onReceiveMessage)||void 0===i||i.call(t,e)},onReceiveStatus:e=>{var i,r;s||null===(i=null==t?void 0:t.onReceiveMessage)||void 0===i||i.call(t,null),null===(r=null==t?void 0:t.onReceiveStatus)||void 0===r||r.call(t,e)}};super.start(e,n),this.call.startRead()}}class h extends d{}},3956:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;const r=i(131),s=i(267);class n{constructor(e,t){this.callback=e,this.initialDelay=1e3,this.multiplier=1.6,this.maxDelay=12e4,this.jitter=.2,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,this.id=n.getNextId(),t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}static getNextId(){return this.nextId++}trace(e){s.trace(r.LogVerbosity.DEBUG,"backoff","{"+this.id+"} "+e)}runTimer(e){var t,i;this.trace("runTimer(delay="+e+")"),this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+e),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.trace("timer fired"),this.running=!1,this.callback()},e),this.hasRef||null===(i=(t=this.timerId).unref)||void 0===i||i.call(t)}runOnce(){this.trace("runOnce()"),this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;var i,r;this.nextDelay=e+(i=-t,r=t,Math.random()*(r-i)+i)}stop(){this.trace("stop()"),clearTimeout(this.timerId),this.running=!1}reset(){if(this.trace("reset() running="+this.running),this.nextDelay=this.initialDelay,this.running){const e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=n,n.nextId=0},4056:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeClientConstructor=a,t.loadPackageDefinition=function(e){const t={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i],s=i.split(".");if(s.some(e=>n(e)))continue;const l=s[s.length-1];let c=t;for(const e of s.slice(0,-1))c[e]||(c[e]={}),c=c[e];o(r)?c[l]=r:c[l]=a(r,l,{})}return t};const r=i(5563),s={unary:r.Client.prototype.makeUnaryRequest,server_stream:r.Client.prototype.makeServerStreamRequest,client_stream:r.Client.prototype.makeClientStreamRequest,bidi:r.Client.prototype.makeBidiStreamRequest};function n(e){return["__proto__","prototype","constructor"].includes(e)}function a(e,t,i){i||(i={});class a extends r.Client{}return Object.keys(e).forEach(t=>{if(n(t))return;const i=e[t];let r;if("string"==typeof t&&"$"===t.charAt(0))throw new Error("Method names cannot start with $");r=i.requestStream?i.responseStream?"bidi":"client_stream":i.responseStream?"server_stream":"unary";const o=i.requestSerialize,l=i.responseDeserialize,c=function(e,t,i,r){return function(...s){return e.call(this,t,i,r,...s)}}(s[r],i.path,o,l);a.prototype[t]=c,Object.assign(a.prototype[t],i),i.originalName&&!n(i.originalName)&&(a.prototype[i.originalName]=a.prototype[t])}),a.service=e,a.serviceName=t,a}function o(e){return"format"in e}},4097:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const r=i(267),s=i(131),n=i(9752),a=/^[:0-9a-z_.-]+$/,o=/^[ -~]*$/;function l(e){return e.endsWith("-bin")}function c(e){return!e.startsWith("grpc-")}function d(e){return e.toLowerCase()}function u(e,t){if(!function(e){return a.test(e)}(e))throw new Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(l(e)){if(!Buffer.isBuffer(t))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw new Error("keys that don't end with '-bin' must have String values");if(!function(e){return o.test(e)}(t))throw new Error('Metadata string value "'+t+'" contains illegal characters')}}class h{constructor(e={}){this.internalRepr=new Map,this.opaqueData=new Map,this.options=e}set(e,t){u(e=d(e),t),this.internalRepr.set(e,[t])}add(e,t){u(e=d(e),t);const i=this.internalRepr.get(e);void 0===i?this.internalRepr.set(e,[t]):i.push(t)}remove(e){e=d(e),this.internalRepr.delete(e)}get(e){return e=d(e),this.internalRepr.get(e)||[]}getMap(){const e={};for(const[t,i]of this.internalRepr)if(i.length>0){const r=i[0];e[t]=Buffer.isBuffer(r)?Buffer.from(r):r}return e}clone(){const e=new h(this.options),t=e.internalRepr;for(const[e,i]of this.internalRepr){const r=i.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,r)}return e}merge(e){for(const[t,i]of e.internalRepr){const e=(this.internalRepr.get(t)||[]).concat(i);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};for(const[t,i]of this.internalRepr)t.startsWith(":")||(e[t]=i.map(p));return e}toJSON(){const e={};for(const[t,i]of this.internalRepr)e[t]=i;return e}setOpaque(e,t){this.opaqueData.set(e,t)}getOpaque(e){return this.opaqueData.get(e)}static fromHttp2Headers(e){const t=new h;for(const i of Object.keys(e)){if(":"===i.charAt(0))continue;const a=e[i];try{l(i)?Array.isArray(a)?a.forEach(e=>{t.add(i,Buffer.from(e,"base64"))}):void 0!==a&&(c(i)?a.split(",").forEach(e=>{t.add(i,Buffer.from(e.trim(),"base64"))}):t.add(i,Buffer.from(a,"base64"))):Array.isArray(a)?a.forEach(e=>{t.add(i,e)}):void 0!==a&&t.add(i,a)}catch(e){const t=`Failed to add metadata entry ${i}: ${a}. ${(0,n.getErrorMessage)(e)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,r.log)(s.LogVerbosity.ERROR,t)}}return t}}t.Metadata=h;const p=e=>Buffer.isBuffer(e)?e.toString("base64"):e},4117:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WeightedRoundRobinLoadBalancingConfig=void 0,t.setup=function(){(0,a.registerLoadBalancerType)(f,b,v)};const r=i(463),s=i(131),n=i(4700),a=i(8923),o=i(6486),l=i(267),c=i(2921),d=i(178),u=i(222),h=i(8996);function p(e){l.trace(s.LogVerbosity.DEBUG,"weighted_round_robin",e)}const f="weighted_round_robin";function m(e,t,i){if(t in e&&void 0!==e[t]&&typeof e[t]!==i)throw new Error(`weighted round robin config ${t} parse error: expected ${i}, got ${typeof e[t]}`)}function g(e,t){if(t in e&&void 0!==e[t]&&null!==e[t]){let i;if((0,n.isDuration)(e[t]))i=e[t];else if((0,n.isDurationMessage)(e[t]))i=(0,n.durationMessageToDuration)(e[t]);else{if("string"!=typeof e[t])throw new Error(`weighted round robin config ${t}: expected duration, got ${typeof e[t]}`);{const r=(0,n.parseDuration)(e[t]);if(!r)throw new Error(`weighted round robin config ${t}: failed to parse duration string ${e[t]}`);i=r}}return(0,n.durationToMs)(i)}return null}class v{constructor(e,t,i,r,s,n){this.enableOobLoadReport=null!=e&&e,this.oobLoadReportingPeriodMs=null!=t?t:1e4,this.blackoutPeriodMs=null!=i?i:1e4,this.weightExpirationPeriodMs=null!=r?r:18e4,this.weightUpdatePeriodMs=Math.max(null!=s?s:1e3,100),this.errorUtilizationPenalty=null!=n?n:1}getLoadBalancerName(){return f}toJsonObject(){return{enable_oob_load_report:this.enableOobLoadReport,oob_load_reporting_period:(0,n.durationToString)((0,n.msToDuration)(this.oobLoadReportingPeriodMs)),blackout_period:(0,n.durationToString)((0,n.msToDuration)(this.blackoutPeriodMs)),weight_expiration_period:(0,n.durationToString)((0,n.msToDuration)(this.weightExpirationPeriodMs)),weight_update_period:(0,n.durationToString)((0,n.msToDuration)(this.weightUpdatePeriodMs)),error_utilization_penalty:this.errorUtilizationPenalty}}static createFromJson(e){if(m(e,"enable_oob_load_report","boolean"),m(e,"error_utilization_penalty","number"),e.error_utilization_penalty<0)throw new Error("weighted round robin config error_utilization_penalty < 0");return new v(e.enable_oob_load_report,g(e,"oob_load_reporting_period"),g(e,"blackout_period"),g(e,"weight_expiration_period"),g(e,"weight_update_period"),e.error_utilization_penalty)}getEnableOobLoadReport(){return this.enableOobLoadReport}getOobLoadReportingPeriodMs(){return this.oobLoadReportingPeriodMs}getBlackoutPeriodMs(){return this.blackoutPeriodMs}getWeightExpirationPeriodMs(){return this.weightExpirationPeriodMs}getWeightUpdatePeriodMs(){return this.weightUpdatePeriodMs}getErrorUtilizationPenalty(){return this.errorUtilizationPenalty}}t.WeightedRoundRobinLoadBalancingConfig=v;class y{constructor(e,t){this.metricsHandler=t,this.queue=new u.PriorityQueue((e,t)=>e.deadline<t.deadline);const i=e.filter(e=>e.weight>0);let r;if(i.length<2)r=1;else{let e=0;for(const{weight:t}of i)e+=t;r=e/i.length}for(const t of e){const e=t.weight>0?1/t.weight:r;this.queue.push({endpointName:t.endpointName,picker:t.picker,period:e,deadline:Math.random()*e})}}pick(e){const t=this.queue.pop();this.queue.push(Object.assign(Object.assign({},t),{deadline:t.deadline+t.period}));const i=t.picker.pick(e);if(i.pickResultType===d.PickResultType.COMPLETE){if(this.metricsHandler)return Object.assign(Object.assign({},i),{onCallEnded:(0,c.createMetricsReader)(e=>this.metricsHandler(e,t.endpointName),i.onCallEnded)});{const e=i.subchannel;return Object.assign(Object.assign({},i),{subchannel:e.getWrappedSubchannel()})}}return i}}class b{constructor(e){this.channelControlHelper=e,this.latestConfig=null,this.children=new Map,this.currentState=r.ConnectivityState.IDLE,this.updatesPaused=!1,this.lastError=null,this.weightUpdateTimer=null}countChildrenWithState(e){let t=0;for(const i of this.children.values())i.child.getConnectivityState()===e&&(t+=1);return t}updateWeight(e,t){var i,r;const s=t.rps_fractional;let n=t.application_utilization;n>0&&s>0&&(n+=t.eps/s*(null!==(r=null===(i=this.latestConfig)||void 0===i?void 0:i.getErrorUtilizationPenalty())&&void 0!==r?r:0));const a=0===n?0:s/n;if(0===a)return;const o=new Date;null===e.nonEmptySince&&(e.nonEmptySince=o),e.lastUpdated=o,e.weight=a}getWeight(e){if(!this.latestConfig)return 0;const t=(new Date).getTime();if(t-e.lastUpdated.getTime()>=this.latestConfig.getWeightExpirationPeriodMs())return e.nonEmptySince=null,0;const i=this.latestConfig.getBlackoutPeriodMs();return i>0&&(null===e.nonEmptySince||t-e.nonEmptySince.getTime()<i)?0:e.weight}calculateAndUpdateState(){if(!this.updatesPaused&&this.latestConfig){if(this.countChildrenWithState(r.ConnectivityState.READY)>0){const e=[];for(const[t,i]of this.children)i.child.getConnectivityState()===r.ConnectivityState.READY&&e.push({endpointName:t,picker:i.child.getPicker(),weight:this.getWeight(i)});let t;p("Created picker with weights: "+e.map(e=>e.endpointName+":"+e.weight).join(",")),t=this.latestConfig.getEnableOobLoadReport()?null:(e,t)=>{const i=this.children.get(t);i&&this.updateWeight(i,e)},this.updateState(r.ConnectivityState.READY,new y(e,t),null)}else if(this.countChildrenWithState(r.ConnectivityState.CONNECTING)>0)this.updateState(r.ConnectivityState.CONNECTING,new d.QueuePicker(this),null);else if(this.countChildrenWithState(r.ConnectivityState.TRANSIENT_FAILURE)>0){const e=`weighted_round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(r.ConnectivityState.TRANSIENT_FAILURE,new d.UnavailablePicker({details:e}),e)}else this.updateState(r.ConnectivityState.IDLE,new d.QueuePicker(this),null);for(const{child:e}of this.children.values())e.getConnectivityState()===r.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,t,i){p(r.ConnectivityState[this.currentState]+" -> "+r.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t,i)}updateAddressList(e,t,i,s){var n,l;if(!(t instanceof v))return!1;if(!e.ok)return 0===this.children.size&&this.updateState(r.ConnectivityState.TRANSIENT_FAILURE,new d.UnavailablePicker(e.error),e.error.details),!0;if(0===e.value.length){const e=`No addresses resolved. Resolution note: ${s}`;return this.updateState(r.ConnectivityState.TRANSIENT_FAILURE,new d.UnavailablePicker({details:e}),e),!1}p("Connect to endpoint list "+e.value.map(h.endpointToString));const u=new Date,f=new Set;this.updatesPaused=!0,this.latestConfig=t;for(const n of e.value){const e=(0,h.endpointToString)(n);f.add(e);let l=this.children.get(e);l||(l={child:new o.LeafLoadBalancer(n,(0,a.createChildChannelControlHelper)(this.channelControlHelper,{updateState:(e,t,i)=>{this.currentState===r.ConnectivityState.READY&&e!==r.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),e===r.ConnectivityState.READY&&(l.nonEmptySince=null),i&&(this.lastError=i),this.calculateAndUpdateState()},createSubchannel:(e,t)=>{const i=this.channelControlHelper.createSubchannel(e,t);return(null==l?void 0:l.oobMetricsListener)?new c.OrcaOobMetricsSubchannelWrapper(i,l.oobMetricsListener,this.latestConfig.getOobLoadReportingPeriodMs()):i}}),i,s),lastUpdated:u,nonEmptySince:null,weight:0,oobMetricsListener:null},this.children.set(e,l)),t.getEnableOobLoadReport()?l.oobMetricsListener=e=>{this.updateWeight(l,e)}:l.oobMetricsListener=null}for(const[e,t]of this.children)f.has(e)?t.child.startConnecting():(t.child.destroy(),this.children.delete(e));return this.updatesPaused=!1,this.calculateAndUpdateState(),this.weightUpdateTimer&&clearInterval(this.weightUpdateTimer),this.weightUpdateTimer=null===(l=(n=setInterval(()=>{this.currentState===r.ConnectivityState.READY&&this.calculateAndUpdateState()},t.getWeightUpdatePeriodMs())).unref)||void 0===l?void 0:l.call(n),!0}exitIdle(){}resetBackoff(){}destroy(){for(const e of this.children.values())e.child.destroy();this.children.clear(),this.weightUpdateTimer&&clearInterval(this.weightUpdateTimer)}getTypeName(){return f}}},4153:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},4358:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this}},4394:(e,t,i)=>{"use strict";var r=t;function s(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=i(3449),r.BufferWriter=i(818),r.Reader=i(6237),r.BufferReader=i(3158),r.util=i(3610),r.rpc=i(5047),r.roots=i(4529),r.configure=s,s()},4434:e=>{"use strict";e.exports=require("events")},4442:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>R});var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function s(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function n(e){return!0===(e&&e.__isLong__)}function a(e){var t=Math.clz32(e&-e);return e?31-t:t}s.prototype.__isLong__,Object.defineProperty(s.prototype,"__isLong__",{value:!0}),s.isLong=n;var o={},l={};function c(e,t){var i,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=l[e])?r:(i=u(e,0,!0),s&&(l[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(i=u(e,e<0?-1:0,!1),s&&(o[e]=i),i)}function d(e,t){if(isNaN(e))return t?S:b;if(t){if(e<0)return S;if(e>=g)return w}else{if(e<=-v)return k;if(e+1>=v)return E}return e<0?d(-e,t).neg():u(e%m|0,e/m|0,t)}function u(e,t,i){return new s(e,t,i)}s.fromInt=c,s.fromNumber=d,s.fromBits=u;var h=Math.pow;function p(e,t,i){if(0===e.length)throw Error("empty string");if("number"==typeof t?(i=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?S:b;if((i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return p(e.substring(1),t,i).neg();for(var s=d(h(i,8)),n=b,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+o),i);if(o<8){var c=d(h(i,o));n=n.mul(c).add(d(l))}else n=(n=n.mul(s)).add(d(l))}return n.unsigned=t,n}function f(e,t){return"number"==typeof e?d(e,t):"string"==typeof e?p(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}s.fromString=p,s.fromValue=f;var m=4294967296,g=m*m,v=g/2,y=c(1<<24),b=c(0);s.ZERO=b;var S=c(0,!0);s.UZERO=S;var C=c(1);s.ONE=C;var _=c(1,!0);s.UONE=_;var T=c(-1);s.NEG_ONE=T;var E=u(-1,2147483647,!1);s.MAX_VALUE=E;var w=u(-1,-1,!0);s.MAX_UNSIGNED_VALUE=w;var k=u(0,-2147483648,!1);s.MIN_VALUE=k;var O=s.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},O.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=d(e),i=this.div(t),r=i.mul(t).sub(this);return i.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=d(h(e,6),this.unsigned),n=this,a="";;){var o=n.div(s),l=(n.sub(o.mul(s)).toInt()>>>0).toString(e);if((n=o).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},O.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&!(0===this.low&&-2097152===this.high)},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return!(1&~this.low)},O.isEven=function(){return!(1&this.low)},O.equals=function(e){return n(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},O.eq=O.equals,O.notEquals=function(e){return!this.eq(e)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(e){return this.comp(e)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(e){return this.comp(e)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(e){return this.comp(e)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(e){return this.comp(e)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(e){if(n(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(C)},O.neg=O.negate,O.add=function(e){n(e)||(e=f(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,s=65535&this.low,a=e.high>>>16,o=65535&e.high,l=e.low>>>16,c=0,d=0,h=0,p=0;return h+=(p+=s+(65535&e.low))>>>16,d+=(h+=r+l)>>>16,c+=(d+=i+o)>>>16,c+=t+a,u((h&=65535)<<16|(p&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},O.subtract=function(e){return n(e)||(e=f(e)),this.add(e.neg())},O.sub=O.subtract,O.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=f(e)),r)return u(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return this.unsigned?S:b;if(this.eq(k))return e.isOdd()?k:b;if(e.eq(k))return this.isOdd()?k:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return d(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,i=65535&this.high,s=this.low>>>16,a=65535&this.low,o=e.high>>>16,l=65535&e.high,c=e.low>>>16,h=65535&e.low,p=0,m=0,g=0,v=0;return g+=(v+=a*h)>>>16,m+=(g+=s*h)>>>16,g&=65535,m+=(g+=a*c)>>>16,p+=(m+=i*h)>>>16,m&=65535,p+=(m+=s*c)>>>16,m&=65535,p+=(m+=a*l)>>>16,p+=t*h+i*c+s*l+a*o,u((g&=65535)<<16|(v&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(e){if(n(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,i,s;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?S:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return S;if(e.gt(this.shru(1)))return _;s=S}else{if(this.eq(k))return e.eq(C)||e.eq(T)?k:e.eq(k)?C:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?C:T:(i=this.sub(e.mul(t)),s=t.add(i.div(e)));if(e.eq(k))return this.unsigned?S:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=b}for(i=this;i.gte(e);){t=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),o=a<=48?1:h(2,a-48),l=d(t),c=l.mul(e);c.isNegative()||c.gt(i);)c=(l=d(t-=o,this.unsigned)).mul(e);l.isZero()&&(l=C),s=s.add(l),i=i.sub(c)}return s},O.div=O.divide,O.modulo=function(e){return n(e)||(e=f(e)),r?u((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return u(~this.low,~this.high,this.unsigned)},O.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},O.clz=O.countLeadingZeros,O.countTrailingZeros=function(){return this.low?a(this.low):a(this.high)+32},O.ctz=O.countTrailingZeros,O.and=function(e){return n(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},O.or=function(e){return n(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},O.xor=function(e){return n(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},O.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},O.rotl=O.rotateLeft,O.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},O.rotr=O.rotateRight,O.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},O.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},O.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},s.fromBytes=function(e,t,i){return i?s.fromBytesLE(e,t):s.fromBytesBE(e,t)},s.fromBytesLE=function(e,t){return new s(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},s.fromBytesBE=function(e,t){return new s(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(s.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},s.fromValue=function(e,t){return"bigint"==typeof e?s.fromBigInt(e,t):f(e,t)},O.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e});const R=s},4529:e=>{"use strict";e.exports={}},4700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.durationMessageToDuration=function(e){return{seconds:Number.parseInt(e.seconds),nanos:e.nanos}},t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos},t.isDurationMessage=function(e){return"string"==typeof e.seconds&&"number"==typeof e.nanos},t.parseDuration=function(e){const t=e.match(i);return t?{seconds:Number.parseInt(t[1],10),nanos:t[2]?Number.parseInt(t[2].padEnd(9,"0"),10):0}:null},t.durationToString=function(e){if(0===e.nanos)return`${e.seconds}s`;let t;return t=e.nanos%1e6==0?1e6:e.nanos%1e3==0?1e3:1,`${e.seconds}.${e.nanos/t}s`};const i=/^(\d+)(?:\.(\d+))?s$/},4756:e=>{"use strict";e.exports=require("tls")},4863:(e,t,i)=>{"use strict";e.exports=E,E.filename=null,E.defaults={keepCase:!1};var r=i(527),s=i(5330),n=i(7882),a=i(1344),o=i(8252),l=i(1457),c=i(5643),d=i(9687),u=i(8811),h=i(7209),p=i(361),f=i(3262),m=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,v=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,b=/^0[0-7]+$/,S=/^-?0[0-7]+$/,C=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function E(e,t,i){t instanceof s||(i=t,t=new s),i||(i=E.defaults);var w,k,O,R,P=i.preferTrailingComment||!1,I=r(e,i.alternateCommentMode||!1),N=I.next,x=I.push,A=I.peek,M=I.skip,D=I.cmnt,L=!0,j="proto2",F=t,U=[],B={},z=i.keepCase?function(e){return e}:f.camelCase;function Z(e,t,i){var r=E.filename;return i||(E.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+I.line+")")}function $(){var e,t=[];do{if('"'!==(e=N())&&"'"!==e)throw Z(e);t.push(N()),M(e),e=A()}while('"'===e||"'"===e);return t.join("")}function H(e){var t=N();switch(t){case"'":case'"':return x(t),$();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e){var t=1;switch("-"===e.charAt(0)&&(t=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return t*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(m.test(e))return t*parseInt(e,10);if(v.test(e))return t*parseInt(e,16);if(b.test(e))return t*parseInt(e,8);if(C.test(e))return t*parseFloat(e);throw Z(e,"number",!0)}(t)}catch(i){if(e&&T.test(t))return t;throw Z(t,"value")}}function W(e,t){var i,r;do{if(!t||'"'!==(i=A())&&"'"!==i)try{e.push([r=V(N()),M("to",!0)?V(N()):r])}catch(r){if(!(t&&T.test(i)&&j>=2023))throw r;e.push(i)}else{var s=$();if(e.push(s),j>=2023)throw Z(s,"id")}}while(M(",",!0));var n={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};X(n,function(e){if("option"!==e)throw Z(e);ie(n,e),M(";")},function(){ne(n)})}function V(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw Z(e,"id");if(g.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(S.test(e))return parseInt(e,8);throw Z(e,"id")}function q(){if(void 0!==w)throw Z("package");if(w=N(),!T.test(w))throw Z(w,"name");F=F.define(w),M(";")}function G(){var e,t=A();switch(t){case"weak":e=O||(O=[]),N();break;case"public":N();default:e=k||(k=[])}t=$(),M(";"),e.push(t)}function K(){if(M("="),(j=$())<2023)throw Z(j,"syntax");M(";")}function Y(){if(M("="),j=$(),!["2023"].includes(j))throw Z(j,"edition");M(";")}function J(e,t){switch(t){case"option":return ie(e,t),M(";"),!0;case"message":return Q(e,t),!0;case"enum":return te(e,t),!0;case"service":return function(e,t){if(!_.test(t=N()))throw Z(t,"service name");var i=new d(t);X(i,function(e){if(!J(i,e)){if("rpc"!==e)throw Z(e);!function(e,t){var i=D(),r=t;if(!_.test(t=N()))throw Z(t,"name");var s,n,a,o,l=t;if(M("("),M("stream",!0)&&(n=!0),!T.test(t=N()))throw Z(t);if(s=t,M(")"),M("returns"),M("("),M("stream",!0)&&(o=!0),!T.test(t=N()))throw Z(t);a=t,M(")");var c=new u(l,r,s,a,n,o);c.comment=i,X(c,function(e){if("option"!==e)throw Z(e);ie(c,e),M(";")}),e.add(c)}(i,e)}}),e.add(i),e===F&&U.push(i)}(e,t),!0;case"extend":return function(e,t){if(!T.test(t=N()))throw Z(t,"reference");var i=t;X(null,function(t){switch(t){case"required":case"repeated":ee(e,t,i);break;case"optional":ee(e,"proto3"===j?"proto3_optional":"optional",i);break;default:if("proto2"===j||!T.test(t))throw Z(t);x(t),ee(e,"optional",i)}})}(e,t),!0}return!1}function X(e,t,i){var r=I.line;if(e&&("string"!=typeof e.comment&&(e.comment=D()),e.filename=E.filename),M("{",!0)){for(var s;"}"!==(s=N());)t(s);M(";",!0)}else i&&i(),M(";"),e&&("string"!=typeof e.comment||P)&&(e.comment=D(r)||e.comment)}function Q(e,t){if(!_.test(t=N()))throw Z(t,"type name");var i=new n(t);X(i,function(e){if(!J(i,e))switch(e){case"map":!function(e){M("<");var t=N();if(void 0===p.mapKey[t])throw Z(t,"type");M(",");var i=N();if(!T.test(i))throw Z(i,"type");M(">");var r=N();if(!_.test(r))throw Z(r,"name");M("=");var s=new o(z(r),V(N()),t,i);X(s,function(e){if("option"!==e)throw Z(e);ie(s,e),M(";")},function(){ne(s)}),e.add(s)}(i);break;case"required":if("proto2"!==j)throw Z(e);case"repeated":ee(i,e);break;case"optional":if("proto3"===j)ee(i,"proto3_optional");else{if("proto2"!==j)throw Z(e);ee(i,"optional")}break;case"oneof":!function(e,t){if(!_.test(t=N()))throw Z(t,"name");var i=new l(z(t));X(i,function(e){"option"===e?(ie(i,e),M(";")):(x(e),ee(i,"optional"))}),e.add(i)}(i,e);break;case"extensions":W(i.extensions||(i.extensions=[]));break;case"reserved":W(i.reserved||(i.reserved=[]),!0);break;default:if("proto2"===j||!T.test(e))throw Z(e);x(e),ee(i,"optional")}}),e.add(i),e===F&&U.push(i)}function ee(e,t,i){var r=N();if("group"!==r){for(;r.endsWith(".")||A().startsWith(".");)r+=N();if(!T.test(r))throw Z(r,"type");var s=N();if(!_.test(s))throw Z(s,"name");s=z(s),M("=");var o=new a(s,V(N()),r,t,i);if(X(o,function(e){if("option"!==e)throw Z(e);ie(o,e),M(";")},function(){ne(o)}),"proto3_optional"===t){var c=new l("_"+s);o.setOption("proto3_optional",!0),c.add(o),e.add(c)}else e.add(o);e===F&&U.push(o)}else!function(e,t){if(j>=2023)throw Z("group");var i=N();if(!_.test(i))throw Z(i,"name");var r=f.lcFirst(i);i===r&&(i=f.ucFirst(i)),M("=");var s=V(N()),o=new n(i);o.group=!0;var l=new a(r,s,i,t);l.filename=E.filename,X(o,function(e){switch(e){case"option":ie(o,e),M(";");break;case"required":case"repeated":ee(o,e);break;case"optional":ee(o,"proto3"===j?"proto3_optional":"optional");break;case"message":Q(o,e);break;case"enum":te(o,e);break;case"reserved":W(o.reserved||(o.reserved=[]),!0);break;default:throw Z(e)}}),e.add(o).add(l)}(e,t)}function te(e,t){if(!_.test(t=N()))throw Z(t,"name");var i=new c(t);X(i,function(e){switch(e){case"option":ie(i,e),M(";");break;case"reserved":W(i.reserved||(i.reserved=[]),!0),void 0===i.reserved&&(i.reserved=[]);break;default:!function(e,t){if(!_.test(t))throw Z(t,"name");M("=");var i=V(N(),!0),r={options:void 0,getOption:function(e){return this.options[e]},setOption:function(e,t){h.prototype.setOption.call(r,e,t)},setParsedOption:function(){}};X(r,function(e){if("option"!==e)throw Z(e);ie(r,e),M(";")},function(){ne(r)}),e.add(t,i,r.comment,r.parsedOptions||r.options)}(i,e)}}),e.add(i),e===F&&U.push(i)}function ie(e,t){var i,r,s=!0;for("option"===t&&(t=N());"="!==t;){if("("===t){var n=N();M(")"),t="("+n+")"}if(s){if(s=!1,t.includes(".")&&!t.includes("(")){var a=t.split(".");i=a[0]+".",t=a[1];continue}i=t}else r=r?r+=t:t;t=N()}var o=re(e,r?i.concat(r):i);r=r&&"."===r[0]?r.slice(1):r,function(e,t,i,r){e.setParsedOption&&e.setParsedOption(t,i,r)}(e,i=i&&"."===i[i.length-1]?i.slice(0,-1):i,o,r)}function re(e,t){if(M("{",!0)){for(var i={};!M("}",!0);){if(!_.test(R=N()))throw Z(R,"name");if(null===R)throw Z(R,"end of input");var r,s=R;if(M(":",!0),"{"===A())r=re(e,t+"."+R);else if("["===A()){var n;if(r=[],M("[",!0)){do{n=H(!0),r.push(n)}while(M(",",!0));M("]"),void 0!==n&&se(e,t+"."+R,n)}}else r=H(!0),se(e,t+"."+R,r);var a=i[s];a&&(r=[].concat(a).concat(r)),i[s]=r,M(",",!0),M(";",!0)}return i}var o=H(!0);return se(e,t,o),o}function se(e,t,i){F===e&&/^features\./.test(t)?B[t]=i:e.setOption&&e.setOption(t,i)}function ne(e){if(M("[",!0)){do{ie(e,"option")}while(M(",",!0));M("]")}return e}for(;null!==(R=N());)switch(R){case"package":if(!L)throw Z(R);q();break;case"import":if(!L)throw Z(R);G();break;case"syntax":if(!L)throw Z(R);K();break;case"edition":if(!L)throw Z(R);Y();break;case"option":ie(F,R),M(";",!0);break;default:if(J(F,R)){L=!1;continue}throw Z(R)}return U.forEach(e=>{e._edition=j,Object.keys(B).forEach(t=>{void 0===e.getOption(t)&&e.setOption(t,B[t],!0)})}),E.filename=null,{package:w,imports:k,weakImports:O,root:t}}},4892:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseServerInterceptingCall=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=void 0,t.isInterceptingServerListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length},t.getServerInterceptingCall=function(e,t,i,r,s,n){const a={path:s.path,requestStream:"clientStream"===s.type||"bidi"===s.type,responseStream:"serverStream"===s.type||"bidi"===s.type,requestDeserialize:s.deserialize,responseSerialize:s.serialize},o=new O(t,i,r,s,n);return e.reduce((e,t)=>t(a,e),o)};const r=i(4097),s=i(131),n=i(5675),a=i(9752),o=i(3106),l=i(9453),c=i(267),d=i(4756),u=i(2921),h="server_call";function p(e){c.trace(s.LogVerbosity.DEBUG,h,e)}t.ServerListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveHalfClose(e){return this.halfClose=e,this}withOnCancel(e){return this.cancel=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}};class f{constructor(e,t){this.listener=e,this.nextListener=t,this.cancelled=!1,this.processingMetadata=!1,this.hasPendingMessage=!1,this.pendingMessage=null,this.processingMessage=!1,this.hasPendingHalfClose=!1}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingHalfClose(){this.hasPendingHalfClose&&(this.nextListener.onReceiveHalfClose(),this.hasPendingHalfClose=!1)}onReceiveMetadata(e){this.cancelled||(this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.cancelled||(this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingHalfClose())}))}onReceiveMessage(e){this.cancelled||(this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.cancelled||(this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingHalfClose()))}))}onReceiveHalfClose(){this.cancelled||this.listener.onReceiveHalfClose(()=>{this.cancelled||(this.processingMetadata||this.processingMessage?this.hasPendingHalfClose=!0:this.nextListener.onReceiveHalfClose())})}onCancel(){this.cancelled=!0,this.listener.onCancel(),this.nextListener.onCancel()}}t.ResponderBuilder=class{constructor(){this.start=void 0,this.metadata=void 0,this.message=void 0,this.status=void 0}withStart(e){return this.start=e,this}withSendMetadata(e){return this.metadata=e,this}withSendMessage(e){return this.message=e,this}withSendStatus(e){return this.status=e,this}build(){return{start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}};const m={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveHalfClose:e=>{e()},onCancel:()=>{}},g={start:e=>{e()},sendMetadata:(e,t)=>{t(e)},sendMessage:(e,t)=>{t(e)},sendStatus:(e,t)=>{t(e)}};t.ServerInterceptingCall=class{constructor(e,t){var i,r,s,n;this.nextCall=e,this.processingMetadata=!1,this.sentMetadata=!1,this.processingMessage=!1,this.pendingMessage=null,this.pendingMessageCallback=null,this.pendingStatus=null,this.responder={start:null!==(i=null==t?void 0:t.start)&&void 0!==i?i:g.start,sendMetadata:null!==(r=null==t?void 0:t.sendMetadata)&&void 0!==r?r:g.sendMetadata,sendMessage:null!==(s=null==t?void 0:t.sendMessage)&&void 0!==s?s:g.sendMessage,sendStatus:null!==(n=null==t?void 0:t.sendStatus)&&void 0!==n?n:g.sendStatus}}processPendingMessage(){this.pendingMessageCallback&&(this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback),this.pendingMessage=null,this.pendingMessageCallback=null)}processPendingStatus(){this.pendingStatus&&(this.nextCall.sendStatus(this.pendingStatus),this.pendingStatus=null)}start(e){this.responder.start(t=>{var i,r,s,n;const a={onReceiveMetadata:null!==(i=null==t?void 0:t.onReceiveMetadata)&&void 0!==i?i:m.onReceiveMetadata,onReceiveMessage:null!==(r=null==t?void 0:t.onReceiveMessage)&&void 0!==r?r:m.onReceiveMessage,onReceiveHalfClose:null!==(s=null==t?void 0:t.onReceiveHalfClose)&&void 0!==s?s:m.onReceiveHalfClose,onCancel:null!==(n=null==t?void 0:t.onCancel)&&void 0!==n?n:m.onCancel},o=new f(a,e);this.nextCall.start(o)})}sendMetadata(e){this.processingMetadata=!0,this.sentMetadata=!0,this.responder.sendMetadata(e,e=>{this.processingMetadata=!1,this.nextCall.sendMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}sendMessage(e,t){this.processingMessage=!0,this.sentMetadata||this.sendMetadata(new r.Metadata),this.responder.sendMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.pendingMessageCallback=t):this.nextCall.sendMessage(e,t)})}sendStatus(e){this.responder.sendStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextCall.sendStatus(e)})}startRead(){this.nextCall.startRead()}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}getAuthContext(){return this.nextCall.getAuthContext()}getConnectionInfo(){return this.nextCall.getConnectionInfo()}getMetricsRecorder(){return this.nextCall.getMetricsRecorder()}};const v="grpc-accept-encoding",y="grpc-encoding",b="grpc-message",S="grpc-status",C="grpc-timeout",_=/(\d{1,8})\s*([HMSmun])/,T={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},E={[v]:"identity,deflate,gzip",[y]:"identity"},w={[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_OK,[n.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},k={waitForTrailers:!0};class O{constructor(e,t,i,a,o){var d,f;this.stream=e,this.callEventTracker=i,this.handler=a,this.listener=null,this.deadlineTimer=null,this.deadline=1/0,this.maxSendMessageSize=s.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.cancelled=!1,this.metadataSent=!1,this.wantTrailers=!1,this.cancelNotified=!1,this.incomingEncoding="identity",this.readQueue=[],this.isReadPending=!1,this.receivedHalfClose=!1,this.streamEnded=!1,this.metricsRecorder=new u.PerRequestMetricRecorder,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;p("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!1),this.callEventTracker.onCallEnd({code:s.Status.CANCELLED,details:"Stream closed before sending status",metadata:null})),this.notifyOnCancel()}),this.stream.on("data",e=>{this.handleDataFrame(e)}),this.stream.pause(),this.stream.on("end",()=>{this.handleEndEvent()}),"grpc.max_send_message_length"in o&&(this.maxSendMessageSize=o["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in o&&(this.maxReceiveMessageSize=o["grpc.max_receive_message_length"]),this.host=null!==(d=t[":authority"])&&void 0!==d?d:t.host,this.decoder=new l.StreamDecoder(this.maxReceiveMessageSize);const m=r.Metadata.fromHttp2Headers(t);c.isTracerEnabled(h)&&p("Request to "+this.handler.path+" received headers "+JSON.stringify(m.toJSON()));const g=m.get(C);g.length>0&&this.handleTimeoutHeader(g[0]);const b=m.get(y);b.length>0&&(this.incomingEncoding=b[0]),m.remove(C),m.remove(y),m.remove(v),m.remove(n.constants.HTTP2_HEADER_ACCEPT_ENCODING),m.remove(n.constants.HTTP2_HEADER_TE),m.remove(n.constants.HTTP2_HEADER_CONTENT_TYPE),this.metadata=m;const S=null===(f=e.session)||void 0===f?void 0:f.socket;this.connectionInfo={localAddress:null==S?void 0:S.localAddress,localPort:null==S?void 0:S.localPort,remoteAddress:null==S?void 0:S.remoteAddress,remotePort:null==S?void 0:S.remotePort},this.shouldSendMetrics=!!o["grpc.server_call_metric_recording"]}handleTimeoutHeader(e){const t=e.toString().match(_);if(null===t){const t={code:s.Status.INTERNAL,details:`Invalid ${C} value "${e}"`,metadata:null};return void process.nextTick(()=>{this.sendStatus(t)})}const i=+t[1]*T[t[2]]|0,r=new Date;this.deadline=r.setMilliseconds(r.getMilliseconds()+i),this.deadlineTimer=setTimeout(()=>{const e={code:s.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(e)},i)}checkCancelled(){return this.cancelled||!this.stream.destroyed&&!this.stream.closed||(this.notifyOnCancel(),this.cancelled=!0),this.cancelled}notifyOnCancel(){this.cancelNotified||(this.cancelNotified=!0,this.cancelled=!0,process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onCancel()}),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.resume())}maybeSendMetadata(){this.metadataSent||this.sendMetadata(new r.Metadata)}serializeMessage(e){const t=this.handler.serialize(e),i=t.byteLength,r=Buffer.allocUnsafe(i+5);return r.writeUInt8(0,0),r.writeUInt32BE(i,1),t.copy(r,5),r}decompressMessage(e,t){const i=e.subarray(5);if("identity"===t)return i;if("deflate"===t||"gzip"===t){let e;return e="deflate"===t?o.createInflate():o.createGunzip(),new Promise((t,r)=>{let n=0;const a=[];e.on("data",t=>{a.push(t),n+=t.byteLength,-1!==this.maxReceiveMessageSize&&n>this.maxReceiveMessageSize&&(e.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(a))}),e.write(i),e.end()})}return Promise.reject({code:s.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}async decompressAndMaybePush(e){if("COMPRESSED"!==e.type)throw new Error(`Invalid queue entry type: ${e.type}`);const t=1===e.compressedMessage.readUInt8(0)?this.incomingEncoding:"identity";let i;try{i=await this.decompressMessage(e.compressedMessage,t)}catch(e){return void this.sendStatus(e)}try{e.parsedMessage=this.handler.deserialize(i)}catch(e){return void this.sendStatus({code:s.Status.INTERNAL,details:`Error deserializing request: ${e.message}`})}e.type="READABLE",this.maybePushNextMessage()}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&"COMPRESSED"!==this.readQueue[0].type){this.isReadPending=!1;const e=this.readQueue.shift();"READABLE"===e.type?this.listener.onReceiveMessage(e.parsedMessage):this.listener.onReceiveHalfClose()}}handleDataFrame(e){var t;if(this.checkCancelled())return;let i;p("Request to "+this.handler.path+" received data frame of size "+e.length);try{i=this.decoder.write(e)}catch(e){return void this.sendStatus({code:s.Status.RESOURCE_EXHAUSTED,details:e.message})}for(const e of i){this.stream.pause();const i={type:"COMPRESSED",compressedMessage:e,parsedMessage:null};this.readQueue.push(i),this.decompressAndMaybePush(i),null===(t=this.callEventTracker)||void 0===t||t.addMessageReceived()}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null}),this.receivedHalfClose=!0,this.maybePushNextMessage()}start(e){p("Request to "+this.handler.path+" start called"),this.checkCancelled()||(this.listener=e,e.onReceiveMetadata(this.metadata))}sendMetadata(e){if(this.checkCancelled())return;if(this.metadataSent)return;this.metadataSent=!0;const t=e?e.toHttp2Headers():null,i=Object.assign(Object.assign(Object.assign({},w),E),t);this.stream.respond(i,k)}sendMessage(e,t){if(this.checkCancelled())return;let i;try{i=this.serializeMessage(e)}catch(e){return void this.sendStatus({code:s.Status.INTERNAL,details:`Error serializing response: ${(0,a.getErrorMessage)(e)}`,metadata:null})}-1!==this.maxSendMessageSize&&i.length-5>this.maxSendMessageSize?this.sendStatus({code:s.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${i.length} vs. ${this.maxSendMessageSize})`,metadata:null}):(this.maybeSendMetadata(),p("Request to "+this.handler.path+" sent data frame of size "+i.length),this.stream.write(i,e=>{var i;e?this.sendStatus({code:s.Status.INTERNAL,details:`Error writing message: ${(0,a.getErrorMessage)(e)}`,metadata:null}):(null===(i=this.callEventTracker)||void 0===i||i.addMessageSent(),t())}))}sendStatus(e){var t,i,n;if(this.checkCancelled())return;p("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+s.Status[e.code]+" details: "+e.details);const a=null!==(n=null===(i=e.metadata)||void 0===i?void 0:i.clone())&&void 0!==n?n:new r.Metadata;if(this.shouldSendMetrics&&a.set(u.GRPC_METRICS_HEADER,this.metricsRecorder.serialize()),this.metadataSent)this.wantTrailers?this.notifyOnCancel():(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));const t=Object.assign({[S]:e.code,[b]:encodeURI(e.details)},a.toHttp2Headers());this.stream.sendTrailers(t),this.notifyOnCancel()}),this.stream.end());else{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));const t=Object.assign(Object.assign({[S]:e.code,[b]:encodeURI(e.details)},w),a.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.notifyOnCancel()}}startRead(){p("Request to "+this.handler.path+" startRead called"),this.checkCancelled()||(this.isReadPending=!0,0===this.readQueue.length?this.receivedHalfClose||this.stream.resume():this.maybePushNextMessage())}getPeer(){var e;const t=null===(e=this.stream.session)||void 0===e?void 0:e.socket;return(null==t?void 0:t.remoteAddress)?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getHost(){return this.host}getAuthContext(){var e;if((null===(e=this.stream.session)||void 0===e?void 0:e.socket)instanceof d.TLSSocket){const e=this.stream.session.socket.getPeerCertificate();return{transportSecurityType:"ssl",sslPeerCertificate:e.raw?e:void 0}}return{}}getConnectionInfo(){return this.connectionInfo}getMetricsRecorder(){return this.metricsRecorder}}t.BaseServerInterceptingCall=O},4973:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;const r=i(8923),s=i(5656),n=i(463),a=i(9302),o=i(178),l=i(3956),c=i(131),d=i(4097),u=i(267),h=i(131),p=i(3822),f=i(533);function m(e){u.trace(h.LogVerbosity.DEBUG,"resolving_load_balancer",e)}const g=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function v(e,t,i,r){for(const s of i.name)switch(r){case"EMPTY":if(!s.service&&!s.method)return!0;break;case"SERVICE":if(s.service===e&&!s.method)return!0;break;case"SERVICE_AND_METHOD":if(s.service===e&&s.method===t)return!0}return!1}function y(e,t,i,r){for(const s of i)if(v(e,t,s,r))return s;return null}t.ResolvingLoadBalancer=class{constructor(e,t,i,r,c){this.target=e,this.channelControlHelper=t,this.channelOptions=i,this.onSuccessfulResolution=r,this.onFailedResolution=c,this.latestChildState=n.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.latestChildErrorMessage=null,this.currentState=n.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,i["grpc.service_config"]?this.defaultServiceConfig=(0,s.validateServiceConfig)(JSON.parse(i["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(n.ConnectivityState.IDLE,new o.QueuePicker(this),null),this.childLoadBalancer=new f.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(m("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t,i)=>{this.latestChildState=e,this.latestChildPicker=t,this.latestChildErrorMessage=i,this.updateState(e,t,i)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,a.createResolver)(e,this.handleResolverResult.bind(this),i);const d={initialDelay:i["grpc.initial_reconnect_backoff_ms"],maxDelay:i["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage)},d),this.backoffTimeout.unref()}handleResolverResult(e,t,i,s){var n,o;this.backoffTimeout.stop(),this.backoffTimeout.reset();let l=!0,u=null;if(null===i?u=this.defaultServiceConfig:i.ok?u=i.value:null!==this.previousServiceConfig?u=this.previousServiceConfig:(l=!1,this.handleResolutionFailure(i.error)),null!==u){const i=null!==(n=null==u?void 0:u.loadBalancingConfig)&&void 0!==n?n:[],a=(0,r.selectLbConfigFromList)(i,!0);null===a?(l=!1,this.handleResolutionFailure({code:c.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new d.Metadata})):l=this.childLoadBalancer.updateAddressList(e,a,Object.assign(Object.assign({},this.channelOptions),t),s)}return l&&this.onSuccessfulResolution(u,null!==(o=t[a.CHANNEL_ARGS_CONFIG_SELECTOR_KEY])&&void 0!==o?o:function(e){return{invoke(t,i){var r,s;const n=t.split("/").filter(e=>e.length>0),a=null!==(r=n[0])&&void 0!==r?r:"",o=null!==(s=n[1])&&void 0!==s?s:"";if(e&&e.methodConfig)for(const t of g){const i=y(a,o,e.methodConfig,t);if(i)return{methodConfig:i,pickInformation:{},status:c.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:c.Status.OK,dynamicFilterFactories:[]}},unref(){}}}(u)),l}updateResolution(){this.innerResolver.updateResolution(),this.currentState===n.ConnectivityState.IDLE&&this.updateState(n.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage),this.backoffTimeout.runOnce()}updateState(e,t,i){m((0,p.uriToString)(this.target)+" "+n.ConnectivityState[this.currentState]+" -> "+n.ConnectivityState[e]),e===n.ConnectivityState.IDLE&&(t=new o.QueuePicker(this,t)),this.currentState=e,this.channelControlHelper.updateState(e,t,i)}handleResolutionFailure(e){this.latestChildState===n.ConnectivityState.IDLE&&(this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new o.UnavailablePicker(e),e.details),this.onFailedResolution(e))}exitIdle(){this.currentState!==n.ConnectivityState.IDLE&&this.currentState!==n.ConnectivityState.TRANSIENT_FAILURE||(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=n.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=n.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}},4987:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;const r=i(3106),s=i(5179),n=i(131),a=i(2558),o=i(267);class l{async writeMessage(e,t){let i=e;t&&(i=await this.compressMessage(i));const r=Buffer.allocUnsafe(i.length+5);return r.writeUInt8(t?1:0,0),r.writeUInt32BE(i.length,1),i.copy(r,5),r}async readMessage(e){const t=1===e.readUInt8(0);let i=e.slice(5);return t&&(i=await this.decompressMessage(i)),i}}class c extends l{async compressMessage(e){return e}async writeMessage(e,t){const i=Buffer.allocUnsafe(e.length+5);return i.writeUInt8(0,0),i.writeUInt32BE(e.length,1),e.copy(i,5),i}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class d extends l{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,i)=>{r.deflate(e,(e,r)=>{e?i(e):t(r)})})}decompressMessage(e){return new Promise((t,i)=>{let s=0;const a=[],o=r.createInflate();o.on("data",e=>{a.push(e),s+=e.byteLength,-1!==this.maxRecvMessageLength&&s>this.maxRecvMessageLength&&(o.destroy(),i({code:n.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class u extends l{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,i)=>{r.gzip(e,(e,r)=>{e?i(e):t(r)})})}decompressMessage(e){return new Promise((t,i)=>{let s=0;const a=[],o=r.createGunzip();o.on("data",e=>{a.push(e),s+=e.byteLength,-1!==this.maxRecvMessageLength&&s>this.maxRecvMessageLength&&(o.destroy(),i({code:n.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class h extends l{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function p(e,t){switch(e){case"identity":return new c;case"deflate":return new d(t);case"gzip":return new u(t);default:return new h(e)}}class f extends a.BaseFilter{constructor(e,t){var i,r,a;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";const l=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!==(i=e["grpc.max_receive_message_length"])&&void 0!==i?i:n.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.maxSendMessageLength=null!==(r=e["grpc.max_send_message_length"])&&void 0!==r?r:n.DEFAULT_MAX_SEND_MESSAGE_LENGTH,void 0!==l)if("number"==typeof(d=l)&&"string"==typeof s.CompressionAlgorithms[d]){const e=s.CompressionAlgorithms[l],i=null===(a=t.serverSupportedEncodingHeader)||void 0===a?void 0:a.split(",");i&&!i.includes(e)||(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm,-1))}else o.log(n.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${l}`);var d}async sendMetadata(e){const t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];"string"==typeof e&&(this.receiveCompression=p(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");const i=e.get("grpc-accept-encoding")[0];return i&&(this.sharedFilterConfig.serverSupportedEncodingHeader=i,i.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;const i=await e;if(-1!==this.maxSendMessageLength&&i.message.length>this.maxSendMessageLength)throw{code:n.Status.RESOURCE_EXHAUSTED,details:`Attempted to send message with a size larger than ${this.maxSendMessageLength}`};let r;return r=!(this.sendCompression instanceof c||2&(null!==(t=i.flags)&&void 0!==t?t:0)),{message:await this.sendCompression.writeMessage(i.message,r),flags:i.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=f,t.CompressionFilterFactory=class{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new f(this.options,this.sharedFilterConfig)}}},5034:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=void 0,t.statusOrFromValue=function(e){return{ok:!0,value:e}},t.statusOrFromError=function(e){var t;return{ok:!1,error:Object.assign(Object.assign({},e),{metadata:null!==(t=e.metadata)&&void 0!==t?t:new r.Metadata})}},t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length};const r=i(4097);t.InterceptingListenerImpl=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}},5047:(e,t,i)=>{"use strict";t.Service=i(7595)},5085:(e,t,i)=>{"use strict";t.Yi=t.Ib=void 0;const r=i(2028),s=i(2549),n=i(5407),a=i(3197);var o;i(4442),function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(o=t.Ib||(t.Ib={}));const l={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){const i=(r=t,n=e.name,""===r?n:r+"."+n);var r,n;return function(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}(e)?[[i,e]]:function(e){return e instanceof s.Namespace||e instanceof s.Root}(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>c(e.nested[t],i)).reduce((e,t)=>e.concat(t),[]):[]}function d(e,t){return function(i){return e.toObject(e.decode(i),t)}}function u(e){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);const i=e.fromObject(t);return e.encode(i).finish()}}function h(e){return(e||[]).reduce((e,t)=>{for(const[i,r]of Object.entries(t))"uninterpreted_option"===i?e.uninterpreted_option.push(t.uninterpreted_option):e[i]=r;return e},{deprecated:!1,idempotency_level:o.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function p(e,t,i,s){const n=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:u(n),requestDeserialize:d(n,i),responseSerialize:u(a),responseDeserialize:d(a,i),originalName:r(e.name),requestType:f(n,i,s),responseType:f(a,i,s),options:h(e.parsedOptions)}}function f(e,t,i){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:i,serialize:u(e),deserialize:d(e,t)}}function m(e,t,i,r){if(e instanceof s.Service)return function(e,t,i,r){const s={};for(const n of e.methodsArray)s[n.name]=p(n,t,i,r);return s}(e,t,i,r);if(e instanceof s.Type)return f(e,i,r);if(e instanceof s.Enum)return function(e,t){const i=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:i.$type.toObject(i,l),fileDescriptorProtos:t}}(e,r);throw new Error("Type mismatch in reflection object handling")}function g(e,t){const i={};e.resolveAll();const r=e.toDescriptor("proto3").file.map(e=>Buffer.from(n.FileDescriptorProto.encode(e).finish()));for(const[s,n]of c(e,""))i[s]=m(n,s,t,r);return i}t.Yi=function(e,t){return g((0,a.loadProtosWithOptionsSync)(e,t),t)},(0,a.addCommonProtos)()},5095:e=>{"use strict";e.exports=r;var t,i=/\/|\./;function r(e,t){i.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),r[e]=t}r("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),r("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),r("timestamp",{Timestamp:t}),r("empty",{Empty:{fields:{}}}),r("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),r("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),r("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),r.get=function(e){return r[e]||null}},5179:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(i||(t.CompressionAlgorithms=i={}))},5212:(e,t,i)=>{"use strict";e.exports=n;var r=i(8045),s=i(4153)("fs");function n(e,t,i){return"function"==typeof t?(i=t,t={}):t||(t={}),i?!t.xhr&&s&&s.readFile?s.readFile(e,function(r,s){return r&&"undefined"!=typeof XMLHttpRequest?n.xhr(e,t,i):r?i(r):i(null,t.binary?s:s.toString("utf8"))}):n.xhr(e,t,i):r(n,this,e,t)}n.xhr=function(e,t,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return i(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var s=0;s<r.responseText.length;++s)e.push(255&r.responseText.charCodeAt(s))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return i(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},5317:e=>{"use strict";e.exports=require("child_process")},5325:(e,t,i)=>{"use strict";var r=e.exports=i(4394);r.build="light",r.load=function(e,t,i){return"function"==typeof t?(i=t,t=new r.Root):t||(t=new r.Root),t.load(e,i)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=i(1080),r.decoder=i(7728),r.verifier=i(420),r.converter=i(744),r.ReflectionObject=i(7209),r.Namespace=i(1304),r.Root=i(5330),r.Enum=i(5643),r.Type=i(7882),r.Field=i(1344),r.OneOf=i(1457),r.MapField=i(8252),r.Service=i(9687),r.Method=i(8811),r.Message=i(2551),r.wrappers=i(6434),r.types=i(361),r.util=i(3262),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},5330:(e,t,i)=>{"use strict";e.exports=u;var r=i(1304);((u.prototype=Object.create(r.prototype)).constructor=u).className="Root";var s,n,a,o=i(1344),l=i(5643),c=i(1457),d=i(3262);function u(e){r.call(this,"",e),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}function h(){}u.fromJSON=function(e,t){return t||(t=new u),e.options&&t.setOptions(e.options),t.addJSON(e.nested).resolveAll()},u.prototype.resolvePath=d.path.resolve,u.prototype.fetch=d.fetch,u.prototype.load=function e(t,i,r){"function"==typeof i&&(r=i,i=void 0);var s=this;if(!r)return d.asPromise(e,s,t,i);var o=r===h;function l(e,t){if(r){if(o)throw e;t&&t.resolveAll();var i=r;r=null,i(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var i=e.substring(t);if(i in a)return i}return null}function u(e,t){try{if(d.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),d.isString(t)){n.filename=e;var r,a=n(t,s,i),u=0;if(a.imports)for(;u<a.imports.length;++u)(r=c(a.imports[u])||s.resolvePath(e,a.imports[u]))&&p(r);if(a.weakImports)for(u=0;u<a.weakImports.length;++u)(r=c(a.weakImports[u])||s.resolvePath(e,a.weakImports[u]))&&p(r,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}o||f||l(null,s)}function p(e,t){if(e=c(e)||e,!(s.files.indexOf(e)>-1))if(s.files.push(e),e in a)o?u(e,a[e]):(++f,setTimeout(function(){--f,u(e,a[e])}));else if(o){var i;try{i=d.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||l(e))}u(e,i)}else++f,s.fetch(e,function(i,n){--f,r&&(i?t?f||l(null,s):l(i):u(e,n))})}var f=0;d.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=s.resolvePath("",t[g]))&&p(m);return o?(s.resolveAll(),s):(f||l(null,s),s)},u.prototype.loadSync=function(e,t){if(!d.isNode)throw Error("not supported");return this.load(e,t,h)},u.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return r.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var i=t.parent.lookup(t.extend);if(i){var r=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return i.get(r.name)||(r.declaringField=t,t.extensionField=r,i.add(r)),!0}return!1}u.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof l)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var i=0;i<e.nestedArray.length;++i)this._handleAdd(e._nestedArray[i]);p.test(e.name)&&(e.parent[e.name]=e)}(e instanceof s||e instanceof l||e instanceof o)&&(this._fullyQualifiedObjects[e.fullName]=e)},u.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var i=0;i<e.nestedArray.length;++i)this._handleRemove(e._nestedArray[i]);p.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]},u._configure=function(e,t,i){s=e,n=t,a=i}},5407:(e,t,i)=>{"use strict";var r=i(2549);e.exports=t=r.descriptor=r.Root.fromJSON(i(3951)).lookup(".google.protobuf");var s=r.Namespace,n=r.Root,a=r.Enum,o=r.Type,l=r.Field,c=r.MapField,d=r.OneOf,u=r.Service,h=r.Method;function p(e,i,r){var c=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});!function(e,i){if(e)if("proto2"===e||"proto3"===e)i.syntax=e;else{if(i.syntax="editions","2023"!==e)throw new Error("Unsupported edition "+e);i.edition=t.Edition.EDITION_2023}}(r,c),e instanceof n||(c.package=e.fullName.substring(1));for(var d,h=0;h<e.nestedArray.length;++h)(d=e._nestedArray[h])instanceof o?c.messageType.push(d.toDescriptor(r)):d instanceof a?c.enumType.push(d.toDescriptor()):d instanceof l?c.extension.push(d.toDescriptor(r)):d instanceof u?c.service.push(d.toDescriptor()):d instanceof s&&p(d,i,r);c.options=E(e.options,t.FileOptions),c.messageType.length+c.enumType.length+c.extension.length+c.service.length&&i.push(c)}n.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var i=new n;if(e.file)for(var r,s,c,d=0;d<e.file.length;++d){s=i,(r=e.file[d]).package&&r.package.length&&(s=i.define(r.package));var h=O(r);if(r.name&&r.name.length&&i.files.push(s.filename=r.name),r.messageType)for(c=0;c<r.messageType.length;++c)s.add(o.fromDescriptor(r.messageType[c],h));if(r.enumType)for(c=0;c<r.enumType.length;++c)s.add(a.fromDescriptor(r.enumType[c],h));if(r.extension)for(c=0;c<r.extension.length;++c)s.add(l.fromDescriptor(r.extension[c],h));if(r.service)for(c=0;c<r.service.length;++c)s.add(u.fromDescriptor(r.service[c],h));var p=_(r.options,t.FileOptions);if(p){var f=Object.keys(p);for(c=0;c<f.length;++c)s.setOption(f[c],p[f[c]])}}return i.resolveAll()},n.prototype.toDescriptor=function(e){var i=t.FileDescriptorSet.create();return p(this,i.file,e),i};var f=0;o.fromDescriptor=function(e,i,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var s,n=new o(e.name.length?e.name:"Type"+f++,_(e.options,t.MessageOptions));if(r||(n._edition=i),e.oneofDecl)for(s=0;s<e.oneofDecl.length;++s)n.add(d.fromDescriptor(e.oneofDecl[s]));if(e.field)for(s=0;s<e.field.length;++s){var c=l.fromDescriptor(e.field[s],i,!0);n.add(c),e.field[s].hasOwnProperty("oneofIndex")&&n.oneofsArray[e.field[s].oneofIndex].add(c)}if(e.extension)for(s=0;s<e.extension.length;++s)n.add(l.fromDescriptor(e.extension[s],i,!0));if(e.nestedType)for(s=0;s<e.nestedType.length;++s)n.add(o.fromDescriptor(e.nestedType[s],i,!0)),e.nestedType[s].options&&e.nestedType[s].options.mapEntry&&n.setOption("map_entry",!0);if(e.enumType)for(s=0;s<e.enumType.length;++s)n.add(a.fromDescriptor(e.enumType[s],i,!0));if(e.extensionRange&&e.extensionRange.length)for(n.extensions=[],s=0;s<e.extensionRange.length;++s)n.extensions.push([e.extensionRange[s].start,e.extensionRange[s].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(n.reserved=[],e.reservedRange)for(s=0;s<e.reservedRange.length;++s)n.reserved.push([e.reservedRange[s].start,e.reservedRange[s].end]);if(e.reservedName)for(s=0;s<e.reservedName.length;++s)n.reserved.push(e.reservedName[s])}return n},o.prototype.toDescriptor=function(e){var i,r=t.DescriptorProto.create({name:this.name});for(i=0;i<this.fieldsArray.length;++i){var s;if(r.field.push(s=this._fieldsArray[i].toDescriptor(e)),this._fieldsArray[i]instanceof c){var n=S(this._fieldsArray[i].keyType,this._fieldsArray[i].resolvedKeyType,!1),d=S(this._fieldsArray[i].type,this._fieldsArray[i].resolvedType,!1),u=11===d||14===d?this._fieldsArray[i].resolvedType&&w(this.parent,this._fieldsArray[i].resolvedType)||this._fieldsArray[i].type:void 0;r.nestedType.push(t.DescriptorProto.create({name:s.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:n}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:d,typeName:u})],options:t.MessageOptions.create({mapEntry:!0})}))}}for(i=0;i<this.oneofsArray.length;++i)r.oneofDecl.push(this._oneofsArray[i].toDescriptor());for(i=0;i<this.nestedArray.length;++i)this._nestedArray[i]instanceof l?r.field.push(this._nestedArray[i].toDescriptor(e)):this._nestedArray[i]instanceof o?r.nestedType.push(this._nestedArray[i].toDescriptor(e)):this._nestedArray[i]instanceof a&&r.enumType.push(this._nestedArray[i].toDescriptor());if(this.extensions)for(i=0;i<this.extensions.length;++i)r.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[i][0],end:this.extensions[i][1]}));if(this.reserved)for(i=0;i<this.reserved.length;++i)"string"==typeof this.reserved[i]?r.reservedName.push(this.reserved[i]):r.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[i][0],end:this.reserved[i][1]}));return r.options=E(this.options,t.MessageOptions),r};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,i,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");var s,n;switch(s=e.typeName&&e.typeName.length?e.typeName:function(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}(e.type),e.label){case 1:n=void 0;break;case 2:n="required";break;case 3:n="repeated";break;default:throw Error("illegal label: "+e.label)}var a=e.extendee;void 0!==e.extendee&&(a=a.length?a:void 0);var o=new l(e.name.length?e.name:"field"+e.number,e.number,s,n,a);if(r||(o._edition=i),o.options=_(e.options,t.FieldOptions),e.proto3_optional&&(o.options.proto3_optional=!0),e.defaultValue&&e.defaultValue.length){var c=e.defaultValue;switch(c){case"true":case"TRUE":c=!0;break;case"false":case"FALSE":c=!1;break;default:m.exec(c)&&(c=parseInt(c))}o.setOption("default",c)}return function(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}(e.type)&&("proto3"===i?e.options&&!e.options.packed&&o.setOption("packed",!1):i&&"proto2"!==i||!e.options||!e.options.packed||o.setOption("packed",!0)),o},l.prototype.toDescriptor=function(e){var i=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)i.type=11,i.typeName=r.util.ucFirst(this.name),i.label=3;else{switch(i.type=S(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:i.typeName=this.resolvedType?w(this.parent,this.resolvedType):this.type}"repeated"===this.rule?i.label=3:this.required&&"proto2"===e?i.label=2:i.label=1}if(i.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(i.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(i.options=E(this.options,t.FieldOptions),null!=this.options.default&&(i.defaultValue=String(this.options.default)),this.options.proto3_optional&&(i.proto3_optional=!0)),"proto3"===e?this.packed||((i.options||(i.options=t.FieldOptions.create())).packed=!1):e&&"proto2"!==e||!this.packed||((i.options||(i.options=t.FieldOptions.create())).packed=!0),i};var g=0;a.fromDescriptor=function(e,i,r){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var s={};if(e.value)for(var n=0;n<e.value.length;++n){var o=e.value[n].name,l=e.value[n].number||0;s[o&&o.length?o:"NAME"+l]=l}var c=new a(e.name&&e.name.length?e.name:"Enum"+g++,s,_(e.options,t.EnumOptions));return r||(c._edition=i),c},a.prototype.toDescriptor=function(){for(var e=[],i=0,r=Object.keys(this.values);i<r.length;++i)e.push(t.EnumValueDescriptorProto.create({name:r[i],number:this.values[r[i]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:E(this.options,t.EnumOptions)})};var v=0;d.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new d(e.name&&e.name.length?e.name:"oneof"+v++)},d.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var y=0;u.fromDescriptor=function(e,i,r){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var s=new u(e.name&&e.name.length?e.name:"Service"+y++,_(e.options,t.ServiceOptions));if(r||(s._edition=i),e.method)for(var n=0;n<e.method.length;++n)s.add(h.fromDescriptor(e.method[n]));return s},u.prototype.toDescriptor=function(){for(var e=[],i=0;i<this.methodsArray.length;++i)e.push(this._methodsArray[i].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:E(this.options,t.ServiceOptions)})};var b=0;function S(e,t,i){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof a)return 14;if(t instanceof o)return i?10:11;throw Error("illegal type: "+e)}function C(e,t){for(var i,r,s={},n=0;n<t.fieldsArray.length;++n)if("uninterpretedOption"!==(r=(i=t._fieldsArray[n]).name)&&Object.prototype.hasOwnProperty.call(e,r)){var l=k(r);i.resolvedType instanceof o?s[l]=C(e[r],i.resolvedType):i.resolvedType instanceof a?s[l]=i.resolvedType.valuesById[e[r]]:s[l]=e[r]}return s}function _(e,t){if(e)return C(t.toObject(e),t)}function T(e,t){for(var i={},s=Object.keys(e),n=0;n<s.length;++n){var a=s[n],l=r.util.camelCase(a);if(Object.prototype.hasOwnProperty.call(t.fields,l)){var c=t.fields[l];c.resolvedType instanceof o?i[l]=T(e[a],c.resolvedType):i[l]=e[a],c.repeated&&!Array.isArray(i[l])&&(i[l]=[i[l]])}}return i}function E(e,t){if(e)return t.fromObject(T(e,t))}function w(e,t){var i=e.fullName.split("."),r=t.fullName.split("."),a=0,o=0,l=r.length-1;if(!(e instanceof n)&&t instanceof s)for(;a<i.length&&o<l&&i[a]===r[o];){var c=t.lookup(i[a++],!0);if(null!==c&&c!==t)break;++o}else for(;a<i.length&&o<l&&i[a]===r[o];++a,++o);return r.slice(o).join(".")}function k(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}function O(e){if("editions"===e.syntax){if(e.edition===t.Edition.EDITION_2023)return"2023";throw new Error("Unsupported edition "+e.edition)}return"proto3"===e.syntax?"proto3":"proto2"}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,Boolean(e.clientStreaming),Boolean(e.serverStreaming),_(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:E(this.options,t.MethodOptions)})}},5434:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},5486:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;const r=i(5675),s=i(857),n=i(131),a=i(4097),o=i(9453),l=i(267),c=i(131);function d(e){const t=`Received HTTP status code ${e}`;let i;switch(e){case 400:i=n.Status.INTERNAL;break;case 401:i=n.Status.UNAUTHENTICATED;break;case 403:i=n.Status.PERMISSION_DENIED;break;case 404:i=n.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:i=n.Status.UNAVAILABLE;break;default:i=n.Status.UNKNOWN}return{code:i,details:t,metadata:new a.Metadata}}t.Http2SubchannelCall=class{constructor(e,t,i,l,c){var u;this.http2Stream=e,this.callEventTracker=t,this.listener=i,this.transport=l,this.callId=c,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.finalStatus=null,this.internalError=null,this.serverEndedCall=!1,this.connectionDropped=!1;const h=null!==(u=l.getOptions()["grpc.max_receive_message_length"])&&void 0!==u?u:n.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new o.StreamDecoder(h),e.on("response",(e,t)=>{let i="";for(const t of Object.keys(e))i+="\t\t"+t+": "+e[t]+"\n";if(this.trace("Received server headers:\n"+i),this.httpStatusCode=e[":status"],t&r.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=a.Metadata.fromHttp2Headers(e)}catch(e){return void this.endCall({code:n.Status.UNKNOWN,details:e.message,metadata:new a.Metadata})}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{if(this.statusOutput)return;let t;this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){if(void 0!==this.httpStatusCode&&200!==this.httpStatusCode){const e=d(this.httpStatusCode);this.cancelWithStatus(e.code,e.details)}else this.cancelWithStatus(n.Status.RESOURCE_EXHAUSTED,e.message);return}for(const e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{this.serverEndedCall=!0,process.nextTick(()=>{var t;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===n.Status.OK)return;let i,s="";switch(e.rstCode){case r.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;if(this.httpStatusCode&&200!==this.httpStatusCode){const e=d(this.httpStatusCode);i=e.code,s=e.details}else i=n.Status.INTERNAL,s=`Received RST_STREAM with code ${e.rstCode} (Call ended without gRPC status)`;break;case r.constants.NGHTTP2_REFUSED_STREAM:i=n.Status.UNAVAILABLE,s="Stream refused by server";break;case r.constants.NGHTTP2_CANCEL:this.connectionDropped?(i=n.Status.UNAVAILABLE,s="Connection dropped"):(i=n.Status.CANCELLED,s="Call cancelled");break;case r.constants.NGHTTP2_ENHANCE_YOUR_CALM:i=n.Status.RESOURCE_EXHAUSTED,s="Bandwidth exhausted or memory limit exceeded";break;case r.constants.NGHTTP2_INADEQUATE_SECURITY:i=n.Status.PERMISSION_DENIED,s="Protocol not secure enough";break;case r.constants.NGHTTP2_INTERNAL_ERROR:i=n.Status.INTERNAL,null===this.internalError?s=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(i=n.Status.UNAVAILABLE,s=this.internalError.message):s=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:i=n.Status.INTERNAL,s=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:i,details:s,metadata:new a.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+function(e){for(const[t,i]of Object.entries(s.constants.errno))if(i===e)return t;return"Unknown system error "+e}(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}getDeadlineInfo(){return[`remote_addr=${this.getPeer()}`]}onDisconnect(){this.connectionDropped=!0,setImmediate(()=>{this.endCall({code:n.Status.UNAVAILABLE,details:"Connection dropped",metadata:new a.Metadata})})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){l.trace(c.LogVerbosity.DEBUG,"subchannel_call","["+this.callId+"] "+e)}endCall(e){null!==this.finalStatus&&this.finalStatus.code!==n.Status.OK||(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==n.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.serverEndedCall=!0,this.callEventTracker.onStreamEnd(!0);let t,i="";for(const t of Object.keys(e))i+="\t\t"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+i);try{t=a.Metadata.fromHttp2Headers(e)}catch(e){t=new a.Metadata}const r=t.getMap();let s;if("string"==typeof r["grpc-status"]){const e=Number(r["grpc-status"]);this.trace("received status code "+e+" from server"),t.remove("grpc-status");let i="";if("string"==typeof r["grpc-message"]){try{i=decodeURI(r["grpc-message"])}catch(e){i=r["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+i+'" from server')}s={code:e,details:i,metadata:t}}else this.httpStatusCode?(s=d(this.httpStatusCode),s.metadata=t):s={code:n.Status.UNKNOWN,details:"No status information received",metadata:t};this.endCall(s)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed)if(this.serverEndedCall)this.http2Stream.end();else{let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===n.Status.OK?r.constants.NGHTTP2_NO_ERROR:r.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new a.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}getAuthContext(){return this.transport.getAuthContext()}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==n.Status.OK)return this.readsClosed=!0,void this.maybeOutputStatus();if(this.canPush=!0,this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();return void this.push(e)}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const i=t=>{process.nextTick(()=>{var i;let r=n.Status.UNAVAILABLE;"ERR_STREAM_WRITE_AFTER_END"===(null==t?void 0:t.code)&&(r=n.Status.INTERNAL),t&&this.cancelWithStatus(r,`Write error: ${t.message}`),null===(i=e.callback)||void 0===i||i.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,i)}catch(e){this.endCall({code:n.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new a.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}},5563:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const r=i(1544),s=i(3653),n=i(463),a=i(131),o=i(4097),l=i(3952),c=Symbol(),d=Symbol(),u=Symbol(),h=Symbol();function p(e){return"function"==typeof e}function f(e){var t;return(null===(t=e.stack)||void 0===t?void 0:t.split("\n").slice(1).join("\n"))||"no stack trace available"}t.Client=class{constructor(e,t,i={}){var r,n;if(i=Object.assign({},i),this[d]=null!==(r=i.interceptors)&&void 0!==r?r:[],delete i.interceptors,this[u]=null!==(n=i.interceptor_providers)&&void 0!==n?n:[],delete i.interceptor_providers,this[d].length>0&&this[u].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=i.callInvocationTransformer,delete i.callInvocationTransformer,i.channelOverride)this[c]=i.channelOverride;else if(i.channelFactoryOverride){const r=i.channelFactoryOverride;delete i.channelFactoryOverride,this[c]=r(e,t,i)}else this[c]=new s.ChannelImplementation(e,t,i)}close(){this[c].close()}getChannel(){return this[c]}waitForReady(e,t){const i=r=>{if(r)return void t(new Error("Failed to connect before the deadline"));let s;try{s=this[c].getConnectivityState(!0)}catch(e){return void t(new Error("The channel has been closed"))}if(s===n.ConnectivityState.READY)t();else try{this[c].watchConnectivityState(s,e,i)}catch(e){t(new Error("The channel has been closed"))}};setImmediate(i)}checkOptionalUnaryResponseArguments(e,t,i){if(p(e))return{metadata:new o.Metadata,options:{},callback:e};if(p(t))return e instanceof o.Metadata?{metadata:e,options:{},callback:t}:{metadata:new o.Metadata,options:e,callback:t};if(!(e instanceof o.Metadata&&t instanceof Object&&p(i)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:i}}makeUnaryRequest(e,t,i,s,n,o,p){var m,g;const v=this.checkOptionalUnaryResponseArguments(n,o,p),y={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:i};let b={argument:s,metadata:v.metadata,call:new r.ClientUnaryCallImpl,channel:this[c],methodDefinition:y,callOptions:v.options,callback:v.callback};this[h]&&(b=this[h](b));const S=b.call,C={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(m=b.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=b.callOptions.interceptor_providers)&&void 0!==g?g:[]},_=(0,l.getInterceptingCall)(C,b.methodDefinition,b.callOptions,b.channel);S.call=_;let T=null,E=!1,w=new Error;return _.start(b.metadata,{onReceiveMetadata:e=>{S.emit("metadata",e)},onReceiveMessage(e){null!==T&&_.cancelWithStatus(a.Status.UNIMPLEMENTED,"Too many responses received"),T=e},onReceiveStatus(e){if(!E){if(E=!0,e.code===a.Status.OK)if(null===T){const t=f(w);b.callback((0,r.callErrorFromStatus)({code:a.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else b.callback(null,T);else{const t=f(w);b.callback((0,r.callErrorFromStatus)(e,t))}w=null,S.emit("status",e)}}}),_.sendMessage(s),_.halfClose(),S}makeClientStreamRequest(e,t,i,s,n,o){var p,m;const g=this.checkOptionalUnaryResponseArguments(s,n,o),v={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:i};let y={metadata:g.metadata,call:new r.ClientWritableStreamImpl(t),channel:this[c],methodDefinition:v,callOptions:g.options,callback:g.callback};this[h]&&(y=this[h](y));const b=y.call,S={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(p=y.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(m=y.callOptions.interceptor_providers)&&void 0!==m?m:[]},C=(0,l.getInterceptingCall)(S,y.methodDefinition,y.callOptions,y.channel);b.call=C;let _=null,T=!1,E=new Error;return C.start(y.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==_&&C.cancelWithStatus(a.Status.UNIMPLEMENTED,"Too many responses received"),_=e,C.startRead()},onReceiveStatus(e){if(!T){if(T=!0,e.code===a.Status.OK)if(null===_){const t=f(E);y.callback((0,r.callErrorFromStatus)({code:a.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else y.callback(null,_);else{const t=f(E);y.callback((0,r.callErrorFromStatus)(e,t))}E=null,b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let i,r;return e instanceof o.Metadata?(i=e,r=t||{}):(r=e||{},i=new o.Metadata),{metadata:i,options:r}}makeServerStreamRequest(e,t,i,s,n,o){var p,m;const g=this.checkMetadataAndOptions(n,o),v={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:i};let y={argument:s,metadata:g.metadata,call:new r.ClientReadableStreamImpl(i),channel:this[c],methodDefinition:v,callOptions:g.options};this[h]&&(y=this[h](y));const b=y.call,S={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(p=y.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(m=y.callOptions.interceptor_providers)&&void 0!==m?m:[]},C=(0,l.getInterceptingCall)(S,y.methodDefinition,y.callOptions,y.channel);b.call=C;let _=!1,T=new Error;return C.start(y.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!_){if(_=!0,b.push(null),e.code!==a.Status.OK){const t=f(T);b.emit("error",(0,r.callErrorFromStatus)(e,t))}T=null,b.emit("status",e)}}}),C.sendMessage(s),C.halfClose(),b}makeBidiStreamRequest(e,t,i,s,n){var o,p;const m=this.checkMetadataAndOptions(s,n),g={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:i};let v={metadata:m.metadata,call:new r.ClientDuplexStreamImpl(t,i),channel:this[c],methodDefinition:g,callOptions:m.options};this[h]&&(v=this[h](v));const y=v.call,b={clientInterceptors:this[d],clientInterceptorProviders:this[u],callInterceptors:null!==(o=v.callOptions.interceptors)&&void 0!==o?o:[],callInterceptorProviders:null!==(p=v.callOptions.interceptor_providers)&&void 0!==p?p:[]},S=(0,l.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);y.call=S;let C=!1,_=new Error;return S.start(v.metadata,{onReceiveMetadata(e){y.emit("metadata",e)},onReceiveMessage(e){y.push(e)},onReceiveStatus(e){if(!C){if(C=!0,y.push(null),e.code!==a.Status.OK){const t=f(_);y.emit("error",(0,r.callErrorFromStatus)(e,t))}_=null,y.emit("status",e)}}}),y}}},5572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=function(){return i++};let i=0},5643:(e,t,i)=>{"use strict";e.exports=a;var r=i(7209);((a.prototype=Object.create(r.prototype)).constructor=a).className="Enum";var s=i(1304),n=i(3262);function a(e,t,i,s,n,a){if(r.call(this,e,i),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=n||{},this.valuesOptions=a,this._valuesFeatures={},this.reserved=void 0,t)for(var o=Object.keys(t),l=0;l<o.length;++l)"number"==typeof t[o[l]]&&(this.valuesById[this.values[o[l]]=t[o[l]]]=o[l])}a.prototype._resolveFeatures=function(e){return e=this._edition||e,r.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(e=>{var t=Object.assign({},this._features);this._valuesFeatures[e]=Object.assign(t,this.valuesOptions&&this.valuesOptions[e]&&this.valuesOptions[e].features)}),this},a.fromJSON=function(e,t){var i=new a(e,t.values,t.options,t.comment,t.comments);return i.reserved=t.reserved,t.edition&&(i._edition=t.edition),i._defaultEdition="proto3",i},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,i,r){if(!n.isString(e))throw TypeError("name must be a string");if(!n.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return r&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=r||null),this.comments[e]=i||null,this},a.prototype.remove=function(e){if(!n.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}},5656:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateRetryThrottling=c,t.validateServiceConfig=u,t.extractAndSelectServiceConfig=function(e,t){for(const i of e)if(i.length>0&&i[0].startsWith("grpc_config=")){const e=i.join("").substring(12);return p(JSON.parse(e),t)}return null};const r=i(857),s=i(131),n=/^\d+(\.\d{1,9})?s$/,a="node";function o(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw new Error("Invalid method config name: invalid service: expected type string, got "+typeof e.service);if("method"in e&&""!==e.method){if("string"!=typeof e.method)throw new Error("Invalid method config name: invalid method: expected type string, got "+typeof e.service);return{service:e.service,method:e.method}}return{service:e.service}}if("method"in e&&void 0!==e.method)throw new Error("Invalid method config name: method set with empty or unset service");return{}}function l(e){var t;const i={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw new Error("Invalid method config: invalid name array");for(const t of e.name)i.name.push(o(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw new Error("Invalid method config: invalid waitForReady");i.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw new Error("Invalid method config: invalid timeout.nanos");i.timeout=e.timeout}else{if("string"!=typeof e.timeout||!n.test(e.timeout))throw new Error("Invalid method config: invalid timeout");{const r=e.timeout.substring(0,e.timeout.length-1).split(".");i.timeout={seconds:0|r[0],nanos:0|(null!==(t=r[1])&&void 0!==t?t:0)}}}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw new Error("Invalid method config: invalid maxRequestBytes");i.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw new Error("Invalid method config: invalid maxRequestBytes");i.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");i.retryPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!n.test(e.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!n.test(e.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e)||!Array.isArray(e.retryableStatusCodes))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(const t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(s.Status).includes(t))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");if(!Object.values(s.Status).includes(t.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}(e.retryPolicy)}else"hedgingPolicy"in e&&(i.hedgingPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!n.test(e.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(const t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(s.Status).includes(t))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number");if(!Object.values(s.Status).includes(t.toUpperCase()))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}const t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}(e.hedgingPolicy));return i}function c(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function d(e){if("object"!=typeof e||null===e)throw new Error("Invalid loadBalancingConfig: unexpected type "+typeof e);const t=Object.keys(e);if(t.length>1)throw new Error(`Invalid loadBalancingConfig: unexpected multiple keys ${t}`);if(0===t.length)throw new Error("Invalid loadBalancingConfig: load balancing policy name required");return{[t[0]]:e[t[0]]}}function u(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"!=typeof e.loadBalancingPolicy)throw new Error("Invalid service config: invalid loadBalancingPolicy");t.loadBalancingPolicy=e.loadBalancingPolicy}if("loadBalancingConfig"in e){if(!Array.isArray(e.loadBalancingConfig))throw new Error("Invalid service config: invalid loadBalancingConfig");for(const i of e.loadBalancingConfig)t.loadBalancingConfig.push(d(i))}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(const i of e.methodConfig)t.methodConfig.push(l(i));"retryThrottling"in e&&(t.retryThrottling=c(e.retryThrottling));const i=[];for(const e of t.methodConfig)for(const t of e.name){for(const e of i)if(t.service===e.service&&t.method===e.method)throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);i.push(t)}return t}function h(e){if(!("serviceConfig"in e))throw new Error("Invalid service config choice: missing service config");const t={serviceConfig:u(e.serviceConfig)};if("clientLanguage"in e){if(!Array.isArray(e.clientLanguage))throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage=[];for(const i of e.clientLanguage){if("string"!=typeof i)throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage.push(i)}}if("clientHostname"in e){if(!Array.isArray(e.clientHostname))throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname=[];for(const i of e.clientHostname){if("string"!=typeof i)throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname.push(i)}}if("percentage"in e){if(!("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100))throw new Error("Invalid service config choice: invalid percentage");t.percentage=e.percentage}const i=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e)if(!i.includes(t))throw new Error(`Invalid service config choice: unexpected field ${t}`);return t}function p(e,t){if(!Array.isArray(e))throw new Error("Invalid service config list");for(const i of e){const e=h(i);if(!("number"==typeof e.percentage&&t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(const i of e.clientHostname)i===r.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(const i of e.clientLanguage)i===a&&(t=!0);if(!t)continue}return e.serviceConfig}}throw new Error("No matching service config found")}},5675:e=>{"use strict";e.exports=require("http2")},5692:e=>{"use strict";e.exports=require("https")},5716:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubchannelPool=void 0,t.getSubchannelPool=function(e){return e?c:new l};const r=i(6998),s=i(1385),n=i(8996),a=i(3822),o=i(2095);class l{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(const t in this.pool){const i=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[t]=i}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},1e4),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,i,l){this.ensureCleanupTask();const c=(0,a.uriToString)(e);if(c in this.pool){const e=this.pool[c];for(const s of e)if((0,n.subchannelAddressEqual)(t,s.subchannelAddress)&&(0,r.channelOptionsEqual)(i,s.channelArguments)&&l._equals(s.channelCredentials))return s.subchannel}const d=new s.Subchannel(e,t,i,l,new o.Http2SubchannelConnector(e));return c in this.pool||(this.pool[c]=[]),this.pool[c].push({subchannelAddress:t,channelArguments:i,channelCredentials:l,subchannel:d}),d.ref(),d}}t.SubchannelPool=l;const c=new l},5819:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileWatcherCertificateProvider=void 0;const r=i(9896),s=i(267),n=i(131);function a(e){s.trace(n.LogVerbosity.DEBUG,"certificate_provider",e)}const o=(0,i(9023).promisify)(r.readFile);t.FileWatcherCertificateProvider=class{constructor(e){if(this.config=e,this.refreshTimer=null,this.fileResultPromise=null,this.latestCaUpdate=void 0,this.caListeners=new Set,this.latestIdentityUpdate=void 0,this.identityListeners=new Set,this.lastUpdateTime=null,void 0===e.certificateFile!=(void 0===e.privateKeyFile))throw new Error("certificateFile and privateKeyFile must be set or unset together");if(void 0===e.certificateFile&&void 0===e.caCertificateFile)throw new Error("At least one of certificateFile and caCertificateFile must be set");a("File watcher constructed with config "+JSON.stringify(e))}updateCertificates(){this.fileResultPromise||(this.fileResultPromise=Promise.allSettled([this.config.certificateFile?o(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?o(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?o(this.config.caCertificateFile):Promise.reject()]),this.fileResultPromise.then(([e,t,i])=>{if(this.refreshTimer){a("File watcher read certificates certificate "+e.status+", privateKey "+t.status+", CA certificate "+i.status),this.lastUpdateTime=new Date,this.fileResultPromise=null,"fulfilled"===e.status&&"fulfilled"===t.status?this.latestIdentityUpdate={certificate:e.value,privateKey:t.value}:this.latestIdentityUpdate=null,"fulfilled"===i.status?this.latestCaUpdate={caCertificate:i.value}:this.latestCaUpdate=null;for(const e of this.identityListeners)e(this.latestIdentityUpdate);for(const e of this.caListeners)e(this.latestCaUpdate)}}),a("File watcher initiated certificate update"))}maybeStartWatchingFiles(){if(!this.refreshTimer){const e=this.lastUpdateTime?(new Date).getTime()-this.lastUpdateTime.getTime():1/0;e>this.config.refreshIntervalMs&&this.updateCertificates(),e>2*this.config.refreshIntervalMs&&(this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0),this.refreshTimer=setInterval(()=>this.updateCertificates(),this.config.refreshIntervalMs),a("File watcher started watching")}}maybeStopWatchingFiles(){0===this.caListeners.size&&0===this.identityListeners.size&&(this.fileResultPromise=null,this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null))}addCaCertificateListener(e){this.caListeners.add(e),this.maybeStartWatchingFiles(),void 0!==this.latestCaUpdate&&process.nextTick(e,this.latestCaUpdate)}removeCaCertificateListener(e){this.caListeners.delete(e),this.maybeStopWatchingFiles()}addIdentityCertificateListener(e){this.identityListeners.add(e),this.maybeStartWatchingFiles(),void 0!==this.latestIdentityUpdate&&process.nextTick(e,this.latestIdentityUpdate)}removeIdentityCertificateListener(e){this.identityListeners.delete(e),this.maybeStopWatchingFiles()}}},5943:function(e,t,i){"use strict";var r=this&&this.__runInitializers||function(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0},s=this&&this.__esDecorate||function(e,t,i,r,s,n){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?r.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),h=!1,p=i.length-1;p>=0;p--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");n.push(a(e||null))};var g=(0,i[p])("accessor"===l?{get:u.get,set:u.set}:u[c],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=a(g.get))&&(u.get=o),(o=a(g.set))&&(u.set=o),(o=a(g.init))&&s.unshift(o)}else(o=a(g))&&("field"===l?s.unshift(o):u[c]=o)}d&&Object.defineProperty(d,r.name,u),h=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const n=i(5675),a=i(9023),o=i(131),l=i(6860),c=i(8692),d=i(9302),u=i(267),h=i(8996),p=i(3822),f=i(9503),m=i(4892),g=~(1<<31),v=~(1<<31),y=~(1<<31),{HTTP2_HEADER_PATH:b}=n.constants,S=Buffer.from("max_age");function C(e){u.trace(o.LogVerbosity.DEBUG,"server_call",e)}function _(){}function T(e){return{code:o.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}let E=(()=>{var e;let t,i=[];return e=class{constructor(e){var t,s,n,a,o,l;this.boundPorts=(r(this,i),new Map),this.http2Servers=new Map,this.sessionIdleTimeouts=new Map,this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.channelzTrace=new f.ChannelzTraceStub,this.callTracker=new f.ChannelzCallTrackerStub,this.listenerChildrenTracker=new f.ChannelzChildrenTrackerStub,this.sessionChildrenTracker=new f.ChannelzChildrenTrackerStub):(this.channelzTrace=new f.ChannelzTrace,this.callTracker=new f.ChannelzCallTracker,this.listenerChildrenTracker=new f.ChannelzChildrenTracker,this.sessionChildrenTracker=new f.ChannelzChildrenTracker),this.channelzRef=(0,f.registerChannelzServer)("server",()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:g,this.maxConnectionAgeGraceMs=null!==(s=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==s?s:g,this.keepaliveTimeMs=null!==(n=this.options["grpc.keepalive_time_ms"])&&void 0!==n?n:v,this.keepaliveTimeoutMs=null!==(a=this.options["grpc.keepalive_timeout_ms"])&&void 0!==a?a:2e4,this.sessionIdleTimeout=null!==(o=this.options["grpc.max_connection_idle_ms"])&&void 0!==o?o:y,this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER},"grpc-node.max_session_memory"in this.options?this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"]:this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}),this.interceptors=null!==(l=this.options.interceptors)&&void 0!==l?l:[],this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(e){var t,i,r;const s=this.sessions.get(e),n=e.socket,a=n.remoteAddress?(0,h.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null,o=n.localAddress?(0,h.stringToSubchannelAddress)(n.localAddress,n.localPort):null;let l;if(e.encrypted){const e=n,i=e.getCipher(),r=e.getCertificate(),s=e.getPeerCertificate();l={cipherSuiteStandardName:null!==(t=i.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:i.standardName?null:i.name,localCertificate:r&&"raw"in r?r.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else l=null;return{remoteAddress:a,localAddress:o,security:l,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:s.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(i=e.state.localWindowSize)&&void 0!==i?i:null,remoteFlowControlWindow:null!==(r=e.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){u.trace(o.LogVerbosity.DEBUG,"server","("+this.channelzRef.id+") "+e)}keepaliveTrace(e){u.trace(o.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw new Error("addService() requires two objects as arguments");const i=Object.keys(e);if(0===i.length)throw new Error("Cannot add an empty service to a server");i.forEach(i=>{const r=e[i];let s;s=r.requestStream?r.responseStream?"bidi":"clientStream":r.responseStream?"serverStream":"unary";let n,a=t[i];if(void 0===a&&"string"==typeof r.originalName&&(a=t[r.originalName]),n=void 0!==a?a.bind(t):function(e,t){const i=T(t);switch(e){case"unary":case"clientStream":return(e,t)=>{t(i,null)};case"serverStream":case"bidi":return e=>{e.emit("error",i)};default:throw new Error(`Invalid handlerType ${e}`)}}(s,i),!1===this.register(r.path,n,r.responseSerialize,r.requestDeserialize,s))throw new Error(`Method handler for ${r.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw new Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{const i=e[t];this.unregister(i.path)})}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(e){return(0,f.registerChannelzSocket)((0,h.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(e){(0,f.unregisterChannelzRef)(e)}createHttp2Server(e){let t;if(e._isSecure()){const i=e._getConstructorOptions(),r=e._getSecureContextOptions(),s=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),i),r),{enableTrace:1===this.options["grpc-node.tls_enable_trace"]});let a=null!==r;this.trace("Initial credentials valid: "+a),t=n.createSecureServer(s),t.prependListener("connection",e=>{a||(this.trace("Dropped connection from "+JSON.stringify(e.address())+" due to unloaded credentials"),e.destroy())}),t.on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})});const l=e=>{if(e){const i=t;try{i.setSecureContext(e)}catch(t){u.log(o.LogVerbosity.ERROR,"Failed to set secure context with error "+t.message),e=null}}a=null!==e,this.trace("Post-update credentials valid: "+a)};e._addWatcher(l),t.on("close",()=>{e._removeWatcher(l)})}else t=n.createServer(this.commonServerOptions);return t.setTimeout(0,_),this._setupHandlers(t,e._getInterceptors()),t}bindOneAddress(e,t){this.trace("Attempting to bind "+(0,h.subchannelAddressToString)(e));const i=this.createHttp2Server(t.credentials);return new Promise((r,s)=>{const n=t=>{this.trace("Failed to bind "+(0,h.subchannelAddressToString)(e)+" with error "+t.message),r({port:"port"in e?e.port:1,error:t.message})};i.once("error",n),i.listen(e,()=>{const e=i.address();let s;s="string"==typeof e?{path:e}:{host:e.address,port:e.port};const a=this.experimentalRegisterListenerToChannelz(s);this.listenerChildrenTracker.refChild(a),this.http2Servers.set(i,{channelzRef:a,sessions:new Set,ownsChannelzRef:!0}),t.listeningServers.add(i),this.trace("Successfully bound "+(0,h.subchannelAddressToString)(s)),r({port:"port"in s?s.port:1}),i.removeListener("error",n)})})}async bindManyPorts(e,t){if(0===e.length)return{count:0,port:0,errors:[]};if((0,h.isTcpSubchannelAddress)(e[0])&&0===e[0].port){const i=await this.bindOneAddress(e[0],t);if(i.error){const r=await this.bindManyPorts(e.slice(1),t);return Object.assign(Object.assign({},r),{errors:[i.error,...r.errors]})}{const r=e.slice(1).map(e=>(0,h.isTcpSubchannelAddress)(e)?{host:e.host,port:i.port}:e),s=await Promise.all(r.map(e=>this.bindOneAddress(e,t))),n=[i,...s];return{count:n.filter(e=>void 0===e.error).length,port:i.port,errors:n.filter(e=>e.error).map(e=>e.error)}}}{const i=await Promise.all(e.map(e=>this.bindOneAddress(e,t)));return{count:i.filter(e=>void 0===e.error).length,port:i[0].port,errors:i.filter(e=>e.error).map(e=>e.error)}}}async bindAddressList(e,t){const i=await this.bindManyPorts(e,t);if(i.count>0)return i.count<e.length&&u.log(o.LogVerbosity.INFO,`WARNING Only ${i.count} addresses added out of total ${e.length} resolved`),i.port;{const t=`No address added out of total ${e.length} resolved`;throw u.log(o.LogVerbosity.ERROR,t),new Error(`${t} errors: [${i.errors.join(",")}]`)}}resolvePort(e){return new Promise((t,i)=>{let r=!1;(0,d.createResolver)(e,(s,n,a,o)=>{if(r)return!0;if(r=!0,!s.ok)return i(new Error(s.error.details)),!0;const l=[].concat(...s.value.map(e=>e.addresses));return 0===l.length?(i(new Error(`No addresses resolved for port ${e}`)),!0):(t(l),!0)},this.options).updateResolution()})}async bindPort(e,t){const i=await this.resolvePort(e);if(t.cancelled)throw this.completeUnbind(t),new Error("bindAsync operation cancelled by unbind call");const r=await this.bindAddressList(i,t);if(t.cancelled)throw this.completeUnbind(t),new Error("bindAsync operation cancelled by unbind call");return r}normalizePort(e){const t=(0,p.parseUri)(e);if(null===t)throw new Error(`Could not parse port "${e}"`);const i=(0,d.mapUriDefaultScheme)(t);if(null===i)throw new Error(`Could not get a default scheme for port "${e}"`);return i}bindAsync(e,t,i){if(this.shutdown)throw new Error("bindAsync called after shutdown");if("string"!=typeof e)throw new TypeError("port must be a string");if(null===t||!(t instanceof c.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if("function"!=typeof i)throw new TypeError("callback must be a function");this.trace("bindAsync port="+e);const r=this.normalizePort(e),s=(e,t)=>{process.nextTick(()=>i(e,t))};let n=this.boundPorts.get((0,p.uriToString)(r));if(n)return t._equals(n.credentials)?(n.cancelled=!1,void(n.completionPromise?n.completionPromise.then(e=>i(null,e),e=>i(e,0)):s(null,n.portNumber))):void s(new Error(`${e} already bound with incompatible credentials`),0);n={mapKey:(0,p.uriToString)(r),originalUri:r,completionPromise:null,cancelled:!1,portNumber:0,credentials:t,listeningServers:new Set};const a=(0,p.splitHostPort)(r.path),o=this.bindPort(r,n);n.completionPromise=o,0===(null==a?void 0:a.port)?o.then(e=>{const t={scheme:r.scheme,authority:r.authority,path:(0,p.combineHostPort)({host:a.host,port:e})};n.mapKey=(0,p.uriToString)(t),n.completionPromise=null,n.portNumber=e,this.boundPorts.set(n.mapKey,n),i(null,e)},e=>{i(e,0)}):(this.boundPorts.set(n.mapKey,n),o.then(e=>{n.completionPromise=null,n.portNumber=e,i(null,e)},e=>{i(e,0)}))}registerInjectorToChannelz(){return(0,f.registerChannelzSocket)("injector",()=>({localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(e,t,i=!1){if(null===e||!(e instanceof c.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");this.channelzEnabled&&this.listenerChildrenTracker.refChild(t);const r=this.createHttp2Server(e),s=new Set;return this.http2Servers.set(r,{channelzRef:t,sessions:s,ownsChannelzRef:i}),{injectConnection:e=>{r.emit("connection",e)},drain:e=>{var t,i;for(const e of s)this.closeSession(e);null===(i=(t=setTimeout(()=>{for(const e of s)e.destroy(n.constants.NGHTTP2_CANCEL)},e)).unref)||void 0===i||i.call(t)},destroy:()=>{this.closeServer(r);for(const e of s)this.closeSession(e)}}}createConnectionInjector(e){if(null===e||!(e instanceof c.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");const t=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(e,t,!0)}closeServer(e,t){this.trace("Closing server with address "+JSON.stringify(e.address()));const i=this.http2Servers.get(e);e.close(()=>{i&&i.ownsChannelzRef&&(this.listenerChildrenTracker.unrefChild(i.channelzRef),(0,f.unregisterChannelzRef)(i.channelzRef)),this.http2Servers.delete(e),null==t||t()})}closeSession(e,t){var i;this.trace("Closing session initiated by "+(null===(i=e.socket)||void 0===i?void 0:i.remoteAddress));const r=this.sessions.get(e),s=()=>{r&&(this.sessionChildrenTracker.unrefChild(r.ref),(0,f.unregisterChannelzRef)(r.ref)),null==t||t()};e.closed?queueMicrotask(s):e.close(s)}completeUnbind(e){for(const t of e.listeningServers){const i=this.http2Servers.get(t);if(this.closeServer(t,()=>{e.listeningServers.delete(t)}),i)for(const e of i.sessions)this.closeSession(e)}this.boundPorts.delete(e.mapKey)}unbind(e){this.trace("unbind port="+e);const t=this.normalizePort(e),i=(0,p.splitHostPort)(t.path);if(0===(null==i?void 0:i.port))throw new Error("Cannot unbind port 0");const r=this.boundPorts.get((0,p.uriToString)(t));r&&(this.trace("unbinding "+r.mapKey+" originally bound as "+(0,p.uriToString)(r.originalUri)),r.completionPromise?r.cancelled=!0:this.completeUnbind(r))}drain(e,t){var i,r;this.trace("drain port="+e+" graceTimeMs="+t);const s=this.normalizePort(e),a=(0,p.splitHostPort)(s.path);if(0===(null==a?void 0:a.port))throw new Error("Cannot drain port 0");const o=this.boundPorts.get((0,p.uriToString)(s));if(!o)return;const l=new Set;for(const e of o.listeningServers){const t=this.http2Servers.get(e);if(t)for(const e of t.sessions)l.add(e),this.closeSession(e,()=>{l.delete(e)})}null===(r=(i=setTimeout(()=>{for(const e of l)e.destroy(n.constants.NGHTTP2_CANCEL)},t)).unref)||void 0===r||r.call(i)}forceShutdown(){for(const e of this.boundPorts.values())e.cancelled=!0;this.boundPorts.clear();for(const e of this.http2Servers.keys())this.closeServer(e);this.sessions.forEach((e,t)=>{this.closeSession(t),t.destroy(n.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),(0,f.unregisterChannelzRef)(this.channelzRef),this.shutdown=!0}register(e,t,i,r,s){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:i,deserialize:r,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2Servers.size||[...this.http2Servers.keys()].every(e=>!e.listening))throw new Error("server must be bound in order to start");if(!0===this.started)throw new Error("server is already started");this.started=!0}tryShutdown(e){var t;const i=t=>{(0,f.unregisterChannelzRef)(this.channelzRef),e(t)};let r=0;function s(){r--,0===r&&i()}this.shutdown=!0;for(const[e,i]of this.http2Servers.entries()){r++;const n=i.channelzRef.name;this.trace("Waiting for server "+n+" to close"),this.closeServer(e,()=>{this.trace("Server "+n+" finished closing"),s()});for(const e of i.sessions.keys()){r++;const i=null===(t=e.socket)||void 0===t?void 0:t.remoteAddress;this.trace("Waiting for session "+i+" to close"),this.closeSession(e,()=>{this.trace("Session "+i+" finished closing"),s()})}}0===r&&i()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){const i=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return!("string"!=typeof i||!i.startsWith("application/grpc"))||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){C("Received call to method "+e+" at address "+this.serverAddressString);const t=this.handlers.get(e);return void 0===t?(C("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,i=null){var r,s;const a=Object.assign({"grpc-status":null!==(r=e.code)&&void 0!==r?r:o.Status.INTERNAL,"grpc-message":e.details,[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_OK,[n.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},null===(s=e.metadata)||void 0===s?void 0:s.toHttp2Headers());t.respond(a,{endStream:!0}),this.callTracker.addCallFailed(),null==i||i.streamTracker.addCallFailed()}_channelzHandler(e,t,i){this.onStreamOpened(t);const r=this.sessions.get(t.session);if(this.callTracker.addCallStarted(),null==r||r.streamTracker.addCallStarted(),!this._verifyContentType(t,i))return this.callTracker.addCallFailed(),void(null==r||r.streamTracker.addCallFailed());const s=i[b],n=this._retrieveHandler(s);if(!n)return void this._respondWithError(T(s),t,r);const a={addMessageSent:()=>{r&&(r.messagesSent+=1,r.lastMessageSentTimestamp=new Date)},addMessageReceived:()=>{r&&(r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date)},onCallEnd:e=>{e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()},onStreamEnd:e=>{r&&(e?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed())}},l=(0,m.getServerInterceptingCall)([...e,...this.interceptors],t,i,a,n,this.options);this._runHandlerForCall(l,n)||(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed(),l.sendStatus({code:o.Status.INTERNAL,details:`Unknown handler type: ${n.type}`}))}_streamHandler(e,t,i){if(this.onStreamOpened(t),!0!==this._verifyContentType(t,i))return;const r=i[b],s=this._retrieveHandler(r);if(!s)return void this._respondWithError(T(r),t,null);const n=(0,m.getServerInterceptingCall)([...e,...this.interceptors],t,i,null,s,this.options);this._runHandlerForCall(n,s)||n.sendStatus({code:o.Status.INTERNAL,details:`Unknown handler type: ${s.type}`})}_runHandlerForCall(e,t){const{type:i}=t;if("unary"===i)!async function(e,t){let i,r;function s(t,i,r,s){t?e.sendStatus((0,l.serverErrorToStatus)(t,r)):e.sendMessage(i,()=>{e.sendStatus({code:o.Status.OK,details:"OK",metadata:null!=r?r:null})})}let n=null;e.start({onReceiveMetadata(t){r=t,e.startRead()},onReceiveMessage(i){n?e.sendStatus({code:o.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null}):(n=i,e.startRead())},onReceiveHalfClose(){if(n){i=new l.ServerWritableStreamImpl(t.path,e,r,n);try{t.func(i,s)}catch(t){e.sendStatus({code:o.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}}else e.sendStatus({code:o.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null})},onCancel(){i&&(i.cancelled=!0,i.emit("cancelled","cancelled"))}})}(e,t);else if("clientStream"===i)!function(e,t){let i;function r(t,i,r,s){t?e.sendStatus((0,l.serverErrorToStatus)(t,r)):e.sendMessage(i,()=>{e.sendStatus({code:o.Status.OK,details:"OK",metadata:null!=r?r:null})})}e.start({onReceiveMetadata(s){i=new l.ServerDuplexStreamImpl(t.path,e,s);try{t.func(i,r)}catch(t){e.sendStatus({code:o.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){i.push(e)},onReceiveHalfClose(){i.push(null)},onCancel(){i&&(i.cancelled=!0,i.emit("cancelled","cancelled"),i.destroy())}})}(e,t);else if("serverStream"===i)!function(e,t){let i,r,s=null;e.start({onReceiveMetadata(t){r=t,e.startRead()},onReceiveMessage(i){s?e.sendStatus({code:o.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null}):(s=i,e.startRead())},onReceiveHalfClose(){if(s){i=new l.ServerWritableStreamImpl(t.path,e,r,s);try{t.func(i)}catch(t){e.sendStatus({code:o.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}}else e.sendStatus({code:o.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null})},onCancel(){i&&(i.cancelled=!0,i.emit("cancelled","cancelled"),i.destroy())}})}(e,t);else{if("bidi"!==i)return!1;!function(e,t){let i;e.start({onReceiveMetadata(r){i=new l.ServerDuplexStreamImpl(t.path,e,r);try{t.func(i)}catch(t){e.sendStatus({code:o.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){i.push(e)},onReceiveHalfClose(){i.push(null)},onCancel(){i&&(i.cancelled=!0,i.emit("cancelled","cancelled"),i.destroy())}})}(e,t)}return!0}_setupHandlers(e,t){if(null===e)return;const i=e.address();let r="null";i&&(r="string"==typeof i?i:i.address+":"+i.port),this.serverAddressString=r;const s=this.channelzEnabled?this._channelzHandler:this._streamHandler,n=this.channelzEnabled?this._channelzSessionHandler(e):this._sessionHandler(e);e.on("stream",s.bind(this,t)),e.on("session",n)}_sessionHandler(e){return t=>{var i,r;null===(i=this.http2Servers.get(e))||void 0===i||i.sessions.add(t);let s=null,a=null,o=null,l=!1;const c=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==g){const e=this.maxConnectionAgeMs/10,i=Math.random()*e*2-e;s=setTimeout(()=>{var e,i;l=!0,this.trace("Connection dropped by max connection age: "+(null===(e=t.socket)||void 0===e?void 0:e.remoteAddress));try{t.goaway(n.constants.NGHTTP2_NO_ERROR,~(1<<31),S)}catch(e){return void t.destroy()}t.close(),this.maxConnectionAgeGraceMs!==g&&(a=setTimeout(()=>{t.destroy()},this.maxConnectionAgeGraceMs),null===(i=a.unref)||void 0===i||i.call(a))},this.maxConnectionAgeMs+i),null===(r=s.unref)||void 0===r||r.call(s)}const d=()=>{o&&(clearTimeout(o),o=null)},u=()=>!t.destroyed&&this.keepaliveTimeMs<v&&this.keepaliveTimeMs>0;let h;const p=()=>{var e;u()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),o=setTimeout(()=>{d(),h()},this.keepaliveTimeMs),null===(e=o.unref)||void 0===e||e.call(o))};h=()=>{var e;if(!u())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let i="";try{t.ping((e,i,r)=>{d(),e?(this.keepaliveTrace("Ping failed with error: "+e.message),l=!0,t.destroy()):(this.keepaliveTrace("Received ping response"),p())})||(i="Ping returned false")}catch(e){i=(e instanceof Error?e.message:"")||"Unknown error"}if(i)return this.keepaliveTrace("Ping send failed: "+i),this.trace("Connection dropped due to ping send error: "+i),l=!0,void t.destroy();o=setTimeout(()=>{d(),this.keepaliveTrace("Ping timeout passed without response"),this.trace("Connection dropped by keepalive timeout"),l=!0,t.destroy()},this.keepaliveTimeoutMs),null===(e=o.unref)||void 0===e||e.call(o)},p(),t.on("close",()=>{var i,r;l||this.trace(`Connection dropped by client ${null===(i=t.socket)||void 0===i?void 0:i.remoteAddress}`),s&&clearTimeout(s),a&&clearTimeout(a),d(),null!==c&&(clearTimeout(c.timeout),this.sessionIdleTimeouts.delete(t)),null===(r=this.http2Servers.get(e))||void 0===r||r.sessions.delete(t)})}}_channelzSessionHandler(e){return t=>{var i,r,s,a;const o=(0,f.registerChannelzSocket)(null!==(r=null===(i=t.socket)||void 0===i?void 0:i.remoteAddress)&&void 0!==r?r:"unknown",this.getChannelzSessionInfo.bind(this,t),this.channelzEnabled),l={ref:o,streamTracker:new f.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};null===(s=this.http2Servers.get(e))||void 0===s||s.sessions.add(t),this.sessions.set(t,l);const c=`${t.socket.remoteAddress}:${t.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+c),this.trace("Connection established by client "+c),this.sessionChildrenTracker.refChild(o);let d=null,u=null,h=null,p=!1;const m=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==g){const e=this.maxConnectionAgeMs/10,i=Math.random()*e*2-e;d=setTimeout(()=>{var e;p=!0,this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+c);try{t.goaway(n.constants.NGHTTP2_NO_ERROR,~(1<<31),S)}catch(e){return void t.destroy()}t.close(),this.maxConnectionAgeGraceMs!==g&&(u=setTimeout(()=>{t.destroy()},this.maxConnectionAgeGraceMs),null===(e=u.unref)||void 0===e||e.call(u))},this.maxConnectionAgeMs+i),null===(a=d.unref)||void 0===a||a.call(d)}const y=()=>{h&&(clearTimeout(h),h=null)},b=()=>!t.destroyed&&this.keepaliveTimeMs<v&&this.keepaliveTimeMs>0;let C;const _=()=>{var e;b()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),h=setTimeout(()=>{y(),C()},this.keepaliveTimeMs),null===(e=h.unref)||void 0===e||e.call(h))};C=()=>{var e;if(!b())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let i="";try{t.ping((e,i,r)=>{y(),e?(this.keepaliveTrace("Ping failed with error: "+e.message),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+e.message+" return in "+i),p=!0,t.destroy()):(this.keepaliveTrace("Received ping response"),_())})||(i="Ping returned false")}catch(e){i=(e instanceof Error?e.message:"")||"Unknown error"}if(i)return this.keepaliveTrace("Ping send failed: "+i),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+i),p=!0,void t.destroy();l.keepAlivesSent+=1,h=setTimeout(()=>{y(),this.keepaliveTrace("Ping timeout passed without response"),this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+c),p=!0,t.destroy()},this.keepaliveTimeoutMs),null===(e=h.unref)||void 0===e||e.call(h)},_(),t.on("close",()=>{var i;p||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+c),this.sessionChildrenTracker.unrefChild(o),(0,f.unregisterChannelzRef)(o),d&&clearTimeout(d),u&&clearTimeout(u),y(),null!==m&&(clearTimeout(m.timeout),this.sessionIdleTimeouts.delete(t)),null===(i=this.http2Servers.get(e))||void 0===i||i.sessions.delete(t),this.sessions.delete(t)})}}enableIdleTimeout(e){var t,i;if(this.sessionIdleTimeout>=y)return null;const r={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,e),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,e)};null===(i=(t=r.timeout).unref)||void 0===i||i.call(t),this.sessionIdleTimeouts.set(e,r);const{socket:s}=e;return this.trace("Enable idle timeout for "+s.remoteAddress+":"+s.remotePort),r}onIdleTimeout(e,t){const{socket:i}=t,r=e.sessionIdleTimeouts.get(t);void 0!==r&&0===r.activeStreams&&(Date.now()-r.lastIdle>=e.sessionIdleTimeout?(e.trace("Session idle timeout triggered for "+(null==i?void 0:i.remoteAddress)+":"+(null==i?void 0:i.remotePort)+" last idle at "+r.lastIdle),e.closeSession(t)):r.timeout.refresh())}onStreamOpened(e){const t=e.session,i=this.sessionIdleTimeouts.get(t);i&&(i.activeStreams+=1,e.once("close",i.onClose))}onStreamClose(e){var t,i;const r=this.sessionIdleTimeouts.get(e);r&&(r.activeStreams-=1,0===r.activeStreams&&(r.lastIdle=Date.now(),r.timeout.refresh(),this.trace("Session onStreamClose"+(null===(t=e.socket)||void 0===t?void 0:t.remoteAddress)+":"+(null===(i=e.socket)||void 0===i?void 0:i.remotePort)+" at "+r.lastIdle)))}},(()=>{const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;t=[function(e,t){return a.deprecate(e,"Calling start() is no longer necessary. It can be safely omitted.")}],s(e,null,t,{kind:"method",name:"start",static:!1,private:!1,access:{has:e=>"start"in e,get:e=>e.start},metadata:r},null,i),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),e})();t.Server=E},6067:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=function(e,t){return s.includes(e)?{code:r.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${r.Status[e]} ${t}`}:{code:e,details:t}};const r=i(131),s=[r.Status.OK,r.Status.INVALID_ARGUMENT,r.Status.NOT_FOUND,r.Status.ALREADY_EXISTS,r.Status.FAILED_PRECONDITION,r.Status.ABORTED,r.Status.OUT_OF_RANGE,r.Status.DATA_LOSS]},6237:(e,t,i)=>{"use strict";e.exports=l;var r,s=i(3610),n=s.LongBits,a=s.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},u=function(){return s.Buffer?function(e){return(l.create=function(e){return s.Buffer.isBuffer(e)?new r(e):d(e)})(e)}:d};function h(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new n(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,i);if(t===i){var r=s.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){r=e,l.create=u(),r._configure();var t=s.Long?"toLong":"toNumber";s.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},6308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minDeadline=function(...e){let t=1/0;for(const i of e){const e=i instanceof Date?i.getTime():i;e<t&&(t=e)}return t},t.getDeadlineTimeoutString=function(e){const t=(new Date).getTime();e instanceof Date&&(e=e.getTime());const r=Math.max(e-t,0);for(const[e,t]of i){const i=r/t;if(i<1e8)return String(Math.ceil(i))+e}throw new Error("Deadline is too far in the future")},t.getRelativeTimeout=function(e){const t=(e instanceof Date?e.getTime():e)-(new Date).getTime();return t<0?0:t>r?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{const t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}},t.formatDateDifference=function(e,t){return((t.getTime()-e.getTime())/1e3).toFixed(3)+"s"};const i=[["m",1],["S",1e3],["M",6e4],["H",36e5]],r=2147483647},6340:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFileDescriptorSetFromObject=t.loadFileDescriptorSetFromBuffer=t.fromJSON=t.loadSync=t.load=t.IdempotencyLevel=t.isAnyExtension=t.Long=void 0;const r=i(2028),s=i(2549),n=i(5407),a=i(1238),o=i(4442);var l;t.Long=o,t.isAnyExtension=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(l=t.IdempotencyLevel||(t.IdempotencyLevel={}));const c={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function d(e,t){const i=(r=t,n=e.name,""===r?n:r+"."+n);var r,n;return function(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}(e)?[[i,e]]:function(e){return e instanceof s.Namespace||e instanceof s.Root}(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>d(e.nested[t],i)).reduce((e,t)=>e.concat(t),[]):[]}function u(e,t){return function(i){return e.toObject(e.decode(i),t)}}function h(e){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);const i=e.fromObject(t);return e.encode(i).finish()}}function p(e){return(e||[]).reduce((e,t)=>{for(const[i,r]of Object.entries(t))"uninterpreted_option"===i?e.uninterpreted_option.push(t.uninterpreted_option):e[i]=r;return e},{deprecated:!1,idempotency_level:l.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function f(e,t,i,s){const n=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:h(n),requestDeserialize:u(n,i),responseSerialize:h(a),responseDeserialize:u(a,i),originalName:r(e.name),requestType:m(n,s),responseType:m(a,s),options:p(e.parsedOptions)}}function m(e,t){const i=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:i.$type.toObject(i,c),fileDescriptorProtos:t}}function g(e,t,i,r){if(e instanceof s.Service)return function(e,t,i,r){const s={};for(const n of e.methodsArray)s[n.name]=f(n,t,i,r);return s}(e,t,i,r);if(e instanceof s.Type)return m(e,r);if(e instanceof s.Enum)return function(e,t){const i=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:i.$type.toObject(i,c),fileDescriptorProtos:t}}(e,r);throw new Error("Type mismatch in reflection object handling")}function v(e,t){const i={};e.resolveAll();const r=e.toDescriptor("proto3").file.map(e=>Buffer.from(n.FileDescriptorProto.encode(e).finish()));for(const[s,n]of d(e,""))i[s]=g(n,s,t,r);return i}function y(e,t){t=t||{};const i=s.Root.fromDescriptor(e);return i.resolveAll(),v(i,t)}t.load=function(e,t){return(0,a.loadProtosWithOptions)(e,t).then(e=>v(e,t))},t.loadSync=function(e,t){return v((0,a.loadProtosWithOptionsSync)(e,t),t)},t.fromJSON=function(e,t){t=t||{};const i=s.Root.fromJSON(e);return i.resolveAll(),v(i,t)},t.loadFileDescriptorSetFromBuffer=function(e,t){return y(n.FileDescriptorSet.decode(e),t)},t.loadFileDescriptorSetFromObject=function(e,t){return y(n.FileDescriptorSet.fromObject(e),t)},(0,a.addCommonProtos)()},6434:(e,t,i)=>{"use strict";var r=t,s=i(2551);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),i=this.lookup(t);if(i){var r="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:i.encode(i.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var i="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var n=this.lookup(r);n&&(e=n.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var a=e.$type.toObject(e,t);return""===i&&(i="type.googleapis.com/"),r=i+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),a["@type"]=r,a}return this.toObject(e,t)}}},6486:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeafLoadBalancer=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0,t.shuffled=g,t.setup=function(){(0,r.registerLoadBalancerType)(p,y,f),(0,r.registerDefaultLoadBalancerType)(p)};const r=i(8923),s=i(463),n=i(178),a=i(8996),o=i(267),l=i(131),c=i(8996),d=i(9278),u=i(5034);function h(e){o.trace(l.LogVerbosity.DEBUG,"pick_first",e)}const p="pick_first";class f{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return p}toJsonObject(){return{[p]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new f(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=f;class m{constructor(e){this.subchannel=e}pick(e){return{pickResultType:n.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function g(e){const t=e.slice();for(let e=t.length-1;e>1;e--){const i=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t}const v="grpc-node.internal.pick-first.report_health_status";class y{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=s.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,i,r,s)=>{this.onSubchannelStateUpdate(e,t,i,s)},this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState(),this.stickyTransientFailureMode=!1,this.reportHealthStatus=!1,this.lastError=null,this.latestAddressList=null,this.latestOptions={},this.latestResolutionNote="",this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}resetChildrenReportedTF(){this.children.every(e=>e.hasReportedTransientFailure=!1)}calculateAndReportNewState(){var e;if(this.currentPick)if(this.reportHealthStatus&&!this.currentPick.isHealthy()){const e=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker({details:e}),e)}else this.updateState(s.ConnectivityState.READY,new m(this.currentPick),null);else if(0===(null===(e=this.latestAddressList)||void 0===e?void 0:e.length)){const e=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker({details:e}),e)}else if(0===this.children.length)this.updateState(s.ConnectivityState.IDLE,new n.QueuePicker(this),null);else if(this.stickyTransientFailureMode){const e=`No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker({details:e}),e)}else this.updateState(s.ConnectivityState.CONNECTING,new n.QueuePicker(this),null)}requestReresolution(){this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF())if(this.requestReresolution(),this.resetChildrenReportedTF(),this.stickyTransientFailureMode)this.calculateAndReportNewState();else{this.stickyTransientFailureMode=!0;for(const{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){null!==this.currentPick&&(this.currentPick.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick.unref(),this.currentPick=null)}onSubchannelStateUpdate(e,t,i,r){var n;if(null===(n=this.currentPick)||void 0===n?void 0:n.realSubchannelEquals(e))i!==s.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState());else for(const[t,n]of this.children.entries())if(e.realSubchannelEquals(n.subchannel))return i===s.ConnectivityState.READY&&this.pickSubchannel(n.subchannel),i===s.ConnectivityState.TRANSIENT_FAILURE&&(n.hasReportedTransientFailure=!0,r&&(this.lastError=r),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),void n.subchannel.startConnecting()}startNextSubchannelConnecting(e){clearTimeout(this.connectionDelayTimeout);for(const[t,i]of this.children.entries())if(t>=e){const e=i.subchannel.getConnectivityState();if(e===s.ConnectivityState.IDLE||e===s.ConnectivityState.CONNECTING)return void this.startConnecting(t)}this.maybeEnterStickyTransientFailureMode()}startConnecting(e){var t,i;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===s.ConnectivityState.IDLE&&(h("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null===(t=this.children[e])||void 0===t||t.subchannel.startConnecting()})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},250),null===(i=(t=this.connectionDelayTimeout).unref)||void 0===i||i.call(t)}pickSubchannel(e){h("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.removeCurrentPick(),this.resetSubchannelList(),e.addConnectivityStateListener(this.subchannelStateListener),e.addHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick=e,clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState()}updateState(e,t,i){h(s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t,i)}resetSubchannelList(){for(const e of this.children)e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[]}connectToAddressList(e,t){h("connectToAddressList(["+e.map(e=>(0,a.subchannelAddressToString)(e))+"])");const i=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,t),hasReportedTransientFailure:!1}));for(const{subchannel:e}of i)if(e.getConnectivityState()===s.ConnectivityState.READY)return void this.pickSubchannel(e);for(const{subchannel:e}of i)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());this.resetSubchannelList(),this.children=i;for(const{subchannel:e}of this.children)e.addConnectivityStateListener(this.subchannelStateListener);for(const e of this.children)e.subchannel.getConnectivityState()===s.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t,i,r){if(!(t instanceof f))return!1;if(!e.ok)return 0===this.children.length&&null===this.currentPick&&this.channelControlHelper.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new n.UnavailablePicker(e.error),e.error.details),!0;let o=e.value;this.reportHealthStatus=i[v],t.getShuffleAddressList()&&(o=g(o));const l=[].concat(...o.map(e=>e.addresses));h("updateAddressList(["+l.map(e=>(0,a.subchannelAddressToString)(e))+"])");const u=function(e){if(0===e.length)return[];const t=[],i=[],r=[],s=(0,c.isTcpSubchannelAddress)(e[0])&&(0,d.isIPv6)(e[0].host);for(const t of e)(0,c.isTcpSubchannelAddress)(t)&&(0,d.isIPv6)(t.host)?i.push(t):r.push(t);const n=s?i:r,a=s?r:i;for(let e=0;e<Math.max(n.length,a.length);e++)e<n.length&&t.push(n[e]),e<a.length&&t.push(a[e]);return t}(l);return this.latestAddressList=u,this.latestOptions=i,this.connectToAddressList(u,i),this.latestResolutionNote=r,l.length>0||(this.lastError="No addresses resolved",!1)}exitIdle(){this.currentState===s.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList,this.latestOptions)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return p}}t.PickFirstLoadBalancer=y;const b=new f(!1);t.LeafLoadBalancer=class{constructor(e,t,i,a){this.endpoint=e,this.options=i,this.resolutionNote=a,this.latestState=s.ConnectivityState.IDLE;const o=(0,r.createChildChannelControlHelper)(t,{updateState:(e,i,r)=>{this.latestState=e,this.latestPicker=i,t.updateState(e,i,r)}});this.pickFirstBalancer=new y(o),this.latestPicker=new n.QueuePicker(this.pickFirstBalancer)}startConnecting(){this.pickFirstBalancer.updateAddressList((0,u.statusOrFromValue)([this.endpoint]),b,Object.assign(Object.assign({},this.options),{[v]:!0}),this.resolutionNote)}updateEndpoint(e,t){this.options=t,this.endpoint=e,this.latestState!==s.ConnectivityState.IDLE&&this.startConnecting()}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle()}destroy(){this.pickFirstBalancer.destroy()}}},6555:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(627),t),s(i(7231),t),s(i(1892),t),s(i(2146),t),s(i(2739),t),s(i(6837),t)},6700:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PORT=void 0,t.setup=function(){(0,r.registerResolver)("dns",g),(0,r.registerDefaultScheme)("dns")};const r=i(9302),s=i(2250),n=i(5656),a=i(131),o=i(5034),l=i(4097),c=i(267),d=i(131),u=i(3822),h=i(9278),p=i(3956),f=i(883);function m(e){c.trace(d.LogVerbosity.DEBUG,"dns_resolver",e)}t.DEFAULT_PORT=443;class g{constructor(e,i,r){var n,o,c;this.target=e,this.listener=i,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfigResult=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,this.alternativeResolver=new s.promises.Resolver,m("Resolver constructed for target "+(0,u.uriToString)(e)),e.authority&&this.alternativeResolver.setServers([e.authority]);const d=(0,u.splitHostPort)(e.path);null===d?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(d.host)||(0,h.isIPv6)(d.host)?(this.ipResult=[{addresses:[{host:d.host,port:null!==(n=d.port)&&void 0!==n?n:t.DEFAULT_PORT}]}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=d.host,this.port=null!==(o=d.port)&&void 0!==o?o:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===r["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:a.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,u.uriToString)(this.target)}`,metadata:new l.Metadata};const f={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new p.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},f),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(c=r["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==c?c:3e4,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult)return this.returnedIpResult||(m("Returning IP address for target "+(0,u.uriToString)(this.target)),setImmediate(()=>{this.listener((0,o.statusOrFromValue)(this.ipResult),{},null,"")}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),void this.stopNextResolutionTimer();if(null===this.dnsHostname)m("Failed to parse DNS address "+(0,u.uriToString)(this.target)),setImmediate(()=>{this.listener((0,o.statusOrFromError)({code:a.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,u.uriToString)(this.target)}`}),{},null,"")}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;m("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=this.lookup(e),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.latestLookupResult=(0,o.statusOrFromValue)(e.map(e=>({addresses:[e]})));const t="["+e.map(e=>e.host+":"+e.port).join(",")+"]";m("Resolved addresses for target "+(0,u.uriToString)(this.target)+": "+t);const i=this.listener(this.latestLookupResult,{},this.latestServiceConfigResult,"");this.handleHealthStatus(i)},e=>{null!==this.pendingLookupPromise&&(m("Resolution error for target "+(0,u.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener((0,o.statusOrFromError)(this.defaultResolutionError),{},this.latestServiceConfigResult,""))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=this.resolveTxt(e),this.pendingTxtPromise.then(e=>{if(null===this.pendingTxtPromise)return;let t;this.pendingTxtPromise=null;try{t=(0,n.extractAndSelectServiceConfig)(e,this.percentage),this.latestServiceConfigResult=t?(0,o.statusOrFromValue)(t):null}catch(e){this.latestServiceConfigResult=(0,o.statusOrFromError)({code:a.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`})}null!==this.latestLookupResult&&this.listener(this.latestLookupResult,{},this.latestServiceConfigResult,"")},e=>{}))}}handleHealthStatus(e){e?(this.backoff.stop(),this.backoff.reset()):this.continueResolving=!0}async lookup(e){if(f.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){m("Using alternative DNS resolver.");const t=await Promise.allSettled([this.alternativeResolver.resolve4(e),this.alternativeResolver.resolve6(e)]);if(t.every(e=>"rejected"===e.status))throw new Error(t[0].reason);return t.reduce((e,t)=>"fulfilled"===t.status?[...e,...t.value]:e,[]).map(e=>({host:e,port:+this.port}))}return(await s.promises.lookup(e,{all:!0})).map(e=>({host:e.address,port:+this.port}))}async resolveTxt(e){return f.GRPC_NODE_USE_ALTERNATIVE_RESOLVER?(m("Using alternative DNS resolver."),this.alternativeResolver.resolveTxt(e)):s.promises.resolveTxt(e)}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs),null===(t=(e=this.nextResolutionTimer).unref)||void 0===t||t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?m('resolution update delayed by "min time between resolutions" rate limit'):m("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfigResult=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}},6710:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},6787:(e,t,i)=>{"use strict";i.r(t),i.d(t,{OrderedMap:()=>u});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}"function"==typeof SuppressedError&&SuppressedError;var n=function(){function e(e,t,i){void 0===i&&(i=1),this.t=void 0,this.i=void 0,this.h=void 0,this.u=e,this.o=t,this.l=i}return e.prototype.v=function(){var e=this,t=e.h.h===e;if(t&&1===e.l)e=e.i;else if(e.t)for(e=e.t;e.i;)e=e.i;else{if(t)return e.h;for(var i=e.h;i.t===e;)i=(e=i).h;e=i}return e},e.prototype.p=function(){var e=this;if(e.i){for(e=e.i;e.t;)e=e.t;return e}for(var t=e.h;t.i===e;)t=(e=t).h;return e.i!==t?t:e},e.prototype.T=function(){var e=this.h,t=this.i,i=t.t;return e.h===this?e.h=t:e.t===this?e.t=t:e.i=t,t.h=e,t.t=this,this.h=t,this.i=i,i&&(i.h=this),t},e.prototype.I=function(){var e=this.h,t=this.t,i=t.i;return e.h===this?e.h=t:e.t===this?e.t=t:e.i=t,t.h=e,t.i=this,this.h=t,this.t=i,i&&(i.h=this),t},e}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.O=1,t}return s(t,e),t.prototype.T=function(){var t=e.prototype.T.call(this);return this.M(),t.M(),t},t.prototype.I=function(){var t=e.prototype.I.call(this);return this.M(),t.M(),t},t.prototype.M=function(){this.O=1,this.t&&(this.O+=this.t.O),this.i&&(this.O+=this.i.O)},t}(n),o=function(){function e(e){void 0===e&&(e=0),this.iteratorType=e}return e.prototype.equals=function(e){return this.C===e.C},e}();function l(){throw new RangeError("Iterator access denied!")}var c=function(e){function t(t,i){void 0===t&&(t=function(e,t){return e<t?-1:e>t?1:0}),void 0===i&&(i=!1);var r=e.call(this)||this;return r.N=void 0,r.g=t,r.enableIndex=i,r.S=i?a:n,r.A=new r.S,r}return s(t,e),t.prototype.m=function(e,t){for(var i=this.A;e;){var r=this.g(e.u,t);if(r<0)e=e.i;else{if(!(r>0))return e;i=e,e=e.t}}return i},t.prototype.B=function(e,t){for(var i=this.A;e;)this.g(e.u,t)<=0?e=e.i:(i=e,e=e.t);return i},t.prototype.j=function(e,t){for(var i=this.A;e;){var r=this.g(e.u,t);if(r<0)i=e,e=e.i;else{if(!(r>0))return e;e=e.t}}return i},t.prototype.k=function(e,t){for(var i=this.A;e;)this.g(e.u,t)<0?(i=e,e=e.i):e=e.t;return i},t.prototype.R=function(e){for(;;){var t,i=e.h;if(i===this.A)return;if(1===e.l)return void(e.l=0);if(e===i.t)if(1===(t=i.i).l)t.l=0,i.l=1,i===this.N?this.N=i.T():i.T();else{if(t.i&&1===t.i.l)return t.l=i.l,i.l=0,t.i.l=0,void(i===this.N?this.N=i.T():i.T());t.t&&1===t.t.l?(t.l=1,t.t.l=0,t.I()):(t.l=1,e=i)}else if(1===(t=i.t).l)t.l=0,i.l=1,i===this.N?this.N=i.I():i.I();else{if(t.t&&1===t.t.l)return t.l=i.l,i.l=0,t.t.l=0,void(i===this.N?this.N=i.I():i.I());t.i&&1===t.i.l?(t.l=1,t.i.l=0,t.T()):(t.l=1,e=i)}}},t.prototype.G=function(e){if(1!==this._){for(var t=e;t.t||t.i;){if(t.i)for(t=t.i;t.t;)t=t.t;else t=t.t;var i=e.u;e.u=t.u,t.u=i;var r=e.o;e.o=t.o,t.o=r,e=t}this.A.t===t?this.A.t=t.h:this.A.i===t&&(this.A.i=t.h),this.R(t);var s=t.h;if(t===s.t?s.t=void 0:s.i=void 0,this._-=1,this.N.l=0,this.enableIndex)for(;s!==this.A;)s.O-=1,s=s.h}else this.clear()},t.prototype.P=function(e){for(var t="number"==typeof e?e:void 0,i="function"==typeof e?e:void 0,r=void 0===e?[]:void 0,s=0,n=this.N,a=[];a.length||n;)if(n)a.push(n),n=n.t;else{if(n=a.pop(),s===t)return n;r&&r.push(n),i&&i(n,s,this),s+=1,n=n.i}return r},t.prototype.q=function(e){for(;;){var t=e.h;if(0===t.l)return;var i=t.h;if(t===i.t){if((r=i.i)&&1===r.l){if(r.l=t.l=0,i===this.N)return;i.l=1,e=i;continue}if(e!==t.i)return t.l=0,i===this.N?this.N=i.I():i.I(),void(i.l=1);e.l=0,e.t&&(e.t.h=t),e.i&&(e.i.h=i),t.i=e.t,i.t=e.i,e.t=t,e.i=i,i===this.N?(this.N=e,this.A.h=e):(s=i.h).t===i?s.t=e:s.i=e,e.h=i.h,t.h=e,i.h=e,i.l=1}else{var r,s;if((r=i.t)&&1===r.l){if(r.l=t.l=0,i===this.N)return;i.l=1,e=i;continue}if(e!==t.t)return t.l=0,i===this.N?this.N=i.T():i.T(),void(i.l=1);e.l=0,e.t&&(e.t.h=i),e.i&&(e.i.h=t),i.i=e.t,t.t=e.i,e.t=i,e.i=t,i===this.N?(this.N=e,this.A.h=e):(s=i.h).t===i?s.t=e:s.i=e,e.h=i.h,t.h=e,i.h=e,i.l=1}return void(this.enableIndex&&(t.M(),i.M(),e.M()))}},t.prototype.D=function(e,t,i){if(void 0===this.N)return this._+=1,this.N=new this.S(e,t,0),this.N.h=this.A,this.A.h=this.A.t=this.A.i=this.N,this._;var r,s=this.A.t,n=this.g(s.u,e);if(0===n)return s.o=t,this._;if(n>0)s.t=new this.S(e,t),s.t.h=s,r=s.t,this.A.t=r;else{var a=this.A.i,o=this.g(a.u,e);if(0===o)return a.o=t,this._;if(o<0)a.i=new this.S(e,t),a.i.h=a,r=a.i,this.A.i=r;else{if(void 0!==i){var l=i.C;if(l!==this.A){var c=this.g(l.u,e);if(0===c)return l.o=t,this._;if(c>0){var d=l.v(),u=this.g(d.u,e);if(0===u)return d.o=t,this._;u<0&&(r=new this.S(e,t),void 0===d.i?(d.i=r,r.h=d):(l.t=r,r.h=l))}}}if(void 0===r)for(r=this.N;;){var h=this.g(r.u,e);if(h>0){if(void 0===r.t){r.t=new this.S(e,t),r.t.h=r,r=r.t;break}r=r.t}else{if(!(h<0))return r.o=t,this._;if(void 0===r.i){r.i=new this.S(e,t),r.i.h=r,r=r.i;break}r=r.i}}}}if(this.enableIndex)for(var p=r.h;p!==this.A;)p.O+=1,p=p.h;return this.q(r),this._+=1,this._},t.prototype.F=function(e,t){for(;e;){var i=this.g(e.u,t);if(i<0)e=e.i;else{if(!(i>0))return e;e=e.t}}return e||this.A},t.prototype.clear=function(){this._=0,this.N=void 0,this.A.h=void 0,this.A.t=this.A.i=void 0},t.prototype.updateKeyByIterator=function(e,t){var i=e.C;if(i===this.A&&l(),1===this._)return i.u=t,!0;var r=i.p().u;if(i===this.A.t)return this.g(r,t)>0&&(i.u=t,!0);var s=i.v().u;return i===this.A.i?this.g(s,t)<0&&(i.u=t,!0):!(this.g(s,t)>=0||this.g(r,t)<=0||(i.u=t,0))},t.prototype.eraseElementByPos=function(e){if(e<0||e>this._-1)throw new RangeError;var t=this.P(e);return this.G(t),this._},t.prototype.eraseElementByKey=function(e){if(0===this._)return!1;var t=this.F(this.N,e);return t!==this.A&&(this.G(t),!0)},t.prototype.eraseElementByIterator=function(e){var t=e.C;t===this.A&&l();var i=void 0===t.i;return 0===e.iteratorType?i&&e.next():i&&void 0!==t.t||e.next(),this.G(t),e},t.prototype.getHeight=function(){return 0===this._?0:function e(t){return t?Math.max(e(t.t),e(t.i))+1:0}(this.N)},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(function(){function e(){this._=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._},enumerable:!1,configurable:!0}),e.prototype.size=function(){return this._},e.prototype.empty=function(){return 0===this._},e}())),d=function(e){function t(t,i,r,s){var n=e.call(this,t,i,s)||this;return n.container=r,n}return s(t,e),Object.defineProperty(t.prototype,"pointer",{get:function(){this.C===this.A&&l();var e=this;return new Proxy([],{get:function(t,i){return"0"===i?e.C.u:"1"===i?e.C.o:(t[0]=e.C.u,t[1]=e.C.o,t[i])},set:function(t,i,r){if("1"!==i)throw new TypeError("prop must be 1");return e.C.o=r,!0}})},enumerable:!1,configurable:!0}),t.prototype.copy=function(){return new t(this.C,this.A,this.container,this.iteratorType)},t}(function(e){function t(t,i,r){var s=e.call(this,r)||this;return s.C=t,s.A=i,0===s.iteratorType?(s.pre=function(){return this.C===this.A.t&&l(),this.C=this.C.v(),this},s.next=function(){return this.C===this.A&&l(),this.C=this.C.p(),this}):(s.pre=function(){return this.C===this.A.i&&l(),this.C=this.C.p(),this},s.next=function(){return this.C===this.A&&l(),this.C=this.C.v(),this}),s}return s(t,e),Object.defineProperty(t.prototype,"index",{get:function(){var e=this.C,t=this.A.h;if(e===this.A)return t?t.O-1:0;var i=0;for(e.t&&(i+=e.t.O);e!==t;){var r=e.h;e===r.i&&(i+=1,r.t&&(i+=r.t.O)),e=r}return i},enumerable:!1,configurable:!0}),t.prototype.isAccessible=function(){return this.C!==this.A},t}(o)),u=function(e){function t(t,i,r){void 0===t&&(t=[]);var s=e.call(this,i,r)||this,n=s;return t.forEach(function(e){n.setElement(e[0],e[1])}),s}return s(t,e),t.prototype.begin=function(){return new d(this.A.t||this.A,this.A,this)},t.prototype.end=function(){return new d(this.A,this.A,this)},t.prototype.rBegin=function(){return new d(this.A.i||this.A,this.A,this,1)},t.prototype.rEnd=function(){return new d(this.A,this.A,this,1)},t.prototype.front=function(){if(0!==this._){var e=this.A.t;return[e.u,e.o]}},t.prototype.back=function(){if(0!==this._){var e=this.A.i;return[e.u,e.o]}},t.prototype.lowerBound=function(e){var t=this.m(this.N,e);return new d(t,this.A,this)},t.prototype.upperBound=function(e){var t=this.B(this.N,e);return new d(t,this.A,this)},t.prototype.reverseLowerBound=function(e){var t=this.j(this.N,e);return new d(t,this.A,this)},t.prototype.reverseUpperBound=function(e){var t=this.k(this.N,e);return new d(t,this.A,this)},t.prototype.forEach=function(e){this.P(function(t,i,r){e([t.u,t.o],i,r)})},t.prototype.setElement=function(e,t,i){return this.D(e,t,i)},t.prototype.getElementByPos=function(e){if(e<0||e>this._-1)throw new RangeError;var t=this.P(e);return[t.u,t.o]},t.prototype.find=function(e){var t=this.F(this.N,e);return new d(t,this.A,this)},t.prototype.getElementByKey=function(e){return this.F(this.N,e).o},t.prototype.union=function(e){var t=this;return e.forEach(function(e){t.setElement(e[0],e[1])}),this._},t.prototype[Symbol.iterator]=function(){var e,t,i,r;return function(e,t){var i,r,s,n,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(e){return function(t){return l([e,t])}}function l(o){if(i)throw new TypeError("Generator is already executing.");for(;n&&(n=0,o[0]&&(a=0)),a;)try{if(i=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}(this,function(s){switch(s.label){case 0:e=this._,t=this.P(),i=0,s.label=1;case 1:return i<e?[4,[(r=t[i]).u,r.o]]:[3,4];case 2:s.sent(),s.label=3;case 3:return++i,[3,1];case 4:return[2]}})},t}(c)},6837:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;const r=i(2146);t.ZodIssueCode=r.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class s extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},i={_errors:[]},r=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)i._errors.push(t(s));else{let e=i,r=0;for(;r<s.path.length;){const i=s.path[r];r===s.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(t(s))):e[i]=e[i]||{_errors:[]},e=e[i],r++}}};return r(this),i}static assert(e){if(!(e instanceof s))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,r.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},i=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=s,s.create=e=>new s(e)},6860:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0,t.serverErrorToStatus=o;const r=i(4434),s=i(2203),n=i(131),a=i(4097);function o(e,t){var i;const r={code:n.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:null!==(i=null!=t?t:e.metadata)&&void 0!==i?i:null};return"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(r.code=e.code,"details"in e&&"string"==typeof e.details&&(r.details=e.details)),r}class l extends r.EventEmitter{constructor(e,t,i,r){super(),this.path=e,this.call=t,this.metadata=i,this.request=r,this.cancelled=!1}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}}t.ServerUnaryCallImpl=l;class c extends s.Readable{constructor(e,t,i){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=i,this.cancelled=!1}_read(e){this.call.startRead()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}}t.ServerReadableStreamImpl=c;class d extends s.Writable{constructor(e,t,i,r){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=i,this.request=r,this.pendingStatus={code:n.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new a.Metadata,this.on("error",e=>{this.pendingStatus=o(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_write(e,t,i){this.call.sendMessage(e,i)}_final(e){var t;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:null!==(t=this.pendingStatus.metadata)&&void 0!==t?t:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=d;class u extends s.Duplex{constructor(e,t,i){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=i,this.pendingStatus={code:n.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new a.Metadata,this.on("error",e=>{this.pendingStatus=o(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}getAuthContext(){return this.call.getAuthContext()}getMetricsRecorder(){return this.call.getMetricsRecorder()}_read(e){this.call.startRead()}_write(e,t,i){this.call.sendMessage(e,i)}_final(e){var t;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:null!==(t=this.pendingStatus.metadata)&&void 0!==t?t:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=u},6928:e=>{"use strict";e.exports=require("path")},6982:e=>{"use strict";e.exports=require("crypto")},6998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recognizedOptions=void 0,t.channelOptionsEqual=function(e,t){const i=Object.keys(e).sort(),r=Object.keys(t).sort();if(i.length!==r.length)return!1;for(let s=0;s<i.length;s+=1){if(i[s]!==r[s])return!1;if(e[i[s]]!==t[r[s]])return!1}return!0},t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0,"grpc.lb.ring_hash.ring_size_cap":!0,"grpc-node.retry_max_attempts_limit":!0,"grpc-node.flow_control_window":!0,"grpc.server_call_metric_recording":!0}},7016:e=>{"use strict";e.exports=require("url")},7209:(e,t,i)=>{"use strict";e.exports=c,c.className="ReflectionObject";const r=i(1457);var s,n=i(3262),a={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},o={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},l={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function c(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(c.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),c.prototype.toJSON=function(){throw Error()},c.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof s&&t._handleAdd(this)},c.prototype.onRemove=function(e){var t=e.root;t instanceof s&&t._handleRemove(this),this.parent=null,this.resolved=!1},c.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},c.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)},c.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var t={};if(!e)throw new Error("Unknown edition for "+this.fullName);var i=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if("proto2"===e)t=Object.assign({},o);else if("proto3"===e)t=Object.assign({},l);else{if("2023"!==e)throw new Error("Unknown edition: "+e);t=Object.assign({},a)}return this._features=Object.assign(t,i||{}),void(this._featuresResolved=!0)}if(this.partOf instanceof r){var s=Object.assign({},this.partOf._features);this._features=Object.assign(s,i||{})}else if(this.declaringField);else{if(!this.parent)throw new Error("Unable to find a parent for "+this.fullName);var n=Object.assign({},this.parent._features);this._features=Object.assign(n,i||{})}this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},c.prototype._inferLegacyProtoFeatures=function(){return{}},c.prototype.getOption=function(e){if(this.options)return this.options[e]},c.prototype.setOption=function(e,t,i){return this.options||(this.options={}),/^features\./.test(e)?n.setProperty(this.options,e,t,i):i&&void 0!==this.options[e]||(this.getOption(e)!==t&&(this.resolved=!1),this.options[e]=t),this},c.prototype.setParsedOption=function(e,t,i){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(i){var s=r.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var a=s[e];n.setProperty(a,i,t)}else(s={})[e]=n.setProperty({},i,t),r.push(s)}else{var o={};o[e]=t,r.push(o)}return this},c.prototype.setOptions=function(e,t){if(e)for(var i=Object.keys(e),r=0;r<i.length;++r)this.setOption(i[r],e[i[r]],t);return this},c.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},c.prototype._editionToJSON=function(){if(this._edition&&"proto3"!==this._edition)return this._edition},c._configure=function(e){s=e}},7231:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;const s=i(627),n=r(i(8227));t.makeIssue=e=>{const{data:t,path:i,errorMaps:r,issueData:s}=e,n=[...i,...s.path||[]],a={...s,path:n};if(void 0!==s.message)return{...s,path:n,message:s.message};let o="";const l=r.filter(e=>!!e).slice().reverse();for(const e of l)o=e(a,{data:t,defaultError:o}).message;return{...s,path:n,message:o}},t.EMPTY_PATH=[],t.addIssueToContext=function(e,i){const r=(0,s.getErrorMap)(),a=(0,t.makeIssue)({issueData:i,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===n.default?void 0:n.default].filter(e=>!!e)});e.common.issues.push(a)};class a{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,i){const r=[];for(const s of i){if("aborted"===s.status)return t.INVALID;"dirty"===s.status&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const i=[];for(const e of t){const t=await e.key,r=await e.value;i.push({key:t,value:r})}return a.mergeObjectSync(e,i)}static mergeObjectSync(e,i){const r={};for(const s of i){const{key:i,value:n}=s;if("aborted"===i.status)return t.INVALID;if("aborted"===n.status)return t.INVALID;"dirty"===i.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===i.value||void 0===n.value&&!s.alwaysSet||(r[i.value]=n.value)}return{status:e.value,value:r}}}t.ParseStatus=a,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},7434:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0,t.createCertificateProviderChannelCredentials=function(e,t,i){return new g(e,t,null!=i?i:{})};const r=i(4756),s=i(2267),n=i(9167),a=i(3822),o=i(9302),l=i(267),c=i(131);function d(e,t){if(e&&!(e instanceof Buffer))throw new TypeError(`${t}, if provided, must be a Buffer.`)}class u{compose(e){return new v(this,e)}static createSsl(e,t,i,s){var a;if(d(e,"Root certificate"),d(t,"Private key"),d(i,"Certificate chain"),t&&!i)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&i)throw new Error("Certificate chain must be given with accompanying private key");const o=(0,r.createSecureContext)({ca:null!==(a=null!=e?e:(0,n.getDefaultRootsData)())&&void 0!==a?a:void 0,key:null!=t?t:void 0,cert:null!=i?i:void 0,ciphers:n.CIPHER_SUITES});return new m(o,null!=s?s:{})}static createFromSecureContext(e,t){return new m(e,null!=t?t:{})}static createInsecure(){return new h}}t.ChannelCredentials=u;class h extends u{constructor(){super()}compose(e){throw new Error("Cannot compose insecure credentials")}_isSecure(){return!1}_equals(e){return e instanceof h}_createSecureConnector(e,t,i){return{connect:e=>Promise.resolve({socket:e,secure:!1}),waitForReady:()=>Promise.resolve(),getCallCredentials:()=>null!=i?i:s.CallCredentials.createEmpty(),destroy(){}}}}function p(e,t,i,s){var n,l;const c={secureContext:e};let d=i;if("grpc.http_connect_target"in s){const e=(0,a.parseUri)(s["grpc.http_connect_target"]);e&&(d=e)}const u=(0,o.getDefaultAuthority)(d),h=(0,a.splitHostPort)(u),p=null!==(n=null==h?void 0:h.host)&&void 0!==n?n:u;if(c.host=p,t.checkServerIdentity&&(c.checkServerIdentity=t.checkServerIdentity),void 0!==t.rejectUnauthorized&&(c.rejectUnauthorized=t.rejectUnauthorized),c.ALPNProtocols=["h2"],s["grpc.ssl_target_name_override"]){const e=s["grpc.ssl_target_name_override"],t=null!==(l=c.checkServerIdentity)&&void 0!==l?l:r.checkServerIdentity;c.checkServerIdentity=(i,r)=>t(e,r),c.servername=e}else c.servername=p;return s["grpc-node.tls_enable_trace"]&&(c.enableTrace=!0),c}class f{constructor(e,t){this.connectionOptions=e,this.callCredentials=t}connect(e){const t=Object.assign({socket:e},this.connectionOptions);return new Promise((e,i)=>{const s=(0,r.connect)(t,()=>{var t;null!==(t=this.connectionOptions.rejectUnauthorized)&&void 0!==t&&!t||s.authorized?e({socket:s,secure:!0}):i(s.authorizationError)});s.on("error",e=>{i(e)})})}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}}class m extends u{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t}_isSecure(){return!0}_equals(e){return this===e||e instanceof m&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}_createSecureConnector(e,t,i){const r=p(this.secureContext,this.verifyOptions,e,t);return new f(r,null!=i?i:s.CallCredentials.createEmpty())}}class g extends u{constructor(e,t,i){super(),this.caCertificateProvider=e,this.identityCertificateProvider=t,this.verifyOptions=i,this.refcount=0,this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this),this.secureContextWatchers=[]}_isSecure(){return!0}_equals(e){var t,i;return this===e||e instanceof g&&this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&(null===(t=this.verifyOptions)||void 0===t?void 0:t.checkServerIdentity)===(null===(i=e.verifyOptions)||void 0===i?void 0:i.checkServerIdentity)}ref(){var e;0===this.refcount&&(this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener),null===(e=this.identityCertificateProvider)||void 0===e||e.addIdentityCertificateListener(this.identityCertificateUpdateListener)),this.refcount+=1}unref(){var e;this.refcount-=1,0===this.refcount&&(this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener),null===(e=this.identityCertificateProvider)||void 0===e||e.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_createSecureConnector(e,t,i){return this.ref(),new g.SecureConnectorImpl(this,e,t,null!=i?i:s.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(const e of this.secureContextWatchers)e(this.getLatestSecureContext());this.secureContextWatchers=[]}}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.maybeUpdateWatchers()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.maybeUpdateWatchers()}hasReceivedUpdates(){return void 0!==this.latestCaUpdate&&(!this.identityCertificateProvider||void 0!==this.latestIdentityUpdate)}getSecureContext(){return this.hasReceivedUpdates()?Promise.resolve(this.getLatestSecureContext()):new Promise(e=>{this.secureContextWatchers.push(e)})}getLatestSecureContext(){var e,t;if(!this.latestCaUpdate)return null;if(null!==this.identityCertificateProvider&&!this.latestIdentityUpdate)return null;try{return(0,r.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:null===(e=this.latestIdentityUpdate)||void 0===e?void 0:e.privateKey,cert:null===(t=this.latestIdentityUpdate)||void 0===t?void 0:t.certificate,ciphers:n.CIPHER_SUITES})}catch(e){return(0,l.log)(c.LogVerbosity.ERROR,"Failed to createSecureContext with error "+e.message),null}}}g.SecureConnectorImpl=class{constructor(e,t,i,r){this.parent=e,this.channelTarget=t,this.options=i,this.callCredentials=r}connect(e){return new Promise((t,i)=>{const s=this.parent.getLatestSecureContext();if(!s)return void i(new Error("Failed to load credentials"));e.closed&&i(new Error("Socket closed while loading credentials"));const n=p(s,this.parent.verifyOptions,this.channelTarget,this.options),a=Object.assign({socket:e},n),o=()=>{i(new Error("Socket closed"))},l=e=>{i(e)},c=(0,r.connect)(a,()=>{var e;c.removeListener("close",o),c.removeListener("error",l),null!==(e=this.parent.verifyOptions.rejectUnauthorized)&&void 0!==e&&!e||c.authorized?t({socket:c,secure:!0}):i(c.authorizationError)});c.once("close",o),c.once("error",l)})}async waitForReady(){await this.parent.getSecureContext()}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref()}};class v extends u{constructor(e,t){if(super(),this.channelCredentials=e,this.callCredentials=t,!e._isSecure())throw new Error("Cannot compose insecure credentials")}compose(e){const t=this.callCredentials.compose(e);return new v(this.channelCredentials,t)}_isSecure(){return!0}_equals(e){return this===e||e instanceof v&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}_createSecureConnector(e,t,i){const r=this.callCredentials.compose(null!=i?i:s.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(e,t,r)}}},7595:(e,t,i)=>{"use strict";e.exports=s;var r=i(3610);function s(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(s.prototype=Object.create(r.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,i,s,n,a){if(!n)throw TypeError("request must be specified");var o=this;if(!a)return r.asPromise(e,o,t,i,s,n);if(o.rpcImpl)try{return o.rpcImpl(t,i[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(e,i){if(e)return o.emit("error",e,t),a(e);if(null!==i){if(!(i instanceof s))try{i=s[o.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",i,t),a(null,i)}o.end(!0)})}catch(e){return o.emit("error",e,t),void setTimeout(function(){a(e)},0)}else setTimeout(function(){a(Error("already ended"))},0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7728:(e,t,i)=>{"use strict";e.exports=function(e){for(var t=n.codegen(["r","l","e"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),i=0;i<e.fieldsArray.length;++i){var o=e._fieldsArray[i].resolve(),l=o.resolvedType instanceof r?"int32":o.type,c="m"+n.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==s.defaults[o.keyType]?t("k=%j",s.defaults[o.keyType]):t("k=null"),void 0!==s.defaults[l]?t("value=%j",s.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===s.basic[l]?t("value=types[%i].decode(r,r.uint32())",i):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==s.long[o.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',c):t("%s[k]=value",c)):o.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==s.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,l)("}else"),void 0===s.basic[l]?t(o.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",c,i):t("%s.push(r.%s())",c,l)):void 0===s.basic[l]?t(o.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",c,i):t("%s=r.%s()",c,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<e._fieldsArray.length;++i){var d=e._fieldsArray[i];d.required&&t("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",a(d))}return t("return m")};var r=i(5643),s=i(361),n=i(3262);function a(e){return"missing required '"+e.name+"'"}},7803:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCIDR=f,t.mapProxyName=function(e,t){var i;const a={target:e,extraOptions:{}};if(0===(null!==(i=t["grpc.enable_http_proxy"])&&void 0!==i?i:1))return a;if("unix"===e.scheme)return a;const o=function(){let e,t="",i="";if(process.env.grpc_proxy)i="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)i="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};i="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,r.log)(s.LogVerbosity.ERROR,`cannot parse value of "${i}" env var`),{}}if("http:"!==e.protocol)return(0,r.log)(s.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let n=null;e.username&&(e.password?((0,r.log)(s.LogVerbosity.INFO,"userinfo found in proxy URI"),n=decodeURIComponent(`${e.username}:${e.password}`)):n=e.username);const a=e.hostname;let o=e.port;""===o&&(o="80");const l={address:`${a}:${o}`};return n&&(l.creds=n),p("Proxy server "+l.address+" set by environment variable "+i),l}();if(!o.address)return a;const l=(0,c.splitHostPort)(e.path);if(!l)return a;if(function(e){for(const t of function(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return e||(e=process.env.no_proxy,t="no_proxy"),e?(p("No proxy server list set by environment variable "+t),e.split(",")):[]}()){const i=f(t);if((0,n.isIPv4)(e)&&i&&g(i,e))return!0;if(e.endsWith(t))return!0}return!1}(l.host))return p("Not using proxy for target in no_proxy list: "+(0,c.uriToString)(e)),a;const u={"grpc.http_connect_target":(0,c.uriToString)(e)};return o.creds&&(u["grpc.http_connect_creds"]=o.creds),{target:{scheme:"dns",path:o.address},extraOptions:u}},t.getProxiedConnection=function(e,t){var i;if(!("grpc.http_connect_target"in t))return Promise.resolve(null);const n=t["grpc.http_connect_target"],o=(0,c.parseUri)(n);if(null===o)return Promise.resolve(null);const d=(0,c.splitHostPort)(o.path);if(null===d)return Promise.resolve(null);const h=`${d.host}:${null!==(i=d.port)&&void 0!==i?i:u.DEFAULT_PORT}`,f={method:"CONNECT",path:h},m={Host:h};(0,l.isTcpSubchannelAddress)(e)?(f.host=e.host,f.port=e.port):f.socketPath=e.path,"grpc.http_connect_creds"in t&&(m["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),f.headers=m;const g=(0,l.subchannelAddressToString)(e);return p("Using proxy "+g+" to connect to "+f.path),new Promise((e,t)=>{const i=a.request(f);i.once("connect",(n,a,o)=>{i.removeAllListeners(),a.removeAllListeners(),200===n.statusCode?(p("Successfully connected to "+f.path+" through proxy "+g),o.length>0&&a.unshift(o),p("Successfully established a plaintext connection to "+f.path+" through proxy "+g),e(a)):((0,r.log)(s.LogVerbosity.ERROR,"Failed to connect to "+f.path+" through proxy "+g+" with status "+n.statusCode),t())}),i.once("error",e=>{i.removeAllListeners(),(0,r.log)(s.LogVerbosity.ERROR,"Failed to connect to proxy "+g+" with error "+e.message),t()}),i.end()})};const r=i(267),s=i(131),n=i(9278),a=i(8611),o=i(267),l=i(8996),c=i(3822),d=i(7016),u=i(6700),h="proxy";function p(e){o.trace(s.LogVerbosity.DEBUG,h,e)}function f(e){const t=e.split("/");if(2!==t.length)return null;const i=parseInt(t[1],10);return!(0,n.isIPv4)(t[0])||Number.isNaN(i)||i<0||i>32?null:{ip:m(t[0]),prefixLength:i}}function m(e){return e.split(".").reduce((e,t)=>(e<<8)+parseInt(t,10),0)}function g(e,t){const i=e.ip,r=-1<<32-e.prefixLength;return(m(t)&r)===(i&r)}},7882:(e,t,i)=>{"use strict";e.exports=y;var r=i(1304);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var s=i(5643),n=i(1457),a=i(1344),o=i(8252),l=i(9687),c=i(2551),d=i(6237),u=i(3449),h=i(3262),p=i(1080),f=i(7728),m=i(420),g=i(744),v=i(6434);function y(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var i=this.fields[e[t]],r=i.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=i}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,c,!0),this._ctor=e;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var r={};for(i=0;i<this.oneofsArray.length;++i)r[this._oneofsArray[i].resolve().name]={get:h.oneOfGetter(this._oneofsArray[i].oneof),set:h.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(e.prototype,r)}}}),y.generateConstructor=function(e){for(var t,i=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?i("this%s={}",h.safeProp(t.name)):t.repeated&&i("this%s=[]",h.safeProp(t.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var i=new y(e,t.options);i.extensions=t.extensions,i.reserved=t.reserved;for(var c=Object.keys(t.fields),d=0;d<c.length;++d)i.add((void 0!==t.fields[c[d]].keyType?o.fromJSON:a.fromJSON)(c[d],t.fields[c[d]]));if(t.oneofs)for(c=Object.keys(t.oneofs),d=0;d<c.length;++d)i.add(n.fromJSON(c[d],t.oneofs[c[d]]));if(t.nested)for(c=Object.keys(t.nested),d=0;d<c.length;++d){var u=t.nested[c[d]];i.add((void 0!==u.id?a.fromJSON:void 0!==u.fields?y.fromJSON:void 0!==u.values?s.fromJSON:void 0!==u.methods?l.fromJSON:r.fromJSON)(c[d],u))}return t.extensions&&t.extensions.length&&(i.extensions=t.extensions),t.reserved&&t.reserved.length&&(i.reserved=t.reserved),t.group&&(i.group=!0),t.comment&&(i.comment=t.comment),t.edition&&(i._edition=t.edition),i._defaultEdition="proto3",i},y.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return h.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",i?this.comment:void 0])},y.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;r.prototype.resolveAll.call(this);var e=this.oneofsArray;for(i=0;i<e.length;)e[i++].resolve();for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();return this},y.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,r.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(t=>{t._resolveFeatures(e)}),this.fieldsArray.forEach(t=>{t._resolveFeatures(e)}),this):this},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof n?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):r.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof n){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return r.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],i=0;i<this.fieldsArray.length;++i)t.push(this._fieldsArray[i].resolve().resolvedType);this.encode=p(this)({Writer:u,types:t,util:h}),this.decode=f(this)({Reader:d,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var r=v[e];if(r){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(s),s.toObject=this.toObject,this.toObject=r.toObject.bind(s)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof d||(e=d.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){h.decorateType(t,e)}}},8045:e=>{"use strict";e.exports=function(e,t){for(var i=new Array(arguments.length-1),r=0,s=2,n=!0;s<arguments.length;)i[r++]=arguments[s++];return new Promise(function(s,a){i[r]=function(e){if(n)if(n=!1,e)a(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];s.apply(null,t)}};try{e.apply(t||null,i)}catch(e){n&&(n=!1,a(e))}})}},8227:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2146),s=i(6837);t.default=(e,t)=>{let i;switch(e.code){case s.ZodIssueCode.invalid_type:i=e.received===r.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case s.ZodIssueCode.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,r.util.jsonStringifyReplacer)}`;break;case s.ZodIssueCode.unrecognized_keys:i=`Unrecognized key(s) in object: ${r.util.joinValues(e.keys,", ")}`;break;case s.ZodIssueCode.invalid_union:i="Invalid input";break;case s.ZodIssueCode.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${r.util.joinValues(e.options)}`;break;case s.ZodIssueCode.invalid_enum_value:i=`Invalid enum value. Expected ${r.util.joinValues(e.options)}, received '${e.received}'`;break;case s.ZodIssueCode.invalid_arguments:i="Invalid function arguments";break;case s.ZodIssueCode.invalid_return_type:i="Invalid function return type";break;case s.ZodIssueCode.invalid_date:i="Invalid date";break;case s.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:r.util.assertNever(e.validation):i="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case s.ZodIssueCode.too_small:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case s.ZodIssueCode.too_big:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case s.ZodIssueCode.custom:i="Invalid input";break;case s.ZodIssueCode.invalid_intersection_types:i="Intersection results could not be merged";break;case s.ZodIssueCode.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case s.ZodIssueCode.not_finite:i="Number must be finite";break;default:i=t.defaultError,r.util.assertNever(e)}return{message:i}}},8252:(e,t,i)=>{"use strict";e.exports=a;var r=i(1344);((a.prototype=Object.create(r.prototype)).constructor=a).className="MapField";var s=i(361),n=i(3262);function a(e,t,i,s,a,o){if(r.call(this,e,t,s,void 0,void 0,a,o),!n.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===s.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},a.d=function(e,t,i){return"function"==typeof i?i=n.decorateType(i).name:i&&"object"==typeof i&&(i=n.decorateEnum(i).name),function(r,s){n.decorateType(r.constructor).add(new a(s,e,t,i))}}},8377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionLogger=void 0,t.ExtensionLogger=class{constructor(e){this.outputChannel=e}formatTimestamp(){return(new Date).toISOString()}formatMessage(e,t,i){let r=`[${this.formatTimestamp()}] [${e}] ${t}`;if(void 0!==i)try{r+=` ${JSON.stringify(i,null,2)}`}catch{r+=" [Unserializable data]"}return r}info(e,t){const i=this.formatMessage("INFO",e,t);this.outputChannel.appendLine(i),console.log(i)}warn(e,t){const i=this.formatMessage("WARN",e,t);this.outputChannel.appendLine(i),console.warn(i)}error(e,t){let i;if(t instanceof Error)i=`${t.message}\n${t.stack??""}`;else if(void 0!==t)try{i=JSON.stringify(t,null,2)}catch{i=String(t)}const r=this.formatMessage("ERROR",e,i);this.outputChannel.appendLine(r),console.error(r)}debug(e,t){const i=this.formatMessage("DEBUG",e,t);this.outputChannel.appendLine(i),console.debug(i)}show(){this.outputChannel.show()}}},8392:function(e,t,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=r(e),a=0;a<i.length;a++)"default"!==i[a]&&s(t,e,i[a]);return n(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SimulatorWebviewPanel=void 0;const o=a(i(1398));class l{constructor(e,t,i,r){this.extensionUri=e,this.controller=t,this.logger=i,this.disposables=[],this.streaming=!1,this.idbVideoStreamHandle=null,this.screenInfo={width:430,height:932},this.targetFps=30,this._onDidDispose=new o.EventEmitter,this.onDispose=this._onDidDispose.event,this.isDisposed=!1,this.panel=r;const s=o.workspace.getConfiguration("cursor.iosSimulator");this.targetFps=s.get("dockedView.fps",30),this.disposables.push(this.panel.webview.onDidReceiveMessage(e=>this.handleWebviewMessage(e),void 0,this.disposables)),this.disposables.push(this.panel.onDidDispose(()=>{this.isDisposed||(this.isDisposed=!0,this.stopStreaming(),this._onDidDispose.fire(),this._onDidDispose.dispose())})),this.disposables.push(this.panel.onDidChangeViewState(e=>{e.webviewPanel.visible?this.startStreaming():this.stopStreaming()})),this.panel.webview.html=this.getHtmlContent()}static create(e,t,i){const r=o.window.createWebviewPanel(l.viewType,"iOS Simulator",o.ViewColumn.Beside,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[o.Uri.joinPath(e,"media")]});return new l(e,t,i,r)}static restore(e,t,i,r){return e.webview.options={enableScripts:!0,localResourceRoots:[o.Uri.joinPath(t,"media")]},new l(t,i,r,e)}reveal(){this.panel.reveal()}dispose(){if(!this.isDisposed){this.isDisposed=!0,this.stopStreaming(),this._onDidDispose.fire(),this._onDidDispose.dispose();for(const e of this.disposables)e.dispose();this.panel.dispose()}}async handleWebviewMessage(e){try{switch(e.type){case"ready":this.startStreaming();break;case"tap":{const t=e.x*this.screenInfo.width,i=e.y*this.screenInfo.height;await this.controller.tap({x:t,y:i,holdMs:e.holdMs});break}case"swipe":{const t=e.startX*this.screenInfo.width,i=e.startY*this.screenInfo.height,r=e.endX*this.screenInfo.width,s=e.endY*this.screenInfo.height;await this.controller.swipe({startX:t,startY:i,endX:r,endY:s,durationMs:e.durationMs});break}case"key":{const t={Enter:"return",Backspace:"backspace",Delete:"delete",Tab:"tab",Escape:"escape",ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",Home:"home",End:"end",PageUp:"pageup",PageDown:"pagedown"," ":"space"}[e.key];t?await this.controller.pressKey(t):1===e.key.length&&await this.controller.typeText({text:e.key});break}case"text":await this.controller.typeText({text:e.text});break;case"home":await this.controller.pressKey("home")}}catch(e){this.logger.error("Error handling webview message",e)}}async startStreaming(){this.streaming||(this.streaming=!0,this.logger.info("Starting iOS Simulator streaming"),await this.startIdbVideoStreaming()||(this.logger.info("idb video streaming not available, falling back to screenshots"),await this.startScreenshotStreaming()))}async startIdbVideoStreaming(){this.logger.info("Attempting idb video streaming...");let e=0;const t=Date.now();try{const i=await this.controller.startIdbVideoStream({fps:this.targetFps,quality:.5,scale:.5},(i,r)=>{if(this.streaming&&this.panel.visible){if(e++,1===e&&this.logger.info("First idb video frame received"),e%100==0){const i=(Date.now()-t)/1e3,r=(e/i).toFixed(1);this.logger.info(`idb video streaming: ${e} frames, ${r} FPS`)}this.panel.webview.postMessage({type:"frame",data:i,mimeType:r,timestamp:Date.now()})}});return i?(this.idbVideoStreamHandle=i,this.logger.info("idb video streaming started successfully"),!0):(this.logger.warn("idb video streaming failed to start"),!1)}catch(e){return this.logger.warn("idb video streaming error",e),!1}}async startScreenshotStreaming(){let e=0,t=0,i=0,r=0,s=0,n=0;for(this.logger.info("Starting screenshot-based streaming");this.streaming&&this.panel.visible;){try{const a=Date.now();let o=await this.controller.captureScreenshotViaIdb();const l=Date.now()-a;if(o)i++,s+=l,1===i&&this.logger.info(`First idb screenshot: ${l}ms`);else{0===i&&0===r&&this.logger.info("idb screenshot failed, trying simctl...");const e=Date.now();o=await this.controller.captureScreenshotFast();const t=Date.now()-e;r++,n+=t,1===r&&this.logger.info(`First simctl screenshot: ${t}ms`)}if(o){if(e=0,t++,t%20==0){const e=i>0?(s/i).toFixed(0):"N/A",a=r>0?(n/r).toFixed(0):"N/A",o=(1e3*t/(s+n)).toFixed(1);this.logger.info(`Screenshot stats: ${t} frames, idb=${i}@${e}ms, simctl=${r}@${a}ms, ~${o} FPS`)}this.panel.webview.postMessage({type:"frame",data:o.base64Data,mimeType:o.mimeType,timestamp:Date.now()})}else e++,await this.sleep(50)}catch(t){e++,3===e&&this.logger.warn("Screenshot capture failing repeatedly",t),await this.sleep(100)}e>5&&await this.sleep(500)}}stopStreaming(){this.streaming=!1,this.idbVideoStreamHandle&&(this.idbVideoStreamHandle.stop(),this.idbVideoStreamHandle=null),this.logger.info("Stopped iOS Simulator streaming")}sleep(e){return new Promise(t=>setTimeout(t,e))}getHtmlContent(){const e=this.getNonce(),t=this.panel.webview.asWebviewUri(o.Uri.joinPath(this.extensionUri,"media","simulatorView.js")),i=this.panel.webview.asWebviewUri(o.Uri.joinPath(this.extensionUri,"media","simulatorView.css")),r=this.panel.webview.cspSource;return`<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n\t<meta http-equiv="Content-Security-Policy" content="\n\t\tdefault-src 'none';\n\t\timg-src ${r} data:;\n\t\tscript-src 'nonce-${e}';\n\t\tstyle-src ${r} 'unsafe-inline';\n\t">\n\t<link rel="stylesheet" href="${i}">\n\t<title>iOS Simulator</title>\n</head>\n<body>\n\t<div class="simulator-wrapper" id="simulator-wrapper">\n\t\t<canvas id="simulator-canvas"></canvas>\n\t\t<div class="loading" id="loading">\n\t\t\t<div class="spinner"></div>\n\t\t\t<span>Waiting for simulator...</span>\n\t\t</div>\n\t</div>\n\t<div class="controls-bar">\n\t\t<button id="home-btn" class="control-btn" title="Home">\n\t\t\t<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n\t\t\t\t<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>\n\t\t\t\t<polyline points="9 22 9 12 15 12 15 22"></polyline>\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n\t<script nonce="${e}" src="${t}"><\/script>\n</body>\n</html>`}getNonce(){let e="";for(let t=0;t<32;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}}t.SimulatorWebviewPanel=l,l.viewType="cursor.iosSimulator.dockedView"},8446:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;const r=i(2267),s=i(131),n=i(6308),a=i(4097),o=i(267),l=i(6067);t.ResolvingCall=class{constructor(e,t,i,a,o){this.channel=e,this.method=t,this.filterStackFactory=a,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadlineStartTime=null,this.configReceivedTime=null,this.childStartTime=null,this.credentials=r.CallCredentials.createEmpty(),this.deadline=i.deadline,this.host=i.host,i.parentCall&&(i.flags&s.Propagate.CANCELLATION&&i.parentCall.on("cancelled",()=>{this.cancelWithStatus(s.Status.CANCELLED,"Cancelled by parent call")}),i.flags&s.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+i.parentCall.getDeadline()),this.deadline=(0,n.minDeadline)(this.deadline,i.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){o.trace(s.LogVerbosity.DEBUG,"resolving_call","["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.deadlineStartTime=new Date,this.trace("Deadline: "+(0,n.deadlineToString)(this.deadline));const e=(0,n.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");const t=()=>{if(!this.deadlineStartTime)return void this.cancelWithStatus(s.Status.DEADLINE_EXCEEDED,"Deadline exceeded");const e=[],t=new Date;e.push(`Deadline exceeded after ${(0,n.formatDateDifference)(this.deadlineStartTime,t)}`),this.configReceivedTime?(this.configReceivedTime>this.deadlineStartTime&&e.push(`name resolution: ${(0,n.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`),this.childStartTime?this.childStartTime>this.configReceivedTime&&e.push(`metadata filters: ${(0,n.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`):e.push("waiting for metadata filters")):e.push("waiting for name resolution"),this.child&&e.push(...this.child.getDeadlineInfo()),this.cancelWithStatus(s.Status.DEADLINE_EXCEEDED,e.join(","))};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);const t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");const i=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,i.sendMessageWithContext(e,t.message),this.pendingHalfClose&&i.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");const e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));this.configReceivedTime=new Date;const t=e.config;if(t.status!==s.Status.OK){const{code:e,details:i}=(0,l.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);return void this.outputStatus({code:e,details:i,metadata:new a.Metadata})}if(t.methodConfig.timeout){const e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,n.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createRetryingCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.childStartTime=new Date,this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var i;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(i=this.child)||void 0===i||i.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=e}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}getAuthContext(){return this.child?this.child.getAuthContext():null}}},8561:e=>{"use strict";function t(e,i){"string"==typeof e&&(i=e,e=void 0);var r=[];function s(e){if("string"!=typeof e){var i=n();if(t.verbose&&console.log("codegen: "+i),i="return "+i,e){for(var a=Object.keys(e),o=new Array(a.length+1),l=new Array(a.length),c=0;c<a.length;)o[c]=a[c],l[c]=e[a[c++]];return o[c]=i,Function.apply(null,o).apply(null,l)}return Function(i)()}for(var d=new Array(arguments.length-1),u=0;u<d.length;)d[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,function(e,t){var i=d[u++];switch(t){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"}),u!==d.length)throw Error("parameter count mismatch");return r.push(e),s}function n(t){return"function "+(t||i||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return s.toString=n,s}e.exports=t,t.verbose=!1},8611:e=>{"use strict";e.exports=require("http")},8692:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0,t.createCertificateProviderServerCredentials=function(e,t,i){return new o(e,t,i)},t.createServerCredentialsWithInterceptors=function(e,t){return new l(e,t)};const r=i(9167);class s{constructor(e,t){this.serverConstructorOptions=e,this.watchers=new Set,this.latestContextOptions=null,this.latestContextOptions=null!=t?t:null}_addWatcher(e){this.watchers.add(e)}_removeWatcher(e){this.watchers.delete(e)}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(e){this.latestContextOptions=e;for(const e of this.watchers)e(this.latestContextOptions)}_isSecure(){return null!==this.serverConstructorOptions}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return[]}static createInsecure(){return new n}static createSsl(e,t,i=!1){var s;if(null!==e&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if("boolean"!=typeof i)throw new TypeError("checkClientCertificate must be a boolean");const n=[],o=[];for(let e=0;e<t.length;e++){const i=t[e];if(null===i||"object"!=typeof i)throw new TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(i.private_key))throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(i.cert_chain))throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);n.push(i.cert_chain),o.push(i.private_key)}return new a({requestCert:i,ciphers:r.CIPHER_SUITES},{ca:null!==(s=null!=e?e:(0,r.getDefaultRootsData)())&&void 0!==s?s:void 0,cert:n,key:o})}}t.ServerCredentials=s;class n extends s{constructor(){super(null)}_getSettings(){return null}_equals(e){return e instanceof n}}class a extends s{constructor(e,t){super(e,t),this.options=Object.assign(Object.assign({},e),t)}_equals(e){if(this===e)return!0;if(!(e instanceof a))return!1;if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(e.options.ca)){if(!this.options.ca.equals(e.options.ca))return!1}else if(this.options.ca!==e.options.ca)return!1;if(Array.isArray(this.options.cert)&&Array.isArray(e.options.cert)){if(this.options.cert.length!==e.options.cert.length)return!1;for(let t=0;t<this.options.cert.length;t++){const i=this.options.cert[t],r=e.options.cert[t];if(Buffer.isBuffer(i)&&Buffer.isBuffer(r)){if(!i.equals(r))return!1}else if(i!==r)return!1}}else if(this.options.cert!==e.options.cert)return!1;if(Array.isArray(this.options.key)&&Array.isArray(e.options.key)){if(this.options.key.length!==e.options.key.length)return!1;for(let t=0;t<this.options.key.length;t++){const i=this.options.key[t],r=e.options.key[t];if(Buffer.isBuffer(i)&&Buffer.isBuffer(r)){if(!i.equals(r))return!1}else if(i!==r)return!1}}else if(this.options.key!==e.options.key)return!1;return this.options.requestCert===e.options.requestCert}}class o extends s{constructor(e,t,i){super({requestCert:null!==t,rejectUnauthorized:i,ciphers:r.CIPHER_SUITES}),this.identityCertificateProvider=e,this.caCertificateProvider=t,this.requireClientCertificate=i,this.latestCaUpdate=null,this.latestIdentityUpdate=null,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this)}_addWatcher(e){var t;0===this.getWatcherCount()&&(null===(t=this.caCertificateProvider)||void 0===t||t.addCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener)),super._addWatcher(e)}_removeWatcher(e){var t;super._removeWatcher(e),0===this.getWatcherCount()&&(null===(t=this.caCertificateProvider)||void 0===t||t.removeCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_equals(e){return this===e||e instanceof o&&this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&this.requireClientCertificate===e.requireClientCertificate}calculateSecureContextOptions(){var e;return null===this.latestIdentityUpdate||null!==this.caCertificateProvider&&null===this.latestCaUpdate?null:{ca:null===(e=this.latestCaUpdate)||void 0===e?void 0:e.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){const e=this.calculateSecureContextOptions();this.updateSecureContextOptions(e)}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.finalizeUpdate()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.finalizeUpdate()}}class l extends s{constructor(e,t){super({}),this.childCredentials=e,this.interceptors=t}_isSecure(){return this.childCredentials._isSecure()}_equals(e){if(!(e instanceof l))return!1;if(!this.childCredentials._equals(e.childCredentials))return!1;if(this.interceptors.length!==e.interceptors.length)return!1;for(let t=0;t<this.interceptors.length;t++)if(this.interceptors[t]!==e.interceptors[t])return!1;return!0}_getInterceptors(){return this.interceptors}_addWatcher(e){this.childCredentials._addWatcher(e)}_removeWatcher(e){this.childCredentials._removeWatcher(e)}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}}},8811:(e,t,i)=>{"use strict";e.exports=n;var r=i(7209);((n.prototype=Object.create(r.prototype)).constructor=n).className="Method";var s=i(3262);function n(e,t,i,n,a,o,l,c,d){if(s.isObject(a)?(l=a,a=o=void 0):s.isObject(o)&&(l=o,o=void 0),void 0!==t&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(i))throw TypeError("requestType must be a string");if(!s.isString(n))throw TypeError("responseType must be a string");r.call(this,e,l),this.type=t||"rpc",this.requestType=i,this.requestStream=!!a||void 0,this.responseType=n,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=d}n.fromJSON=function(e,t){return new n(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},8839:(e,t)=>{"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),s=new Array(123),n=0;n<64;)s[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;i.encode=function(e,t,i){for(var s,n=null,a=[],o=0,l=0;t<i;){var c=e[t++];switch(l){case 0:a[o++]=r[c>>2],s=(3&c)<<4,l=1;break;case 1:a[o++]=r[s|c>>4],s=(15&c)<<2,l=2;break;case 2:a[o++]=r[s|c>>6],a[o++]=r[63&c],l=0}o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,a)),o=0)}return l&&(a[o++]=r[s],a[o++]=61,1===l&&(a[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,a.slice(0,o))),n.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";i.decode=function(e,t,i){for(var r,n=i,o=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&o>1)break;if(void 0===(c=s[c]))throw Error(a);switch(o){case 0:r=c,o=1;break;case 1:t[i++]=r<<2|(48&c)>>4,r=c,o=2;break;case 2:t[i++]=(15&r)<<4|(60&c)>>2,r=c,o=3;break;case 3:t[i++]=(3&r)<<6|c,o=0}}if(1===o)throw Error(a);return i-n},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},8899:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;const r=i(7434),s=i(4973),n=i(5716),a=i(178),o=i(4097),l=i(131),c=i(1703),d=i(4987),u=i(9302),h=i(267),p=i(7803),f=i(3822),m=i(463),g=i(9503),v=i(2611),y=i(6308),b=i(8446),S=i(5572),C=i(6067),_=i(3135),T=i(2379),E=new Map;class w extends T.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,i,r,s)=>{t.throttleKeepalive(s)}}ref(){0===this.refCount&&(this.child.addConnectivityStateListener(this.subchannelStateListener),this.channel.addWrappedSubchannel(this)),this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class k{pick(e){return{pickResultType:a.PickResultType.DROP,status:{code:l.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new o.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}}t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";class O{constructor(e){this.target=e,this.trace=new g.ChannelzTrace,this.callTracker=new g.ChannelzCallTracker,this.childrenTracker=new g.ChannelzChildrenTracker,this.state=m.ConnectivityState.IDLE}getChannelzInfoCallback(){return()=>({target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()})}}t.InternalChannel=class{constructor(e,i,o){var v,y,b,S,T,k;if(this.credentials=i,this.options=o,this.connectivityState=m.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.callRefTimer=null,this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),"string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(i instanceof r.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(o&&"object"!=typeof o)throw new TypeError("Channel options must be an object");this.channelzInfoTracker=new O(e);const R=(0,f.parseUri)(e);if(null===R)throw new Error(`Could not parse target name "${e}"`);const P=(0,u.mapUriDefaultScheme)(R);if(null===P)throw new Error(`Could not find a default scheme for target name "${e}"`);0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,g.registerChannelzChannel)(e,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,u.getDefaultAuthority)(P);const I=(0,p.mapProxyName)(P,o);this.target=I.target,this.options=Object.assign({},this.options,I.extraOptions),this.subchannelPool=(0,n.getSubchannelPool)(0===(null!==(v=this.options["grpc.use_local_subchannel_pool"])&&void 0!==v?v:0)),this.retryBufferTracker=new _.MessageBufferTracker(null!==(y=this.options["grpc.retry_buffer_size"])&&void 0!==y?y:16777216,null!==(b=this.options["grpc.per_rpc_retry_buffer_size"])&&void 0!==b?b:1048576),this.keepaliveTime=null!==(S=this.options["grpc.keepalive_time_ms"])&&void 0!==S?S:-1,this.idleTimeoutMs=Math.max(null!==(T=this.options["grpc.client_idle_timeout_ms"])&&void 0!==T?T:18e5,1e3);const N={createSubchannel:(e,i)=>{const r={};for(const[e,s]of Object.entries(i))e.startsWith(t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)||(r[e]=s);const s=this.subchannelPool.getOrCreateSubchannel(this.target,e,r,this.credentials);return s.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",s.getChannelzRef()),new w(s,this)},updateState:(e,t)=>{this.currentPicker=t;const i=this.pickQueue.slice();this.pickQueue=[],i.length>0&&this.callRefTimerUnref();for(const e of i)e.doPick();this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new s.ResolvingLoadBalancer(this.target,N,this.options,(e,t)=>{var i;e.retryThrottling?E.set(this.getTarget(),new _.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,E.get(this.getTarget()))):E.delete(this.getTarget()),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded"),null===(i=this.configSelector)||void 0===i||i.unref(),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref();for(const t of e)t.getConfig()})},e=>{this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,C.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));const t=this.configSelectionQueue;this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref();for(const i of t)i.reportResolverError(e)}),this.filterStackFactory=new c.FilterStackFactory([new d.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(o,void 0,2));const x=new Error;(0,h.isTracerEnabled)("channel_stacktrace")&&(0,h.trace)(l.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(k=x.stack)||void 0===k?void 0:k.substring(x.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}trace(e,t){(0,h.trace)(null!=t?t:l.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,i,r;this.callRefTimer||(this.callRefTimer=setInterval(()=>{},2147483647)),(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(r=(i=this.callRefTimer).ref)||void 0===r||r.call(i))}callRefTimerUnref(){var e,t,i;(null===(e=this.callRefTimer)||void 0===e?void 0:e.hasRef)&&!this.callRefTimer.hasRef()||(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(i=null===(t=this.callRefTimer)||void 0===t?void 0:t.unref)||void 0===i||i.call(t))}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,h.trace)(l.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+m.ConnectivityState[this.connectivityState]+" -> "+m.ConnectivityState[e]),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+m.ConnectivityState[e]),this.connectivityState=e,this.channelzInfoTracker.state=e;const t=this.connectivityStateWatchers.slice();for(const i of t)e!==i.currentState&&(i.timer&&clearTimeout(i.timer),this.removeConnectivityStateWatcher(i),i.callback());e!==m.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(const t of this.wrappedSubchannels)t.throttleKeepalive(e)}}addWrappedSubchannel(e){this.wrappedSubchannels.add(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.connectivityState!==m.ConnectivityState.SHUTDOWN&&this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector.invoke(e,t,this.randomChannelId)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(m.ConnectivityState.IDLE),this.currentPicker=new a.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.callRefTimer&&(clearInterval(this.callRefTimer),this.callRefTimer=null)}startIdleTimeout(e){var t,i;this.idleTimer=setTimeout(()=>{if(this.callCount>0)return void this.startIdleTimeout(this.idleTimeoutMs);const e=(new Date).valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null===(i=(t=this.idleTimer).unref)||void 0===i||i.call(t)}maybeStartIdleTimer(){this.connectivityState===m.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.channelzInfoTracker.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===l.Status.OK?this.channelzInfoTracker.callTracker.addCallSucceeded():this.channelzInfoTracker.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,i,r,s){const n=(0,S.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+n+'] method="'+t+'"'),new v.LoadBalancingCall(this,e,t,i,r,s,n)}createRetryingCall(e,t,i,r,s){const n=(0,S.getNextCallNumber)();return this.trace("createRetryingCall ["+n+'] method="'+t+'"'),new _.RetryingCall(this,e,t,i,r,s,n,this.retryBufferTracker,E.get(this.getTarget()))}createResolvingCall(e,t,i,r,s){const n=(0,S.getNextCallNumber)();this.trace("createResolvingCall ["+n+'] method="'+e+'", deadline='+(0,y.deadlineToString)(t));const a={deadline:t,flags:null!=s?s:l.Propagate.DEFAULTS,host:null!=i?i:this.defaultAuthority,parentCall:r},o=new b.ResolvingCall(this,e,a,this.filterStackFactory.clone(),n);return this.onCallStart(),o.addStatusWatcher(e=>{this.onCallEnd(e)}),o}close(){var e;this.resolvingLoadBalancer.destroy(),this.updateState(m.ConnectivityState.SHUTDOWN),this.currentPicker=new k;for(const e of this.configSelectionQueue)e.cancelWithStatus(l.Status.UNAVAILABLE,"Channel closed before call started");this.configSelectionQueue=[];for(const e of this.pickQueue)e.cancelWithStatus(l.Status.UNAVAILABLE,"Channel closed before call started");this.pickQueue=[],this.callRefTimer&&clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,g.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels(),null===(e=this.configSelector)||void 0===e||e.unref(),this.configSelector=null}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){const t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,i){if(this.connectivityState===m.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let r=null;if(t!==1/0){const e=t instanceof Date?t:new Date(t),n=new Date;if(t===-1/0||e<=n)return void process.nextTick(i,new Error("Deadline passed without connectivity state change"));r=setTimeout(()=>{this.removeConnectivityStateWatcher(s),i(new Error("Deadline passed without connectivity state change"))},e.getTime()-n.getTime())}const s={currentState:e,callback:i,timer:r};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,t,i,r,s){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===m.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,i,r,s)}getOptions(){return this.options}}},8923:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChildChannelControlHelper=function(e,t){var i,r,s,n,a,o,l,c,d,u;return{createSubchannel:null!==(r=null===(i=t.createSubchannel)||void 0===i?void 0:i.bind(t))&&void 0!==r?r:e.createSubchannel.bind(e),updateState:null!==(n=null===(s=t.updateState)||void 0===s?void 0:s.bind(t))&&void 0!==n?n:e.updateState.bind(e),requestReresolution:null!==(o=null===(a=t.requestReresolution)||void 0===a?void 0:a.bind(t))&&void 0!==o?o:e.requestReresolution.bind(e),addChannelzChild:null!==(c=null===(l=t.addChannelzChild)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:e.addChannelzChild.bind(e),removeChannelzChild:null!==(u=null===(d=t.removeChannelzChild)||void 0===d?void 0:d.bind(t))&&void 0!==u?u:e.removeChannelzChild.bind(e)}},t.registerLoadBalancerType=function(e,t,i){n[e]={LoadBalancer:t,LoadBalancingConfig:i}},t.registerDefaultLoadBalancerType=function(e){a=e},t.createLoadBalancer=function(e,t){const i=e.getLoadBalancerName();return i in n?new n[i].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in n},t.parseLoadBalancingConfig=o,t.getDefaultConfig=function(){if(!a)throw new Error("No default load balancer type registered");return new n[a].LoadBalancingConfig},t.selectLbConfigFromList=function(e,t=!1){for(const t of e)try{return o(t)}catch(e){(0,r.log)(s.LogVerbosity.DEBUG,"Config parsing failed with error",e.message);continue}return t&&a?new n[a].LoadBalancingConfig:null};const r=i(267),s=i(131),n={};let a=null;function o(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Provided load balancing config has multiple conflicting entries");const i=t[0];if(!(i in n))throw new Error(`Unrecognized load balancing config name ${i}`);try{return n[i].LoadBalancingConfig.createFromJson(e[i])}catch(e){throw new Error(`${i}: ${e.message}`)}}},8996:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointMap=void 0,t.isTcpSubchannelAddress=s,t.subchannelAddressEqual=n,t.subchannelAddressToString=a,t.stringToSubchannelAddress=function(e,t){return(0,r.isIP)(e)?{host:e,port:null!=t?t:o}:{path:e}},t.endpointEqual=function(e,t){if(e.addresses.length!==t.addresses.length)return!1;for(let i=0;i<e.addresses.length;i++)if(!n(e.addresses[i],t.addresses[i]))return!1;return!0},t.endpointToString=function(e){return"["+e.addresses.map(a).join(", ")+"]"},t.endpointHasAddress=l;const r=i(9278);function s(e){return"port"in e}function n(e,t){return!e&&!t||!(!e||!t)&&(s(e)?s(t)&&e.host===t.host&&e.port===t.port:!s(t)&&e.path===t.path)}function a(e){return s(e)?(0,r.isIPv6)(e.host)?"["+e.host+"]:"+e.port:e.host+":"+e.port:e.path}const o=443;function l(e,t){for(const i of e.addresses)if(n(i,t))return!0;return!1}function c(e,t){if(e.addresses.length!==t.addresses.length)return!1;for(const i of e.addresses){let e=!1;for(const r of t.addresses)if(n(i,r)){e=!0;break}if(!e)return!1}return!0}t.EndpointMap=class{constructor(){this.map=new Set}get size(){return this.map.size}getForSubchannelAddress(e){for(const t of this.map)if(l(t.key,e))return t.value}deleteMissing(e){const t=[];for(const i of this.map){let r=!1;for(const t of e)c(t,i.key)&&(r=!0);r||(t.push(i.value),this.map.delete(i))}return t}get(e){for(const t of this.map)if(c(e,t.key))return t.value}set(e,t){for(const i of this.map)if(c(e,i.key))return void(i.value=t);this.map.add({key:e,value:t})}delete(e){for(const t of this.map)if(c(e,t.key))return void this.map.delete(t)}has(e){for(const t of this.map)if(c(e,t.key))return!0;return!1}clear(){this.map.clear()}*keys(){for(const e of this.map)yield e.key}*values(){for(const e of this.map)yield e.value}*entries(){for(const e of this.map)yield[e.key,e.value]}}},9004:function(e,t,i){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=r(e),a=0;a<i.length;a++)"default"!==i[a]&&s(t,e,i[a]);return n(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.IosSimulatorController=void 0;const o=a(i(5317)),l=a(i(1943)),c=a(i(857)),d=a(i(6928)),u=i(9023),h=i(3529),p=(0,u.promisify)(o.execFile);t.IosSimulatorController=class{constructor(e,t){this.logger=e,this.context=t,this.tempDir=d.join(c.tmpdir(),"cursor-ios-simulator-connect"),this.idbManager=new h.IdbManager(e,t.globalStorageUri.fsPath,t.extensionUri.fsPath)}async initialize(){try{await this.idbManager.ensureInstalled()}catch(e){this.logger.error("Failed to initialize idb_companion",e)}}async captureScreenshot(e="png"){this.ensureDarwin(),await this.ensureTempDir(),await this.ensureSimulatorIsBooted();const t=(new Date).toISOString().replace(/[:.]/g,"-"),i=d.join(this.tempDir,`simulator-${t}.${e}`),r=["simctl","io","booted","screenshot",`--type=${e}`,i];await this.runCommand("xcrun",r);const s=await l.readFile(i),n="png"===e?"image/png":"image/jpeg";return await l.unlink(i).catch(()=>{}),{filePath:i,base64Data:s.toString("base64"),mimeType:n,capturedAt:(new Date).toISOString()}}async captureScreenshotFast(){this.ensureDarwin();try{const e=(await p("xcrun",["simctl","io","booted","screenshot","--type=jpeg","-"],{encoding:"buffer",maxBuffer:10485760,timeout:2e3})).stdout;return e&&0!==e.length?{base64Data:e.toString("base64"),mimeType:"image/jpeg"}:null}catch(e){return null}}async tap(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.tap(e.x,e.y,e.holdMs??0);return{success:t.success,x:e.x,y:e.y,method:t.method,error:t.error}}async swipe(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.swipe(e.startX,e.startY,e.endX,e.endY,e.durationMs??300);return{success:t.success,startX:e.startX,startY:e.startY,endX:e.endX,endY:e.endY,method:t.method,error:t.error}}async typeText(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.typeText(e.text);return{text:e.text,success:t.success,error:t.error}}async pressKey(e){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=await this.idbManager.pressKey(e);return{key:e,success:t.success,error:t.error}}async accessibilitySnapshot(e={}){this.ensureDarwin(),await this.ensureSimulatorIsBooted();const t=e.maxDepth??4,i=e.maxChildrenPerNode??24,r=await this.idbManager.getAccessibilityTree(t,i);return r.error?{capturedAt:(new Date).toISOString(),tree:{role:null,name:null,value:null,bounds:null},error:r.error}:{capturedAt:r.capturedAt??(new Date).toISOString(),tree:r.tree}}async getBootedDevices(){this.ensureDarwin();const e=await this.idbManager.listDevices();if(e.length>0)return e;const{stdout:t}=await this.runCommand("xcrun",["simctl","list","devices","--json"]),i=JSON.parse(t),r=[];for(const e of Object.values(i.devices))for(const t of e)"Booted"===t.state&&r.push(t);return r}async bootFirstAvailableSimulator(){return this.ensureDarwin(),this.idbManager.bootFirstAvailableSimulator()}ensureDarwin(){if("darwin"!==process.platform)throw new Error("The iOS simulator tools only work on macOS because they rely on Apple APIs.")}async ensureTempDir(){await l.mkdir(this.tempDir,{recursive:!0})}async ensureSimulatorIsBooted(){try{const{stdout:e}=await this.runCommand("xcrun",["simctl","list","devices","booted"]);if(!e||!e.includes("Booted"))throw new Error("No booted simulator device detected. Launch an iOS Simulator from Xcode first.")}catch(e){throw this.logger.error("Failed to confirm simulator state",e),e instanceof Error?e:new Error(String(e))}}async runCommand(e,t,i){try{const r=await p(e,t,i);return{stdout:r.stdout?r.stdout.toString():"",stderr:r.stderr?r.stderr.toString():""}}catch(t){throw this.logger.error(`Command ${e} failed`,t),t instanceof Error?t:new Error(String(t))}}async captureScreenshotViaIdb(){this.ensureDarwin();try{const e=await this.idbManager.screenshot();return e?{base64Data:e.imageData.toString("base64"),mimeType:`image/${e.imageFormat.toLowerCase()}`}:null}catch(e){return this.logger.warn("idb screenshot failed, will use simctl",e),null}}async startIdbVideoStream(e,t){this.ensureDarwin(),this.logger.info(`Starting idb video stream: fps=${e.fps??30}`);try{const i=await this.idbManager.startVideoStream({fps:e.fps??30,format:"mjpeg",quality:e.quality??.5,scale:e.scale??1},e=>{t(e.toString("base64"),"image/jpeg")});return i?(this.logger.info("idb video stream started successfully"),i):(this.logger.warn("idb video stream failed to start"),null)}catch(e){return this.logger.error("Failed to start idb video stream",e),null}}async dispose(){await this.idbManager.dispose();try{await l.rm(this.tempDir,{recursive:!0,force:!0})}catch{}}}},9012:(e,t,i)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0,t.setup=function(){g&&(0,o.registerLoadBalancerType)(m,k,_)};const s=i(463),n=i(131),a=i(4700),o=i(342),l=i(8923),c=i(533),d=i(178),u=i(8996),h=i(2379),p=i(267);function f(e){p.trace(n.LogVerbosity.DEBUG,"outlier_detection",e)}const m="outlier_detection",g="true"===(null!==(r=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==r?r:"true"),v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},y={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function b(e,t,i,r){if(t in e&&void 0!==e[t]&&typeof e[t]!==i)throw new Error(`outlier detection config ${r?`${r}.${t}`:t} parse error: expected ${i}, got ${typeof e[t]}`)}function S(e,t,i){const r=i?`${i}.${t}`:t;if(t in e&&void 0!==e[t]){if(!(0,a.isDuration)(e[t]))throw new Error(`outlier detection config ${r} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw new Error(`outlier detection config ${r} parse error: values out of range for non-negative Duaration`)}}function C(e,t,i){const r=i?`${i}.${t}`:t;if(b(e,t,"number",i),t in e&&void 0!==e[t]&&!(e[t]>=0&&e[t]<=100))throw new Error(`outlier detection config ${r} parse error: value out of range for percentage (0-100)`)}class _{constructor(e,t,i,r,s,n,a){if(this.childPolicy=a,"pick_first"===a.getLoadBalancerName())throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=i?i:3e5,this.maxEjectionPercent=null!=r?r:10,this.successRateEjection=s?Object.assign(Object.assign({},v),s):null,this.failurePercentageEjection=n?Object.assign(Object.assign({},y),n):null}getLoadBalancerName(){return m}toJsonObject(){var e,t;return{outlier_detection:{interval:(0,a.msToDuration)(this.intervalMs),base_ejection_time:(0,a.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,a.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:null!==(e=this.successRateEjection)&&void 0!==e?e:void 0,failure_percentage_ejection:null!==(t=this.failurePercentageEjection)&&void 0!==t?t:void 0,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(e){var t;if(S(e,"interval"),S(e,"base_ejection_time"),S(e,"max_ejection_time"),C(e,"max_ejection_percent"),"success_rate_ejection"in e&&void 0!==e.success_rate_ejection){if("object"!=typeof e.success_rate_ejection)throw new Error("outlier detection config success_rate_ejection must be an object");b(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),C(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),b(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),b(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e&&void 0!==e.failure_percentage_ejection){if("object"!=typeof e.failure_percentage_ejection)throw new Error("outlier detection config failure_percentage_ejection must be an object");C(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),C(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),b(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),b(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}if(!("child_policy"in e)||!Array.isArray(e.child_policy))throw new Error("outlier detection config child_policy must be an array");const i=(0,l.selectLbConfigFromList)(e.child_policy);if(!i)throw new Error("outlier detection config child_policy: no valid recognized policy found");return new _(e.interval?(0,a.durationToMs)(e.interval):null,e.base_ejection_time?(0,a.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,a.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,i)}}t.OutlierDetectionLoadBalancingConfig=_;class T extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.refCount=0}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.setHealthy(!1)}uneject(){this.setHealthy(!0)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}class E{constructor(){this.activeBucket={success:0,failure:0},this.inactiveBucket={success:0,failure:0}}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket={success:0,failure:0}}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class w{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===d.PickResultType.COMPLETE){const e=t.subchannel,i=e.getMapEntry();if(i){let r=t.onCallEnded;return this.countCalls&&(r=(e,r,s)=>{var a;e===n.Status.OK?i.counter.addSuccess():i.counter.addFailure(),null===(a=t.onCallEnded)||void 0===a||a.call(t,e,r,s)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:r})}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}return t}}class k{constructor(e){this.entryMap=new u.EndpointMap,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new c.ChildLoadBalancerHandler((0,o.createChildChannelControlHelper)(e,{createSubchannel:(t,i)=>{const r=e.createSubchannel(t,i),s=this.entryMap.getForSubchannelAddress(t),n=new T(r,s);return null!==(null==s?void 0:s.currentEjectionTimestamp)&&n.eject(),null==s||s.subchannelWrappers.push(n),n},updateState:(t,i,r)=>{t===s.ConnectivityState.READY?e.updateState(t,new w(i,this.isCountingEnabled()),r):e.updateState(t,i,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(const t of this.entryMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.entryMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;f("Running success rate check");const i=t.request_volume;let r=0;const s=[];for(const[e,t]of this.entryMap.entries()){const n=t.counter.getLastSuccesses(),a=t.counter.getLastFailures();f("Stats for "+(0,u.endpointToString)(e)+": successes="+n+" failures="+a+" targetRequestVolume="+i),n+a>=i&&(r+=1,s.push(n/(n+a)))}if(f("Found "+r+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),r<t.minimum_hosts)return;const n=s.reduce((e,t)=>e+t)/s.length;let a=0;for(const e of s){const t=e-n;a+=t*t}const o=a/s.length,l=Math.sqrt(o),c=n-l*(t.stdev_factor/1e3);f("stdev="+l+" ejectionThreshold="+c);for(const[r,s]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const n=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(n+a<i)continue;const o=n/(n+a);if(f("Checking candidate "+r+" successRate="+o),o<c){const i=100*Math.random();f("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage),i<t.enforcement_percentage&&(f("Ejecting candidate "+r),this.eject(s,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;f("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let i=0;for(const e of this.entryMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(i+=1);if(!(i<t.minimum_hosts))for(const[i,r]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const s=r.counter.getLastSuccesses(),n=r.counter.getLastFailures();if((f("Candidate successes="+s+" failures="+n),!(s+n<t.request_volume))&&100*n/(n+s)>t.threshold){const s=100*Math.random();f("Candidate "+i+" randomNumber="+s+" enforcement_percentage="+t.enforcement_percentage),s<t.enforcement_percentage&&(f("Ejecting candidate "+i),this.eject(r,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers)t.eject()}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(const e of this.entryMap.values())e.counter.switchBuckets()}startTimer(e){var t,i;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null===(i=(t=this.ejectionTimer).unref)||void 0===i||i.call(t)}runChecks(){const e=new Date;if(f("Ejection timer running"),this.switchAllBuckets(),this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(const[e,t]of this.entryMap.entries())if(null===t.currentEjectionTimestamp)t.ejectionTimeMultiplier>0&&(t.ejectionTimeMultiplier-=1);else{const i=this.latestConfig.getBaseEjectionTimeMs(),r=this.latestConfig.getMaxEjectionTimeMs(),s=new Date(t.currentEjectionTimestamp.getTime());s.setMilliseconds(s.getMilliseconds()+Math.min(i*t.ejectionTimeMultiplier,Math.max(i,r))),s<new Date&&(f("Unejecting "+e),this.uneject(t))}}}updateAddressList(e,t,i,r){if(!(t instanceof _))return!1;if(f("Received update with config: "+JSON.stringify(t.toJsonObject(),void 0,2)),e.ok){for(const t of e.value)this.entryMap.has(t)||(f("Adding map entry for "+(0,u.endpointToString)(t)),this.entryMap.set(t,{counter:new E,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));this.entryMap.deleteMissing(e.value)}const s=t.getChildPolicy();if(this.childBalancer.updateAddressList(e,s,i,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){f("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else f("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{f("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(const e of this.entryMap.values())this.uneject(e),e.ejectionTimeMultiplier=0}return this.latestConfig=t,!0}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return m}}t.OutlierDetectionLoadBalancer=k},9023:e=>{"use strict";e.exports=require("util")},9100:(e,t,i)=>{"use strict";var r=e.exports=i(5325);r.build="full",r.tokenize=i(527),r.parse=i(4863),r.common=i(5095),r.Root._configure(r.Type,r.parse,r.common)},9167:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CIPHER_SUITES=void 0,t.getDefaultRootsData=function(){return s?(null===n&&(n=r.readFileSync(s)),n):null};const r=i(9896);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const s=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let n=null},9207:(e,t)=>{"use strict";var i=t,r=i.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},s=i.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=r(e),s="";i&&(s=t.shift()+"/");for(var n=0;n<t.length;)".."===t[n]?n>0&&".."!==t[n-1]?t.splice(--n,2):i?t.splice(n,1):++n:"."===t[n]?t.splice(n,1):++n;return s+t.join("/")};i.resolve=function(e,t,i){return i||(t=s(t)),r(t)?t:(i||(e=s(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?s(e+"/"+t):t)}},9278:e=>{"use strict";e.exports=require("net")},9302:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHANNEL_ARGS_CONFIG_SELECTOR_KEY=void 0,t.registerResolver=function(e,t){s[e]=t},t.registerDefaultScheme=function(e){n=e},t.createResolver=function(e,t,i){if(void 0!==e.scheme&&e.scheme in s)return new s[e.scheme](e,t,i);throw new Error(`No resolver could be created for target ${(0,r.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in s)return s[e.scheme].getDefaultAuthority(e);throw new Error(`Invalid target ${(0,r.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){return void 0!==e.scheme&&e.scheme in s?e:null!==n?{scheme:n,authority:void 0,path:(0,r.uriToString)(e)}:null};const r=i(3822);t.CHANNEL_ARGS_CONFIG_SELECTOR_KEY="grpc.internal.config_selector";const s={};let n=null},9390:e=>{"use strict";e.exports=function(e,t,i){var r=i||8192,s=r>>>1,n=null,a=r;return function(i){if(i<1||i>s)return e(i);a+i>r&&(n=e(r),a=0);var o=t.call(n,a,a+=i);return 7&a&&(a=1+(7|a)),o}}},9410:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),r=128===i[3];function s(e,r,s){t[0]=e,r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3]}function n(e,r,s){t[0]=e,r[s]=i[3],r[s+1]=i[2],r[s+2]=i[1],r[s+3]=i[0]}function a(e,r){return i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],t[0]}function o(e,r){return i[3]=e[r],i[2]=e[r+1],i[1]=e[r+2],i[0]=e[r+3],t[0]}e.writeFloatLE=r?s:n,e.writeFloatBE=r?n:s,e.readFloatLE=r?a:o,e.readFloatBE=r?o:a}():function(){function t(e,t,i,r){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,i,r);else if(isNaN(t))e(2143289344,i,r);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,i,r);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,i,r);else{var n=Math.floor(Math.log(t)/Math.LN2);e((s<<31|n+127<<23|8388607&Math.round(t*Math.pow(2,-n)*8388608))>>>0,i,r)}}function a(e,t,i){var r=e(t,i),s=2*(r>>31)+1,n=r>>>23&255,a=8388607&r;return 255===n?a?NaN:s*(1/0):0===n?1401298464324817e-60*s*a:s*Math.pow(2,n-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,r),e.readFloatLE=a.bind(null,s),e.readFloatBE=a.bind(null,n)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),r=128===i[7];function s(e,r,s){t[0]=e,r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3],r[s+4]=i[4],r[s+5]=i[5],r[s+6]=i[6],r[s+7]=i[7]}function n(e,r,s){t[0]=e,r[s]=i[7],r[s+1]=i[6],r[s+2]=i[5],r[s+3]=i[4],r[s+4]=i[3],r[s+5]=i[2],r[s+6]=i[1],r[s+7]=i[0]}function a(e,r){return i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],i[4]=e[r+4],i[5]=e[r+5],i[6]=e[r+6],i[7]=e[r+7],t[0]}function o(e,r){return i[7]=e[r],i[6]=e[r+1],i[5]=e[r+2],i[4]=e[r+3],i[3]=e[r+4],i[2]=e[r+5],i[1]=e[r+6],i[0]=e[r+7],t[0]}e.writeDoubleLE=r?s:n,e.writeDoubleBE=r?n:s,e.readDoubleLE=r?a:o,e.readDoubleBE=r?o:a}():function(){function t(e,t,i,r,s,n){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,s,n+t),e(1/r>0?0:2147483648,s,n+i);else if(isNaN(r))e(0,s,n+t),e(2146959360,s,n+i);else if(r>17976931348623157e292)e(0,s,n+t),e((a<<31|2146435072)>>>0,s,n+i);else{var o;if(r<22250738585072014e-324)e((o=r/5e-324)>>>0,s,n+t),e((a<<31|o/4294967296)>>>0,s,n+i);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(o=r*Math.pow(2,-l))>>>0,s,n+t),e((a<<31|l+1023<<20|1048576*o&1048575)>>>0,s,n+i)}}}function a(e,t,i,r,s){var n=e(r,s+t),a=e(r,s+i),o=2*(a>>31)+1,l=a>>>20&2047,c=4294967296*(1048575&a)+n;return 2047===l?c?NaN:o*(1/0):0===l?5e-324*o*c:o*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=a.bind(null,s,0,4),e.readDoubleBE=a.bind(null,n,4,0)}(),e}function i(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function r(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function n(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},9453:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(i||(i={})),t.StreamDecoder=class{constructor(e){this.maxReadMessageLength=e,this.readState=i.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,r=0;const s=[];for(;r<e.length;)switch(this.readState){case i.NO_DATA:this.readCompressFlag=e.slice(r,r+1),r+=1,this.readState=i.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case i.READING_SIZE:if(t=Math.min(e.length-r,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,r,r+t),this.readSizeRemaining-=t,r+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=i.READING_MESSAGE;else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=i.NO_DATA,s.push(e)}}break;case i.READING_MESSAGE:if(t=Math.min(e.length-r,this.readMessageRemaining),this.readPartialMessage.push(e.slice(r,r+t)),this.readMessageRemaining-=t,r+=t,0===this.readMessageRemaining){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=i.NO_DATA,s.push(t)}break;default:throw new Error("Unexpected read state")}return s}}},9503:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTrackerStub=t.ChannelzCallTracker=t.ChannelzChildrenTrackerStub=t.ChannelzChildrenTracker=t.ChannelzTrace=t.ChannelzTraceStub=void 0,t.unregisterChannelzRef=function(e){g[e.kind].eraseElementByKey(e.id)},t.getChannelzHandlers=A,t.getChannelzServiceDefinition=D,t.setup=function(){(0,l.registerAdminService)(D,A)};const r=i(9278),s=i(6787),n=i(463),a=i(131),o=i(8996),l=i(2661),c=i(4056);function d(e){return{channel_id:e.id,name:e.name}}function u(e){return{subchannel_id:e.id,name:e.name}}function h(e){return{socket_id:e.id,name:e.name}}const p=100;t.ChannelzTraceStub=class{constructor(){this.events=[],this.creationTimestamp=new Date,this.eventsLogged=0}addTrace(){}getTraceMessage(){return{creation_timestamp:_(this.creationTimestamp),num_events_logged:this.eventsLogged,events:[]}}},t.ChannelzTrace=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,i){const r=new Date;this.events.push({description:t,severity:e,timestamp:r,childChannel:"channel"===(null==i?void 0:i.kind)?i:void 0,childSubchannel:"subchannel"===(null==i?void 0:i.kind)?i:void 0}),this.events.length>=64&&(this.events=this.events.slice(32)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:_(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:_(e.timestamp),channel_ref:e.childChannel?d(e.childChannel):null,subchannel_ref:e.childSubchannel?u(e.childSubchannel):null}))}}};class f{constructor(){this.channelChildren=new s.OrderedMap,this.subchannelChildren=new s.OrderedMap,this.socketChildren=new s.OrderedMap,this.trackerMap={channel:this.channelChildren,subchannel:this.subchannelChildren,socket:this.socketChildren}}refChild(e){const t=this.trackerMap[e.kind],i=t.find(e.id);i.equals(t.end())?t.setElement(e.id,{ref:e,count:1},i):i.pointer[1].count+=1}unrefChild(e){const t=this.trackerMap[e.kind],i=t.getElementByKey(e.id);void 0!==i&&(i.count-=1,0===i.count&&t.eraseElementByKey(e.id))}getChildLists(){return{channels:this.channelChildren,subchannels:this.subchannelChildren,sockets:this.socketChildren}}}t.ChannelzChildrenTracker=f,t.ChannelzChildrenTrackerStub=class extends f{refChild(){}unrefChild(){}};class m{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=m,t.ChannelzCallTrackerStub=class extends m{addCallStarted(){}addCallSucceeded(){}addCallFailed(){}};const g={channel:new s.OrderedMap,subchannel:new s.OrderedMap,server:new s.OrderedMap,socket:new s.OrderedMap},v=e=>{let t=1;const i=g[e];return(r,s,n)=>{const a=t++,o={id:a,name:r,kind:e};return n&&i.setElement(a,{ref:o,getInfo:s}),o}};function y(e){if(""===e)return[];const t=e.split(":").map(e=>function(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}(e));return[].concat(...t)}function b(e){return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))))}function S(e){if((0,r.isIPv4)(e))return b(e);if(function(e){return(0,r.isIPv6)(e)&&e.toLowerCase().startsWith("::ffff:")&&(0,r.isIPv4)(e.substring(7))}(e))return b(e.substring(7));if((0,r.isIPv6)(e)){let t,i;const r=e.indexOf("::");-1===r?(t=e,i=""):(t=e.substring(0,r),i=e.substring(r+2));const s=Buffer.from(y(t)),n=Buffer.from(y(i)),a=Buffer.alloc(16-s.length-n.length,0);return Buffer.concat([s,a,n])}return null}function C(e){switch(e){case n.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case n.ConnectivityState.IDLE:return{state:"IDLE"};case n.ConnectivityState.READY:return{state:"READY"};case n.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case n.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function _(e){if(!e)return null;const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function T(e){const t=e.getInfo(),i=[],r=[];return t.children.channels.forEach(e=>{i.push(d(e[1].ref))}),t.children.subchannels.forEach(e=>{r.push(u(e[1].ref))}),{ref:d(e.ref),data:{target:t.target,state:C(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:_(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:i,subchannel_ref:r}}function E(e,t){const i=parseInt(e.request.channel_id,10),r=g.channel.getElementByKey(i);void 0!==r?t(null,{channel:T(r)}):t({code:a.Status.NOT_FOUND,details:"No channel data found for id "+i})}function w(e,t){const i=parseInt(e.request.max_results,10)||p,r=[],s=parseInt(e.request.start_channel_id,10),n=g.channel;let a;for(a=n.lowerBound(s);!a.equals(n.end())&&r.length<i;a=a.next())r.push(T(a.pointer[1]));t(null,{channel:r,end:a.equals(n.end())})}function k(e){const t=e.getInfo(),i=[];return t.listenerChildren.sockets.forEach(e=>{i.push(h(e[1].ref))}),{ref:(r=e.ref,{server_id:r.id}),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:_(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:i};var r}function O(e,t){const i=parseInt(e.request.server_id,10),r=g.server.getElementByKey(i);void 0!==r?t(null,{server:k(r)}):t({code:a.Status.NOT_FOUND,details:"No server data found for id "+i})}function R(e,t){const i=parseInt(e.request.max_results,10)||p,r=parseInt(e.request.start_server_id,10),s=g.server,n=[];let a;for(a=s.lowerBound(r);!a.equals(s.end())&&n.length<i;a=a.next())n.push(k(a.pointer[1]));t(null,{server:n,end:a.equals(s.end())})}function P(e,t){const i=parseInt(e.request.subchannel_id,10),r=g.subchannel.getElementByKey(i);if(void 0===r)return void t({code:a.Status.NOT_FOUND,details:"No subchannel data found for id "+i});const s=r.getInfo(),n=[];s.children.sockets.forEach(e=>{n.push(h(e[1].ref))}),t(null,{subchannel:{ref:u(r.ref),data:{target:s.target,state:C(s.state),calls_started:s.callTracker.callsStarted,calls_succeeded:s.callTracker.callsSucceeded,calls_failed:s.callTracker.callsFailed,last_call_started_timestamp:_(s.callTracker.lastCallStartedTimestamp),trace:s.trace.getTraceMessage()},socket_ref:n}})}function I(e){var t;return(0,o.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=S(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function N(e,t){var i,r,s,n,o;const l=parseInt(e.request.socket_id,10),c=g.socket.getElementByKey(l);if(void 0===c)return void t({code:a.Status.NOT_FOUND,details:"No socket data found for id "+l});const d=c.getInfo(),u=d.security?{model:"tls",tls:{cipher_suite:d.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(i=d.security.cipherSuiteStandardName)&&void 0!==i?i:void 0,other_name:null!==(r=d.security.cipherSuiteOtherName)&&void 0!==r?r:void 0,local_certificate:null!==(s=d.security.localCertificate)&&void 0!==s?s:void 0,remote_certificate:null!==(n=d.security.remoteCertificate)&&void 0!==n?n:void 0}}:null;t(null,{socket:{ref:h(c.ref),local:d.localAddress?I(d.localAddress):null,remote:d.remoteAddress?I(d.remoteAddress):null,remote_name:null!==(o=d.remoteName)&&void 0!==o?o:void 0,security:u,data:{keep_alives_sent:d.keepAlivesSent,streams_started:d.streamsStarted,streams_succeeded:d.streamsSucceeded,streams_failed:d.streamsFailed,last_local_stream_created_timestamp:_(d.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:_(d.lastRemoteStreamCreatedTimestamp),messages_received:d.messagesReceived,messages_sent:d.messagesSent,last_message_received_timestamp:_(d.lastMessageReceivedTimestamp),last_message_sent_timestamp:_(d.lastMessageSentTimestamp),local_flow_control_window:d.localFlowControlWindow?{value:d.localFlowControlWindow}:null,remote_flow_control_window:d.remoteFlowControlWindow?{value:d.remoteFlowControlWindow}:null}}})}function x(e,t){const i=parseInt(e.request.server_id,10),r=g.server.getElementByKey(i);if(void 0===r)return void t({code:a.Status.NOT_FOUND,details:"No server data found for id "+i});const s=parseInt(e.request.start_socket_id,10),n=parseInt(e.request.max_results,10)||p,o=r.getInfo().sessionChildren.sockets,l=[];let c;for(c=o.lowerBound(s);!c.equals(o.end())&&l.length<n;c=c.next())l.push(h(c.pointer[1].ref));t(null,{socket_ref:l,end:c.equals(o.end())})}function A(){return{GetChannel:E,GetTopChannels:w,GetServer:O,GetServers:R,GetSubchannel:P,GetSocket:N,GetServerSockets:x}}t.registerChannelzChannel=v("channel"),t.registerChannelzSubchannel=v("subchannel"),t.registerChannelzServer=v("server"),t.registerChannelzSocket=v("socket");let M=null;function D(){if(M)return M;const e=(0,i(5085).Yi)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]}),t=(0,c.loadPackageDefinition)(e);return M=t.grpc.channelz.v1.Channelz.service,M}},9687:(e,t,i)=>{"use strict";e.exports=o;var r=i(1304);((o.prototype=Object.create(r.prototype)).constructor=o).className="Service";var s=i(8811),n=i(3262),a=i(5047);function o(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var i=new o(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),n=0;n<r.length;++n)i.add(s.fromJSON(r[n],t.methods[r[n]]));return t.nested&&i.addJSON(t.nested),t.edition&&(i._edition=t.edition),i.comment=t.comment,i._defaultEdition="proto3",i},o.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return n.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=n.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},o.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;r.prototype.resolve.call(this);for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return this},o.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,r.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,l(this)):r.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return r.prototype.remove.call(this,e)},o.prototype.create=function(e,t,i){for(var r,s=new a.Service(e,t,i),o=0;o<this.methodsArray.length;++o){var l=n.lcFirst((r=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");s[l]=n.codegen(["r","c"],n.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return s}},9750:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,(i=t.errorUtil||(t.errorUtil={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},i.toString=e=>"string"==typeof e?e:null==e?void 0:e.message},9752:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},9896:e=>{"use strict";e.exports=require("fs")},9943:e=>{"use strict";e.exports={rE:"1.14.3"}},9970:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMcpTools=function(e){const t=new Map;for(const[i,r]of Object.entries(e))t.set(i,async e=>{let t=e;if(r.params){const s=r.params.safeParse(e);if(!s.success)throw new Error(`Invalid params for ${i}: ${s.error.message}`);t=s.data}const s=await r.impl(t);if(r.result){const e=r.result.safeParse(s);if(!e.success)throw new Error(`Invalid result for ${i}: ${e.error.message}`);return e.data}return s});const i=Object.entries(e).map(([e,t])=>{let i={type:"object",properties:{},required:[]};return t.params&&(i=(0,r.zodToJsonSchema)(t.params,{target:"openApi3",$refStrategy:"none"})),{name:e,description:t.description,parameters:JSON.stringify(i)}});return{call:async function(e,i){const r=t.get(e);if(!r)throw new Error(`Unknown tool: ${e}`);return r(i)},offerings:function(){return i}}};const r=i(2522)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1184),__webpack_export_target__=exports;for(var __webpack_i__ in __webpack_exports__)__webpack_export_target__[__webpack_i__]=__webpack_exports__[__webpack_i__];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();
//# sourceMappingURL=http://go/sourcemap/sourcemaps/4ca9b38c6c97d4243bf0c61e51426667cb964bd0/extensions/cursor-ios-simulator-connect/dist/main.js.map