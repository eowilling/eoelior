import { makeOfflineTransport } from '@sentry/core';
import { makeElectronTransport } from './electron-net.js';
import { createOfflineStore } from './offline-store.js';

/**
 * Creates a Transport that uses Electrons net module to send events to Sentry. When they fail to send they are
 * persisted to disk and sent later
 */
function makeElectronOfflineTransport(baseTransport = makeElectronTransport) {
    return (userOptions) => {
        // `makeElectronOfflineTransport` is a combination of two transports.
        //
        // The base Electron transport (`makeElectronTransport`) is wrapped by `makeOfflineTransport` which stores events to
        // disk when they fail to send.
        return makeOfflineTransport(baseTransport)({
            flushAtStartup: true,
            createStore: createOfflineStore,
            ...userOptions,
        });
    };
}

export { makeElectronOfflineTransport };//# sourceMappingURL=http://go/sourcemap/sourcemaps/4ca9b38c6c97d4243bf0c61e51426667cb964bd0/node_modules/@sentry/electron/esm/main/transports/electron-offline-net.js.map
