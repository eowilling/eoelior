<!DOCTYPE html>
<html lang="zh-TW">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>æ•¸ç¨éŠæˆ²ï¼ˆWeb ç‰ˆï¼‰ - eoelior</title>
	<style>
		:root {
			color-scheme: light;
		}

		body {
			margin: 0;
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
			background: radial-gradient(circle at top, #e0f2fe 0, #eff6ff 40%, #f9fafb 100%);
			min-height: 100vh;
			display: flex;
			align-items: stretch;
			justify-content: center;
		}

		.app-shell {
			flex: 1;
			max-width: 1080px;
			margin: 1.5rem auto;
			background: #ffffff;
			border-radius: 16px;
			box-shadow: 0 22px 60px rgba(15, 23, 42, 0.25);
			display: flex;
			flex-direction: column;
			overflow: hidden;
		}

		header {
			background: linear-gradient(135deg, #0ea5e9, #6366f1);
			color: #fff;
			padding: 1rem 1.5rem;
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 0.75rem;
		}

		.header-title {
			display: flex;
			flex-direction: column;
			gap: 0.15rem;
		}

		.header-title-main {
			font-size: 1.1rem;
			font-weight: 700;
			display: flex;
			align-items: center;
			gap: 0.4rem;
		}

		.header-title-sub {
			font-size: 0.8rem;
			opacity: 0.9;
		}

		.back-btn {
			border-radius: 999px;
			border: none;
			background: rgba(15, 23, 42, 0.18);
			color: #e5e7eb;
			padding: 0.5rem 1.2rem;
			font-size: 0.95rem;
			cursor: pointer;
		}

		.back-btn:hover {
			background: rgba(15, 23, 42, 0.28);
		}

		main {
			padding: 1.25rem 1.5rem 1.5rem;
			display: flex;
			flex-direction: column;
			gap: 0.75rem;
		}

		.toolbar {
			display: flex;
			flex-wrap: wrap;
			align-items: center;
			justify-content: space-between;
			gap: 0.5rem;
		}

		.toolbar-left,
		.toolbar-right {
			display: flex;
			flex-wrap: wrap;
			align-items: center;
			gap: 0.4rem;
		}

		.badge {
			border-radius: 999px;
			padding: 0.25rem 0.8rem;
			font-size: 0.9rem;
			background: #eef2ff;
			color: #4338ca;
		}

		.sudoku-btn {
			border-radius: 999px;
			border: 1px solid #e5e7eb;
			background: #f9fafb;
			padding: 0.5rem 1rem;
			font-size: 1rem;
			cursor: pointer;
			color: #111827;
		}

		.sudoku-btn.primary {
			background: #4f46e5;
			color: #fff;
			border-color: #4f46e5;
		}

		.sudoku-btn.accent {
			background: #0ea5e9;
			color: #fff;
			border-color: #0ea5e9;
		}

		.sudoku-btn.danger {
			background: #fee2e2;
			color: #b91c1c;
			border-color: #fecaca;
		}

		.sudoku-btn.selected {
			background: #4f46e5;
			color: #fff;
			border-color: #4338ca;
		}

		.sudoku-btn:hover {
			filter: brightness(0.96);
		}

		.board-section {
			display: flex;
			justify-content: center;
			align-items: flex-start;
			gap: 2rem;
			margin-top: 0.5rem;
			flex-wrap: wrap;
		}

		.board-wrapper {
			display: flex;
			justify-content: center;
		}

		#sudokuGrid {
			display: grid;
			grid-template-columns: repeat(9, 1fr);
			grid-template-rows: repeat(9, 1fr);
			width: min(440px, 85vw);
			aspect-ratio: 1 / 1;
			border: 2px solid #111827;
			border-radius: 8px;
			overflow: hidden;
			user-select: none;
			touch-action: manipulation;
			background: #111827;
		}

		.sudoku-cell {
			background: #ffffff;
			border: 1px solid #e5e7eb;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.15rem;
			font-weight: 600;
			color: #111827;
			cursor: pointer;
		}

		.sudoku-cell.given {
			background: #eff6ff;
			color: #1d4ed8;
		}

		.sudoku-cell.selected {
			background: #fef3c7;
		}

		.sudoku-cell.hint {
			color: #16a34a;
			background: #ecfdf5;
		}

		.sudoku-cell.error {
			background: #fee2e2;
			color: #b91c1c;
		}

		.sudoku-side {
			display: flex;
			flex-direction: column;
			gap: 0.75rem;
			min-width: 170px;
			max-width: 200px;
		}

		.sudoku-numbers {
			display: grid;
			grid-template-columns: repeat(3, minmax(0, 1fr));
			gap: 0.5rem;
		}

		.sudoku-num-btn {
			border-radius: 999px;
			border: 1px solid #e5e7eb;
			background: #f9fafb;
			padding: 0.7rem 0;
			font-size: 1.2rem;
			font-weight: 600;
			cursor: pointer;
		}

		.sudoku-num-btn:hover {
			background: #e5e7eb;
		}

		.status-row {
			font-size: 0.78rem;
			color: #4b5563;
		}

		.status-row-strong {
			color: #111827;
			font-weight: 600;
		}

		.footer-note {
			font-size: 0.7rem;
			color: #9ca3af;
		}

		@media (max-width: 640px) {
			.app-shell {
				margin: 0.75rem;
			}

			header {
				padding: 0.85rem 1rem;
			}

			main {
				padding: 1rem 1rem 1.25rem;
			}

			.board-section {
				flex-direction: column;
				align-items: center;
				gap: 0.75rem;
			}

			.sudoku-side {
				align-items: center;
				text-align: center;
			}

			.sudoku-numbers {
				gap: 1rem;
				max-width: 280px;
			}

			.sudoku-num-btn {
				padding: 1.2rem 0;
				font-size: 1.4rem;
				min-height: 3.5rem;
			}
		}
	</style>
</head>

<body>
	<div class="app-shell">
		<header>
			<div class="header-title">
				<div class="header-title-main">
					<span>ğŸ§©</span>
					<span>æ•¸ç¨éŠæˆ²ï¼ˆWeb ç‰ˆï¼‰</span>
				</div>
				<div class="header-title-sub">äº”æ˜Ÿé›£åº¦ãƒ»ç„¡é™æç¤ºãƒ»æœ¬åœ°åŸ·è¡Œä¸ä¸Šå‚³è³‡æ–™</div>
			</div>
			<button class="back-btn" type="button" onclick="window.location.href='../index.html'">â† å›åˆ°å·¥å…·é¦–é </button>
		</header>
		<main>
			<div class="toolbar">
				<div class="toolbar-left">
					<span class="badge">é›£åº¦</span>
					<button class="sudoku-btn selected" type="button" data-difficulty="1"
						onclick="setSudokuDifficulty(1)">â­ 1</button>
					<button class="sudoku-btn" type="button" data-difficulty="2" onclick="setSudokuDifficulty(2)">â­â­
						2</button>
					<button class="sudoku-btn" type="button" data-difficulty="3" onclick="setSudokuDifficulty(3)">â­â­â­
						3</button>
					<button class="sudoku-btn" type="button" data-difficulty="4" onclick="setSudokuDifficulty(4)">â­â­â­â­
						4</button>
					<button class="sudoku-btn" type="button" data-difficulty="5" onclick="setSudokuDifficulty(5)">â­â­â­â­â­
						5</button>
				</div>
				<div class="toolbar-right">
					<button class="sudoku-btn primary" type="button" onclick="newSudokuGame()">æ–°éŠæˆ²</button>
					<button class="sudoku-btn accent" type="button" onclick="giveSudokuHint()">æç¤ºï¼ˆç„¡ä¸Šé™ï¼‰</button>
					<button class="sudoku-btn danger" type="button" onclick="clearSudokuCell()">æ¸…é™¤æ ¼å­</button>
				</div>
			</div>

			<div class="board-section">
				<div class="board-wrapper">
					<div id="sudokuGrid" aria-label="æ•¸ç¨æ£‹ç›¤"></div>
				</div>
				<div class="sudoku-side">
					<div class="sudoku-numbers" aria-label="æ•¸å­—é¸æ“‡">
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(1)">1</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(2)">2</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(3)">3</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(4)">4</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(5)">5</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(6)">6</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(7)">7</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(8)">8</button>
						<button class="sudoku-num-btn" type="button" onclick="inputSudokuNumber(9)">9</button>
					</div>
					<div class="status-row">
						<span id="sudokuStatus" class="status-row-strong">æº–å‚™å°±ç·’ï¼Œé¸æ“‡é›£åº¦å¾Œé»ã€Œæ–°éŠæˆ²ã€é–‹å§‹ã€‚</span>
					</div>
					<div class="footer-note">æ•¸æ“šåªåœ¨æ­¤é é¢ä¸­é‹è¡Œï¼Œä¸æœƒä¸Šå‚³ä¼ºæœå™¨ã€‚</div>
				</div>
			</div>
		</main>
	</div>

	<script>
		let sudokuDifficulty = 1;
		let sudokuPuzzle = [];
		let sudokuSolution = [];
		let sudokuCurrent = [];
		let sudokuSelected = null; // [row, col]

		const SUDOKU_BASE_SOLUTION = [
			[5, 3, 4, 6, 7, 8, 9, 1, 2],
			[6, 7, 2, 1, 9, 5, 3, 4, 8],
			[1, 9, 8, 3, 4, 2, 5, 6, 7],
			[8, 5, 9, 7, 6, 1, 4, 2, 3],
			[4, 2, 6, 8, 5, 3, 7, 9, 1],
			[7, 1, 3, 9, 2, 4, 8, 5, 6],
			[9, 6, 1, 5, 3, 7, 2, 8, 4],
			[2, 8, 7, 4, 1, 9, 6, 3, 5],
			[3, 4, 5, 2, 8, 6, 1, 7, 9]
		];

		function cloneBoard(board) {
			return board.map(row => row.slice());
		}

		function shuffleArray(arr) {
			const a = arr.slice();
			for (let i = a.length - 1; i > 0; i--) {
				const j = Math.floor(Math.random() * (i + 1));
				[a[i], a[j]] = [a[j], a[i]];
			}
			return a;
		}

		function generateSudokuPuzzle(difficulty) {
			const removalMap = { 1: 30, 2: 40, 3: 48, 4: 54, 5: 60 };
			const removals = removalMap[difficulty] || 40;

			const puzzle = cloneBoard(SUDOKU_BASE_SOLUTION);
			const positions = [];
			for (let r = 0; r < 9; r++) {
				for (let c = 0; c < 9; c++) {
					positions.push([r, c]);
				}
			}
			const shuffled = shuffleArray(positions);
			for (let i = 0; i < removals && i < shuffled.length; i++) {
				const [r, c] = shuffled[i];
				puzzle[r][c] = 0;
			}
			return puzzle;
		}

		function initSudokuGrid() {
			const grid = document.getElementById('sudokuGrid');
			grid.innerHTML = '';
			for (let r = 0; r < 9; r++) {
				for (let c = 0; c < 9; c++) {
					const cell = document.createElement('div');
					cell.className = 'sudoku-cell';
					cell.dataset.row = String(r);
					cell.dataset.col = String(c);
					cell.addEventListener('click', () => selectSudokuCell(r, c));
					grid.appendChild(cell);
				}
			}
		}

		function renderSudokuBoard() {
			const grid = document.getElementById('sudokuGrid');
			const status = document.getElementById('sudokuStatus');
			const cells = grid.children;
			for (let r = 0; r < 9; r++) {
				for (let c = 0; c < 9; c++) {
					const idx = r * 9 + c;
					const cell = cells[idx];
					const value = sudokuCurrent[r][c];
					const given = sudokuPuzzle[r][c] !== 0;
					cell.textContent = value === 0 ? '' : String(value);
					cell.classList.remove('given', 'selected', 'hint', 'error');
					if (given) {
						cell.classList.add('given');
					}
					if (sudokuSelected && sudokuSelected[0] === r && sudokuSelected[1] === c) {
						cell.classList.add('selected');
					}
				}
			}
			status.textContent = 'é»æ“Šæ ¼å­å¾Œå¯è¼¸å…¥æ•¸å­—ï¼Œä½¿ç”¨ã€Œæç¤ºã€å¯ç²å¾—è‡ªå‹•å¡«å…¥ã€‚';
		}

		function setSudokuDifficulty(level) {
			sudokuDifficulty = level;
			const buttons = document.querySelectorAll('.sudoku-btn[data-difficulty]');
			buttons.forEach(btn => {
				const d = Number(btn.getAttribute('data-difficulty'));
				if (d === level) {
					btn.classList.add('selected');
				} else {
					btn.classList.remove('selected');
				}
			});
			const status = document.getElementById('sudokuStatus');
			status.textContent = `å·²é¸æ“‡é›£åº¦ï¼š${level} æ˜Ÿï¼Œé»ã€Œæ–°éŠæˆ²ã€é–‹å§‹ã€‚`;
		}

		function newSudokuGame() {
			sudokuPuzzle = generateSudokuPuzzle(sudokuDifficulty);
			sudokuSolution = cloneBoard(SUDOKU_BASE_SOLUTION);
			sudokuCurrent = cloneBoard(sudokuPuzzle);
			sudokuSelected = null;
			renderSudokuBoard();
			const status = document.getElementById('sudokuStatus');
			status.textContent = `æ–°éŠæˆ²é–‹å§‹ï¼ˆé›£åº¦ï¼š${sudokuDifficulty} æ˜Ÿï¼‰ã€‚é»æ ¼å­å¾Œå†é¸æ•¸å­—ã€‚`;
		}

		function selectSudokuCell(row, col) {
			sudokuSelected = [row, col];
			const grid = document.getElementById('sudokuGrid');
			const cells = grid.children;
			for (let r = 0; r < 9; r++) {
				for (let c = 0; c < 9; c++) {
					const idx = r * 9 + c;
					const cell = cells[idx];
					cell.classList.remove('selected');
					if (r === row && c === col) {
						cell.classList.add('selected');
					}
				}
			}
		}

		function inputSudokuNumber(num) {
			if (!sudokuSelected) {
				document.getElementById('sudokuStatus').textContent = 'è«‹å…ˆé»é¸ä¸€å€‹æ ¼å­ã€‚';
				return;
			}
			const [row, col] = sudokuSelected;
			if (sudokuPuzzle[row][col] !== 0) {
				document.getElementById('sudokuStatus').textContent = 'æ­¤æ ¼ç‚ºé¡Œç›®åŸå§‹æ•¸å­—ï¼Œç„¡æ³•ä¿®æ”¹ã€‚';
				return;
			}
			sudokuCurrent[row][col] = num;
			updateSudokuCellDisplay(row, col);
			checkSudokuCompletion();
		}

		function updateSudokuCellDisplay(row, col) {
			const grid = document.getElementById('sudokuGrid');
			const idx = row * 9 + col;
			const cell = grid.children[idx];
			const value = sudokuCurrent[row][col];
			cell.textContent = value === 0 ? '' : String(value);
			cell.classList.remove('hint', 'error');
			if (value !== 0 && value !== sudokuSolution[row][col]) {
				cell.classList.add('error');
			}
		}

		function clearSudokuCell() {
			if (!sudokuSelected) {
				document.getElementById('sudokuStatus').textContent = 'è«‹å…ˆé¸æ“‡è¦æ¸…é™¤çš„æ ¼å­ã€‚';
				return;
			}
			const [row, col] = sudokuSelected;
			if (sudokuPuzzle[row][col] !== 0) {
				document.getElementById('sudokuStatus').textContent = 'é¡Œç›®åŸå§‹æ•¸å­—ç„¡æ³•æ¸…é™¤ã€‚';
				return;
			}
			sudokuCurrent[row][col] = 0;
			updateSudokuCellDisplay(row, col);
		}

		function giveSudokuHint() {
			const empties = [];
			for (let r = 0; r < 9; r++) {
				for (let c = 0; c < 9; c++) {
					if (sudokuCurrent[r][c] === 0) {
						empties.push([r, c]);
					}
				}
			}
			if (empties.length === 0) {
				document.getElementById('sudokuStatus').textContent = 'ç›®å‰æ²’æœ‰å¯ä»¥æç¤ºçš„æ ¼å­ï¼Œå¯èƒ½å·²ç¶“å®Œæˆå›‰ï¼';
				checkSudokuCompletion(true);
				return;
			}
			const [row, col] = empties[Math.floor(Math.random() * empties.length)];
			const value = sudokuSolution[row][col];
			sudokuCurrent[row][col] = value;

			const grid = document.getElementById('sudokuGrid');
			const idx = row * 9 + col;
			const cell = grid.children[idx];
			cell.textContent = String(value);
			cell.classList.remove('error');
			cell.classList.add('hint');

			document.getElementById('sudokuStatus').textContent =
				`æç¤ºï¼šç¬¬ ${row + 1} åˆ—ã€ç¬¬ ${col + 1} è¡Œ å·²å¹«ä½ å¡«å…¥ ${value}ã€‚`;

			checkSudokuCompletion();
		}

		function checkSudokuCompletion(showMessage) {
			for (let r = 0; r < 9; r++) {
				for (let c = 0; c < 9; c++) {
					if (sudokuCurrent[r][c] === 0) return;
					if (sudokuCurrent[r][c] !== sudokuSolution[r][c]) return;
				}
			}
			const status = document.getElementById('sudokuStatus');
			status.textContent = 'æ­å–œï¼ä½ å·²å®Œæˆé€™å±€æ•¸ç¨ï¼Œå¯ä»¥å†é–‹å§‹ä¸€å±€æ›´é«˜é›£åº¦è©¦è©¦ã€‚';
			if (showMessage) {
				alert('æ­å–œå®Œæˆæ•¸ç¨ï¼');
			}
		}

		document.addEventListener('DOMContentLoaded', () => {
			initSudokuGrid();
			setSudokuDifficulty(1);
			newSudokuGame();
		});
	</script>
</body>

</html>